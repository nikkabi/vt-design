{"version":3,"sources":["webpack://lib_vt_design/webpack/universalModuleDefinition","webpack://lib_vt_design/webpack/bootstrap","webpack://lib_vt_design/global.ts","webpack://lib_vt_design/./src/widgets/styles/anderes.m.css","webpack://lib_vt_design/has.ts","webpack://lib_vt_design/./src/widgets/styles/Menu.m.css","webpack://lib_vt_design/Promise.ts","webpack://lib_vt_design/./src/widgets/styles/buttons.m.css","webpack://lib_vt_design/./node_modules/@dojo/widgets/theme/default/button.m.css.js","webpack://lib_vt_design/./src/widgets/styles/text-input.m.css","webpack://lib_vt_design/./src/widgets/styles/text.m.css","webpack://lib_vt_design/./node_modules/@dojo/widgets/theme/default/text-input.m.css.js","webpack://lib_vt_design/./src/themes/vt-design/@dojo/widgets/button/button.m.css","webpack://lib_vt_design/./src/themes/vt-design/@dojo/widgets/header-card/header-card.m.css","webpack://lib_vt_design/./src/themes/vt-design/@dojo/widgets/header/header.m.css","webpack://lib_vt_design/./src/themes/vt-design/@dojo/widgets/menu-item/menu-item.m.css","webpack://lib_vt_design/./src/themes/vt-design/@dojo/widgets/outlined-button/outlined-button.m.css","webpack://lib_vt_design/./src/themes/vt-design/@dojo/widgets/raised-button/raised-button.m.css","webpack://lib_vt_design/./src/themes/vt-design/@dojo/widgets/text-input/text-input.m.css","webpack://lib_vt_design/./src/themes/vt-design/@dojo/widgets/label/label.m.css","webpack://lib_vt_design/./node_modules/@dojo/widgets/theme/default/header.m.css.js","webpack://lib_vt_design/./node_modules/@dojo/widgets/theme/default/outlined-button.m.css.js","webpack://lib_vt_design/./node_modules/@dojo/widgets/theme/default/helper-text.m.css.js","webpack://lib_vt_design/./node_modules/@dojo/widgets/common/styles/base.m.css.js","webpack://lib_vt_design/./node_modules/@dojo/widgets/theme/default/label.m.css.js","webpack://lib_vt_design/./src/App.m.css","webpack://lib_vt_design/(webpack)/buildin/global.js","webpack://lib_vt_design/./node_modules/@dojo/webpack-contrib/bootstrap-plugin/sync.js","webpack://lib_vt_design/./node_modules/@dojo/webpack-contrib/bootstrap-plugin/common.js","webpack://lib_vt_design/./node_modules/@dojo/webpack-contrib/cldr/bootstrapSync.js","webpack://lib_vt_design/./node_modules/@dojo/webpack-contrib/build-time-render/blocks-sync.js","webpack://lib_vt_design/WeakMap.ts","webpack://lib_vt_design/Set.ts","webpack://lib_vt_design/object.ts","webpack://lib_vt_design/Map.ts","webpack://lib_vt_design/util.ts","webpack://lib_vt_design/array.ts","webpack://lib_vt_design/Destroyable.ts","webpack://lib_vt_design/Evented.ts","webpack://lib_vt_design/Registry.ts","webpack://lib_vt_design/diff.ts","webpack://lib_vt_design/RegistryHandler.ts","webpack://lib_vt_design/vdom.ts","webpack://lib_vt_design/HashHistory.ts","webpack://lib_vt_design/Router.ts","webpack://lib_vt_design/icache.ts","webpack://lib_vt_design/injector.ts","webpack://lib_vt_design/Injector.ts","webpack://lib_vt_design/ThemeInjector.ts","webpack://lib_vt_design/theme.ts","webpack://lib_vt_design/Outlet.tsx","webpack://lib_vt_design/./src/themes/vt-design/theme.ts","webpack://lib_vt_design/Link.ts","webpack://lib_vt_design/ActiveLink.ts","webpack://lib_vt_design/theme.tsx","webpack://lib_vt_design/index.tsx","webpack://lib_vt_design/./src/widgets/Menu.ts","webpack://lib_vt_design/./src/widgets/Text.tsx","webpack://lib_vt_design/focus.ts","webpack://lib_vt_design/./src/widgets/Buttons.tsx","webpack://lib_vt_design/./src/widgets/Anderes.tsx","webpack://lib_vt_design/validity.ts","webpack://lib_vt_design/./src/widgets/Text-input.tsx","webpack://lib_vt_design/./src/App.ts","webpack://lib_vt_design/./src/main.ts","webpack://lib_vt_design/RouterInjector.ts","webpack://lib_vt_design/./src/routes.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","global","globalObject","navigator","userAgent","indexOf","globalThis","self"," _key","palette","rectangle","testCache","testFunctions","normalize","exists","add","has","_shim_global__WEBPACK_IMPORTED_MODULE_0__","staticFeatures","DojoHasEnvironment","staticCache","apply","resourceId","tokens","match","id","skip","term","feature","normalizedFeature","toLowerCase","Boolean","overwrite","TypeError","strict","result","undefined","Promise","finally","Animation","KeyframeEffect","AbortController","AbortSignal","IntersectionObserver","ResizeObserver","onpointerdown","Element","link","selected","ShimPromise","_global__WEBPACK_IMPORTED_MODULE_0__","isThenable","then","_core_has__WEBPACK_IMPORTED_MODULE_1__","onFinally","this","resolve","reason","center","untertitel","pressed","popup","disabled","label","wrapper","text","input","inputWrapper","inputWrapperFocused","focused","readonly","required","invalid","addonRoot","addonFilled","hasLeading","hasTrailing","noLabel","helperText","valid","header","headerContent","avatar","title","subtitle","row","primary","secondary","sticky","leading","actions","action","trailing","spacer","active","visuallyHidden","focusable","hidden","g","Function","eval","e","default","appBase","base","__app_base__","initialPublicPath","publicPath","__public_path__","initialPublicOrigin","publicOrigin","__public_origin__","location","origin","blockCacheEntry","modulePath","args","content","__dojoBuildBridgeCache","shim_WeakMap","WeakMap","shim_Set","Set","object_assign","getOwnPropertyDescriptor","getOwnPropertyNames","getOwnPropertySymbols","is","object_keys","getOwnPropertyDescriptors","entries","values","assign","keys","Map_Map","Map","shim_Map","wrapNative","nativeFunction","target","from","of","copyWithin","fill","find","findIndex","includes","flat","flatMap","Array","noop","destroyed","Error","Destroyable_Destroyable","[object Object]","handles","handle","_handles","push","splice","destroy","forEach","own","regexMap","Evented_Evented","listenersMap","event","methods","type","globString","targetString","regex","RegExp","replace","set","test","isGlobMatch","method","listener","isArray","map","_addListener","listeners","core_Evented","WIDGET_BASE_TYPE","isWidgetBaseConstructor","item","_type","isWidgetFunction","isWidget","isWNodeFactory","node","isFactory","Registry_Registry","widgetLabel","emit","_widgetRegistry","toString","widgetCtor","emitLoadedEvent","error","injectorFactory","_injectorRegistry","invalidator","injectorItem","injector","promise","isWidgetConstructorDefaultExport","hasInjector","core_Registry","isObjectOrArray","reference","previousProperty","newProperty","changed","auto","depth","ignore","validOldProperty","validNewProperty","previousKeys","newKeys","length","some","shallow","core_RegistryHandler","super","_registry","_registryWidgetLabelMap","_registryInjectorLabelMap","baseRegistry","delete","widget","defineInjector","globalPrecedence","_get","getFunctionName","labelMap","registries","registry","registeredLabels","on","EMPTY_ARRAY","nodeOperations","NAMESPACE_SVG","NAMESPACE_W3","NAMESPACE_XLINK","WNODE","VNODE","DOMVNODE","scope","setRendering","rendering","isTextNode","nodeType","isWNodeWrapper","child","isWNode","isVNodeWrapper","isVNode","isVirtualWrapper","tag","isBodyWrapper","isHeadWrapper","isSpecialWrapper","isDomVNode","w","widgetConstructorOrNode","properties","children","__children__","widgetConstructor","v","propertiesOrChildren","deferredPropertiesCallback","classes","styles","newProperties","__rest","_a","nodeClasses","nodeStyles","nodeProperties","REGISTRY_ITEM","FromRegistry","__properties__","tsx","Infinity","__autoRegistryItem","buildPreviousProperties","domNode","current","diffType","attributes","deferredProperties","events","propName","attrName","getAttribute","reduce","props","same","dnode1","dnode2","widgetConstructor1","registryItem","widgetConstructor2","props1","props2","instance","every","findIndexOfChild","sameAs","start","createClassPropValue","classNames","className","updateAttribute","attrValue","namespace","setAttributeNS","removeAttribute","setAttribute","arrayFrom","arr","slice","createFactory","callback","middlewares","middlewareName","middleware","returns","widgetInstanceMap","widgetMetaMap","requestedDomNodes","wrapperId","metaId","addNodeToMap","widgetMeta","nodeMap","destroyHandles","meta","destroyMap","middlewareIds","size","clear","vdom_invalidator","widgetId","split","vdom_node","mountNode","contains","document","body","vdom_diffProperty","propertyName","propertiesOrDiff","diff","customDiffMap","customDiffProperties","propertyDiffMap","originalProperties","vdom_destroy","destroyFunction","vdom_getRegistry","registryHandler","isDeferred","deferRefs","wrapFunctionProperties","propertyNames","unwrap","vdom","renderer","_renderScheduled","parentInvalidate","_appWrapperId","_mountOptions","sync","merge","transition","_invalidationQueue","_processQueue","_deferredProcessQueue","_applicationQueue","_eventMap","_idToWrapperMap","_wrapperSiblingMap","_idToChildrenWrappers","_insertBeforeMap","_nodeToWrapperMap","_deferredRenderCallbacks","_allMergedNodes","_deferredProcessIds","nodeOperation","propValue","previousValue","updateEvent","eventName","currentValue","previousEvent","removeEventListener","evt","addEventListener","removeOrphanedEvents","previousProperties","onlyEvents","isEvent","substr","eventCallback","resolveRegistryItem","owningNode","instanceData","registryLabel","isLazyDefine","renderedToWrapper","rendered","parent","currentParent","requiresInsertBefore","hasPreviousSiblings","wrappedRendered","hasParentWNode","hasVirtualParentNode","hasCurrentParentChildren","insertBefore","previousItem","nodes","pop","mapNodeToInstance","renderedItem","order","parentId","exitAnimation","hasAnimations","nextParent","owningId","runDeferredProperties","next","processProperties","findInsertBefore","searchNode","nextSibling","childDomWrapperId","findDomNodeOnParentWrapper","childWrapper","parentNode","setValue","domValue","onInputValue","onSelectValue","setProperties","currentProperties","nextWrapper","includesEventsAndAttributes","propNames","propCount","previousClassString","currentClassString","merged","domClasses","styleNames","styleCount","j","styleName","newStyleValue","style","tagName","lastIndexOf","_createDeferredRenderCallback","callbacks","shift","_scheduleDeferredRenderCallbacks","run","requestAnimationFrame","previousAttributes","attrNames","attrCount","updateAttributes","_schedule","_runInvalidationQueue","getWNodeWrapper","invalidationQueue","previouslyRendered","sort","a","b","_runProcessQueue","sibling","_updateWidget","_runDomInstructionQueue","_cleanUpMergedNodes","mergedNode","removeChild","_process","reverse","parentDomNode","onAttach","parentElement","enterAnimation","enterAnimationActive","enter","owningWrapper","nodeHandler","inserted","currentDomNode","replaceChild","exitAnimationActive","exit","attached","addRoot","onDetach","createKeyMap","wrappers","mergeNodes","oldIndex","newIndex","currentLength","nextLength","instructions","currentKeys","nextKeys","currentWrapper","domElement","toUpperCase","mergeNodeIndex","_processMergeNodes","_processOne","dom","currentNode","parentWrapper","findParentDomNode","isVirtual","isBody","isHead","data","createTextNode","childNodes","head","createElementNS","createElement","_createDom","invalidate","Constructor","dirty","__setProperties__","__setChildren__","__render__","widgetName","propertiesCalled","ids","resolveMiddleware","results","uniqueId","payload","createWidgetOptions","resolvedMiddleware","_createWidget","currentChildren","_updateDom","isSpecial","remove","specialIds","wrapperChildren","_removeDom","processResult","_removeWidget","didRender","customProperties","diffMap","runDiffs","ignoreProperties","propertiesDiff","childId","mount","mountOptions","renderResult","wrapNodes","siblingId","unmount","cancelAnimationFrame","HashHistory_HashHistory","onChange","_onChange","path","normalizePath","_window","hash","_current","_onChangeFunction","prefix","PARAM","paramRegExp","ROUTE_SEGMENT_SCORE","DYNAMIC_SEGMENT_PENALTY","matchingParams","params","previousParams","Router_Router","config","options","_routes","_routeMap","_matchedRoutes","_matchedOutletMap","_currentParams","_currentQueryParams","requestedPath","_stripLeadingSlash","previousMatchedRoutes","queryParamString","_getQueryParams","segments","routeConfig","routeConfigs","route","matchedRoutes","segmentIndex","paramIndex","routeMatch","segment","childRoute","matchedRouteId","matchedRoute","currentMatch","score","_options","setDocumentTitle","queryParams","matchedRouteContext","outlet","isError","isExact","previousMatchedOutlet","routeMap","errorRoute","previousMatchedOutletKeys","_currentMatchedRoute","context","resetScroll","scroll","_register","autostart","_history","HistoryManager","_defaultRoute","setPath","linkPath","fullPath","fullQueryParams","param","index","defaultParams","fullParams","routeId","outletId","currentParams","routes","parentRoute","defaultRoute","parsedPath","queryParam","queryParameters","icache_factory","createICacheMiddleware","cacheMap","api","cachedValue","status","getOrSet","middleware_icache","middleware_injector","getRegistry","injector_injectorFactory","getInjector","core_Injector","_payload","_invalidator","isThemeWithVariant","theme","isThemeWithVariants","isThemeInjectorPayloadWithVariant","createThemeInjectorPayload","variant","variants","isVariantModule","ThemeInjector_ThemeInjector","INJECTED_THEME_KEY","middleware_theme","icache","diffProperty","theme_factory","themeKeys","getTheme","themeInjector","themePayload","themeRegistry","setInvalidator","registerThemeInjector","subscribe","css","cachedTheme","theme_rest","currentClasses","currentTheme","classKeys","classKey","join","ROUTER_KEY","routing_Outlet","Outlet_factory","routerKey","currentRouterKey","currentHandle","matcher","outletChildren","router","currentRouteContext","getMatchedRoute","routeContextMap","getOutlet","matches","filter","vt_design_theme","@dojo/widgets/button","@dojo/widgets/header-card","@dojo/widgets/header","@dojo/widgets/menu-item","@dojo/widgets/outlined-button","@dojo/widgets/raised-button","@dojo/widgets/text-input","@dojo/widgets/label","routing_Link","Link_factory","to","isOutlet","onClick","Link_rest","linkProps","href","onclick","defaultPrevented","button","metaKey","ctrlKey","preventDefault","routing_ActiveLink","ActiveLink_factory","activeClasses","ActiveLink_rest","getRoute","isActive","linkParams","contextParams","paramsEqual","contextIsExact","middleware_theme_factory","coreTheme","uppercaseFirstChar","charAt","theme_isThemeWithVariant","middleware_theme_theme","compose","baseCss","baseKey","variantKey","virtualCss","virtualTheme","variantTheme","baseTheme","prefixedCss","prefixCss","lowercaseFirstChar","trim","constructedTheme","variantComposesClass","widgets_middleware_theme","header_factory","header_m_css","widgets_Menu","Menu_m","Text","text_m","focus_focus","focus_factory","currentElement","initialized","previous","nodeSet","onFocusChange","activeElement","_","focus","shouldFocus","Keys","middleware_focus","formatAriaProperties","aria","widgets_button","button_factory","onOut","onOver","onDown","onUp","onBlur","onFocus","themeCss","button_m_css","idBase","onblur","stopPropagation","onfocus","onpointerenter","onpointerleave","onpointerup","aria-pressed","outlined_button","outlined_button_factory","outlined_button_m_css","Buttons","buttons_m","widgets_Anderes","anderes_m","color","background","middleware_validity","validity_factory","setTimeout","validity","message","validationMessage","helper_text","themedCss","helper_text_m_css","aria-hidden","widgets_label","label_factory","forId","readOnly","label_m_css","base_m_css","for","formatAutocomplete","autocomplete","text_input_TextInput","text_input_factory","pattern","source","text_input_m_css","customValidator","labelHidden","max","maxLength","min","minLength","onKeyDown","onKeyUp","onValidate","onValue","patternValue","placeholder","step","themeProp","initialValue","validValue","_callOnValidate","previousMessage","previousValid","customValid","computedHelperText","inputFocused","isFocused","role","aria-invalid","maxlength","minlength","aria-readonly","oninput","onkeydown","which","onkeyup","addonFactory","filled","text_input","Text_input","styles_text_input_m","src_App","App_m","buttons","anderes","main_registry","routerOptions","RouterInjector_rest","registerRouterInjector","getElementById"],"mappings":"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","file":"main.e6ff041cd320df35dbee.bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"lib_vt_design\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"lib_vt_design\"] = factory();\n\telse\n\t\troot[\"lib_vt_design\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 24);\n","const globalObject: any = (function(): any {\n\t// the only reliable means to get the global object is\n\t// `Function('return this')()`\n\t// However, this causes CSP violations in Chrome apps.\n\tif (typeof window !== 'undefined' && window.navigator.userAgent.indexOf('jsdom') > -1) {\n\t\treturn window;\n\t}\n\tif (typeof globalThis !== 'undefined') {\n\t\treturn globalThis;\n\t}\n\tif (typeof self !== 'undefined') {\n\t\treturn self;\n\t}\n\tif (typeof window !== 'undefined') {\n\t\treturn window;\n\t}\n\tif (typeof global !== 'undefined') {\n\t\treturn global;\n\t}\n})();\n\nexport default globalObject;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/anderes\",\"root\":\"anderes-m__root__92fc05339ms\",\"palette\":\"anderes-m__palette__92fc05aTT2h\",\"rectangle\":\"anderes-m__rectangle__92fc052mc0J\"};","import global from '../shim/global';\n\n/**\n * The valid return types from a feature test\n */\nexport type FeatureTestResult = boolean | string | number | undefined | void;\n\n/**\n * A function that tests for a feature and returns a result\n */\nexport type FeatureTest = () => FeatureTestResult;\n\n/**\n * A cache of results of feature tests\n */\nexport const testCache: { [feature: string]: FeatureTestResult } = {};\n\n/**\n * A cache of the un-resolved feature tests\n */\nexport const testFunctions: { [feature: string]: FeatureTest } = {};\n\nexport interface StaticHasFeatures {\n\t[feature: string]: FeatureTestResult;\n}\n\nexport interface DojoHasEnvironment {\n\t/**\n\t * Static features defined in the enviornment that should be used by the `has` module\n\t * instead of run-time detection.\n\t */\n\tstaticFeatures?: StaticHasFeatures | (() => StaticHasFeatures);\n}\n\ndeclare global {\n\tinterface Window {\n\t\t/**\n\t\t * The `dojo/has` enviornment which provides configuration when the module is\n\t\t * loaded.\n\t\t */\n\t\tDojoHasEnvironment?: DojoHasEnvironment;\n\t}\n}\n\n/* Grab the staticFeatures if there are available */\nconst { staticFeatures }: DojoHasEnvironment = global.DojoHasEnvironment || {};\n\n/* Cleaning up the DojoHasEnviornment */\nif ('DojoHasEnvironment' in global) {\n\tdelete global.DojoHasEnvironment;\n}\n\n/**\n * Custom type guard to narrow the `staticFeatures` to either a map or a function that\n * returns a map.\n *\n * @param value The value to guard for\n */\nfunction isStaticFeatureFunction(value: any): value is (() => StaticHasFeatures) {\n\treturn typeof value === 'function';\n}\n\n/**\n * The cache of asserted features that were available in the global scope when the\n * module loaded\n */\nconst staticCache: StaticHasFeatures = staticFeatures\n\t? isStaticFeatureFunction(staticFeatures)\n\t\t? staticFeatures.apply(global)\n\t\t: staticFeatures\n\t: {}; /* Providing an empty cache, if none was in the environment\n\n\n/**\n * AMD plugin function.\n *\n * Resolves resourceId into a module id based on possibly-nested tenary expression that branches on has feature test\n * value(s).\n *\n * @param resourceId The id of the module\n * @param normalize Resolves a relative module id into an absolute module id\n */\nexport function normalize(resourceId: string, normalize: (moduleId: string) => string): string | null {\n\tconst tokens: RegExpMatchArray = resourceId.match(/[\\?:]|[^:\\?]*/g) || [];\n\tlet i = 0;\n\n\tfunction get(skip?: boolean): string | null {\n\t\tconst term = tokens[i++];\n\t\tif (term === ':') {\n\t\t\t// empty string module name, resolves to null\n\t\t\treturn null;\n\t\t} else {\n\t\t\t// postfixed with a ? means it is a feature to branch on, the term is the name of the feature\n\t\t\tif (tokens[i++] === '?') {\n\t\t\t\tif (!skip && has(term)) {\n\t\t\t\t\t// matched the feature, get the first value from the options\n\t\t\t\t\treturn get();\n\t\t\t\t} else {\n\t\t\t\t\t// did not match, get the second value, passing over the first\n\t\t\t\t\tget(true);\n\t\t\t\t\treturn get(skip);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// a module\n\t\t\treturn term;\n\t\t}\n\t}\n\n\tconst id = get();\n\n\treturn id && normalize(id);\n}\n\n/**\n * Check if a feature has already been registered\n *\n * @param feature the name of the feature\n */\nexport function exists(feature: string): boolean {\n\tconst normalizedFeature = feature.toLowerCase();\n\n\treturn Boolean(\n\t\tnormalizedFeature in staticCache || normalizedFeature in testCache || testFunctions[normalizedFeature]\n\t);\n}\n\n/**\n * Register a new test for a named feature.\n *\n * @example\n * has.add('dom-addeventlistener', !!document.addEventListener);\n *\n * @example\n * has.add('touch-events', function () {\n *    return 'ontouchstart' in document\n * });\n *\n * @param feature the name of the feature\n * @param value the value reported of the feature, or a function that will be executed once on first test\n * @param overwrite if an existing value should be overwritten. Defaults to false.\n */\nexport function add(feature: string, value: FeatureTest | FeatureTestResult, overwrite: boolean = false): void {\n\tconst normalizedFeature = feature.toLowerCase();\n\n\tif (exists(normalizedFeature) && !overwrite && !(normalizedFeature in staticCache)) {\n\t\tthrow new TypeError(`Feature \"${feature}\" exists and overwrite not true.`);\n\t}\n\n\tif (typeof value === 'function') {\n\t\ttestFunctions[normalizedFeature] = value;\n\t} else {\n\t\ttestCache[normalizedFeature] = value;\n\t\tdelete testFunctions[normalizedFeature];\n\t}\n}\n\n/**\n * Return the current value of a named feature.\n *\n * @param feature The name of the feature to test.\n */\nexport default function has(feature: string, strict: boolean = false): FeatureTestResult {\n\tlet result: FeatureTestResult;\n\n\tconst normalizedFeature = feature.toLowerCase();\n\n\tif (normalizedFeature in staticCache) {\n\t\tresult = staticCache[normalizedFeature];\n\t} else if (testFunctions[normalizedFeature]) {\n\t\tresult = testCache[normalizedFeature] = testFunctions[normalizedFeature].call(null);\n\t\tdelete testFunctions[normalizedFeature];\n\t} else if (normalizedFeature in testCache) {\n\t\tresult = testCache[normalizedFeature];\n\t} else if (strict) {\n\t\tthrow new TypeError(`Attempt to detect unregistered has feature \"${feature}\"`);\n\t}\n\n\treturn result;\n}\n\n/*\n * Out of the box feature tests\n */\nadd('public-path', undefined);\n\n/* flag for dojo debug, default to false */\nadd('dojo-debug', false);\n\n/* Detects if the environment is \"browser like\" */\nadd('host-browser', typeof document !== 'undefined' && typeof location !== 'undefined');\n\n/* Detects if the environment is \"jsdom\" */\nadd(\n\t'host-jsdom',\n\thas('host-browser') && typeof navigator !== 'undefined' && navigator.userAgent.indexOf('jsdom') !== -1\n);\n\n/* Detects if the environment appears to be NodeJS */\nadd('host-node', function() {\n\tif (typeof process === 'object' && process.versions && process.versions.node) {\n\t\treturn process.versions.node;\n\t}\n});\n\nadd('fetch', 'fetch' in global && typeof global.fetch === 'function', true);\n\nadd(\n\t'es6-array',\n\t() => {\n\t\treturn (\n\t\t\t['from', 'of'].every((key) => key in global.Array) &&\n\t\t\t['findIndex', 'find', 'copyWithin'].every((key) => key in global.Array.prototype)\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-array-fill',\n\t() => {\n\t\tif ('fill' in global.Array.prototype) {\n\t\t\t/* Some versions of Safari do not properly implement this */\n\t\t\treturn ([1] as any).fill(9, Number.POSITIVE_INFINITY)[0] === 1;\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd('es7-array', () => 'includes' in global.Array.prototype, true);\n\nadd('es2019-array', () => 'flat' in global.Array.prototype, true);\n\n/* Map */\nadd(\n\t'es6-map',\n\t() => {\n\t\tif (typeof global.Map === 'function') {\n\t\t\t/*\n\t\tIE11 and older versions of Safari are missing critical ES6 Map functionality\n\t\tWe wrap this in a try/catch because sometimes the Map constructor exists, but does not\n\t\ttake arguments (iOS 8.4)\n\t\t */\n\t\t\ttry {\n\t\t\t\tconst map = new global.Map([[0, 1]]);\n\n\t\t\t\treturn (\n\t\t\t\t\tmap.has(0) &&\n\t\t\t\t\ttypeof map.keys === 'function' &&\n\t\t\t\t\thas('es6-symbol') &&\n\t\t\t\t\ttypeof map.values === 'function' &&\n\t\t\t\t\ttypeof map.entries === 'function'\n\t\t\t\t);\n\t\t\t} catch (e) {\n\t\t\t\t/* istanbul ignore next: not testing on iOS at the moment */\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd('es6-iterator', () => has('es6-map'));\n\n/* Math */\nadd(\n\t'es6-math',\n\t() => {\n\t\treturn [\n\t\t\t'clz32',\n\t\t\t'sign',\n\t\t\t'log10',\n\t\t\t'log2',\n\t\t\t'log1p',\n\t\t\t'expm1',\n\t\t\t'cosh',\n\t\t\t'sinh',\n\t\t\t'tanh',\n\t\t\t'acosh',\n\t\t\t'asinh',\n\t\t\t'atanh',\n\t\t\t'trunc',\n\t\t\t'fround',\n\t\t\t'cbrt',\n\t\t\t'hypot'\n\t\t].every((name) => typeof global.Math[name] === 'function');\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-math-imul',\n\t() => {\n\t\tif ('imul' in global.Math) {\n\t\t\t/* Some versions of Safari on ios do not properly implement this */\n\t\t\treturn (Math as any).imul(0xffffffff, 5) === -5;\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Object */\nadd(\n\t'es6-object',\n\t() => {\n\t\treturn (\n\t\t\thas('es6-symbol') &&\n\t\t\t['assign', 'is', 'getOwnPropertySymbols', 'setPrototypeOf'].every(\n\t\t\t\t(name) => typeof global.Object[name] === 'function'\n\t\t\t)\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es2017-object',\n\t() => {\n\t\treturn ['values', 'entries', 'getOwnPropertyDescriptors'].every(\n\t\t\t(name) => typeof global.Object[name] === 'function'\n\t\t);\n\t},\n\ttrue\n);\n\n/* Observable */\nadd('es-observable', () => typeof global.Observable !== 'undefined', true);\n\n/* Promise */\nadd('es6-promise', () => typeof global.Promise !== 'undefined' && has('es6-symbol'), true);\n\nadd(\n\t'es2018-promise-finally',\n\t() => has('es6-promise') && typeof global.Promise.prototype.finally !== 'undefined',\n\ttrue\n);\n\n/* Set */\nadd(\n\t'es6-set',\n\t() => {\n\t\tif (typeof global.Set === 'function') {\n\t\t\t/* IE11 and older versions of Safari are missing critical ES6 Set functionality */\n\t\t\tconst set = new global.Set([1]);\n\t\t\treturn set.has(1) && 'keys' in set && typeof set.keys === 'function' && has('es6-symbol');\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* String */\nadd(\n\t'es6-string',\n\t() => {\n\t\treturn (\n\t\t\t[\n\t\t\t\t/* static methods */\n\t\t\t\t'fromCodePoint'\n\t\t\t].every((key) => typeof global.String[key] === 'function') &&\n\t\t\t[\n\t\t\t\t/* instance methods */\n\t\t\t\t'codePointAt',\n\t\t\t\t'normalize',\n\t\t\t\t'repeat',\n\t\t\t\t'startsWith',\n\t\t\t\t'endsWith',\n\t\t\t\t'includes'\n\t\t\t].every((key) => typeof global.String.prototype[key] === 'function')\n\t\t);\n\t},\n\ttrue\n);\n\nadd(\n\t'es6-string-raw',\n\t() => {\n\t\tfunction getCallSite(callSite: TemplateStringsArray, ...substitutions: any[]) {\n\t\t\tconst result = [...callSite];\n\t\t\t(result as any).raw = callSite.raw;\n\t\t\treturn result;\n\t\t}\n\n\t\tif ('raw' in global.String) {\n\t\t\tlet b = 1;\n\t\t\tlet callSite = getCallSite`a\\n${b}`;\n\n\t\t\t(callSite as any).raw = ['a\\\\n'];\n\t\t\tconst supportsTrunc = global.String.raw(callSite, 42) === 'a\\\\n';\n\n\t\t\treturn supportsTrunc;\n\t\t}\n\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd(\n\t'es2017-string',\n\t() => {\n\t\treturn ['padStart', 'padEnd'].every((key) => typeof global.String.prototype[key] === 'function');\n\t},\n\ttrue\n);\n\n/* Symbol */\nadd('es6-symbol', () => typeof global.Symbol !== 'undefined' && typeof Symbol() === 'symbol', true);\n\n/* WeakMap */\nadd(\n\t'es6-weakmap',\n\t() => {\n\t\tif (typeof global.WeakMap !== 'undefined') {\n\t\t\t/* IE11 and older versions of Safari are missing critical ES6 Map functionality */\n\t\t\tconst key1 = {};\n\t\t\tconst key2 = {};\n\t\t\tconst map = new global.WeakMap([[key1, 1]]);\n\t\t\tObject.freeze(key1);\n\t\t\treturn map.get(key1) === 1 && map.set(key2, 2) === map && has('es6-symbol');\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\n/* Miscellaneous features */\nadd('microtasks', () => has('es6-promise') || has('host-node') || has('dom-mutationobserver'), true);\nadd(\n\t'postmessage',\n\t() => {\n\t\t// If window is undefined, and we have postMessage, it probably means we're in a web worker. Web workers have\n\t\t// post message but it doesn't work how we expect it to, so it's best just to pretend it doesn't exist.\n\t\treturn typeof global.window !== 'undefined' && typeof global.postMessage === 'function';\n\t},\n\ttrue\n);\nadd('raf', () => typeof global.requestAnimationFrame === 'function', true);\nadd('setimmediate', () => typeof global.setImmediate !== 'undefined', true);\n\n/* DOM Features */\n\nadd(\n\t'dom-mutationobserver',\n\t() => {\n\t\tif (has('host-browser') && Boolean(global.MutationObserver || global.WebKitMutationObserver)) {\n\t\t\t// IE11 has an unreliable MutationObserver implementation where setProperty() does not\n\t\t\t// generate a mutation event, observers can crash, and the queue does not drain\n\t\t\t// reliably. The following feature test was adapted from\n\t\t\t// https://gist.github.com/t10ko/4aceb8c71681fdb275e33efe5e576b14\n\t\t\tconst example = document.createElement('div');\n\t\t\t/* tslint:disable-next-line:variable-name */\n\t\t\tconst HostMutationObserver = global.MutationObserver || global.WebKitMutationObserver;\n\t\t\tconst observer = new HostMutationObserver(function() {});\n\t\t\tobserver.observe(example, { attributes: true });\n\n\t\t\texample.style.setProperty('display', 'block');\n\n\t\t\treturn Boolean(observer.takeRecords().length);\n\t\t}\n\t\treturn false;\n\t},\n\ttrue\n);\n\nadd(\n\t'dom-webanimation',\n\t() => has('host-browser') && global.Animation !== undefined && global.KeyframeEffect !== undefined,\n\ttrue\n);\n\nadd('abort-controller', () => typeof global.AbortController !== 'undefined');\n\nadd('abort-signal', () => typeof global.AbortSignal !== 'undefined');\n\nadd('dom-intersection-observer', () => has('host-browser') && global.IntersectionObserver !== undefined, true);\n\nadd('dom-resize-observer', () => has('host-browser') && global.ResizeObserver !== undefined, true);\n\nadd('dom-pointer-events', () => has('host-browser') && global.onpointerdown !== undefined, true);\n\nadd(\n\t'dom-css-variables',\n\t() =>\n\t\thas('host-browser') &&\n\t\t!has('host-jsdom') &&\n\t\tglobal.window.CSS &&\n\t\tglobal.window.CSS.supports &&\n\t\tglobal.window.CSS.supports('(--a: 0)'),\n\ttrue\n);\n\nadd('dom-inert', () => has('host-browser') && Element.prototype.hasOwnProperty('inert'), true);\n\nadd('build-elide', false);\n\nadd('test', false);\n\nadd('global-this', () => typeof global.globalThis !== 'undefined');\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/Menu\",\"root\":\"Menu-m__root__92fc051So0I\",\"link\":\"Menu-m__link__92fc05rC9Fd\",\"selected\":\"Menu-m__selected__92fc052Mg6q\"};","import { Thenable } from './interfaces';\nimport global from './global';\n`!has('microtasks')`;\nimport { queueMicroTask } from './support/queue';\n`!has('es6-symbol')`;\nimport './Symbol';\nimport has from '../core/has';\n\n/**\n * Executor is the interface for functions used to initialize a Promise.\n */\nexport interface Executor<T> {\n\t/**\n\t * The executor for the promise\n\t *\n\t * @param resolve The resolver callback of the promise\n\t * @param reject The rejector callback of the promise\n\t */\n\t(resolve: (value?: T | PromiseLike<T>) => void, reject: (reason?: any) => void): void;\n}\n\ndeclare global {\n\tinterface Promise<T> {\n\t\tfinally(onfinally?: (() => void) | undefined | null): Promise<T>;\n\t}\n}\n\nexport let ShimPromise: typeof Promise = global.Promise;\n\nexport const isThenable = function isThenable<T>(value: any): value is PromiseLike<T> {\n\treturn value && typeof value.then === 'function';\n};\n\nif (!has('es6-promise')) {\n\tconst enum State {\n\t\tFulfilled,\n\t\tPending,\n\t\tRejected\n\t}\n\n\tglobal.Promise = ShimPromise = class Promise<T> implements Thenable<T> {\n\t\tstatic all(iterable: Iterable<any | PromiseLike<any>> | (any | PromiseLike<any>)[]): Promise<any> {\n\t\t\treturn new this(function(resolve, reject) {\n\t\t\t\tconst values: any[] = [];\n\t\t\t\tlet complete = 0;\n\t\t\t\tlet total = 0;\n\t\t\t\tlet populating = true;\n\n\t\t\t\tfunction fulfill(index: number, value: any): void {\n\t\t\t\t\tvalues[index] = value;\n\t\t\t\t\t++complete;\n\t\t\t\t\tfinish();\n\t\t\t\t}\n\n\t\t\t\tfunction finish(): void {\n\t\t\t\t\tif (populating || complete < total) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tresolve(values);\n\t\t\t\t}\n\n\t\t\t\tfunction processItem(index: number, item: any): void {\n\t\t\t\t\t++total;\n\t\t\t\t\tif (isThenable(item)) {\n\t\t\t\t\t\t// If an item Promise rejects, this Promise is immediately rejected with the item\n\t\t\t\t\t\t// Promise's rejection error.\n\t\t\t\t\t\titem.then(fulfill.bind(null, index), reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tPromise.resolve(item).then(fulfill.bind(null, index));\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet i = 0;\n\t\t\t\tfor (const value of iterable) {\n\t\t\t\t\tprocessItem(i, value);\n\t\t\t\t\ti++;\n\t\t\t\t}\n\t\t\t\tpopulating = false;\n\n\t\t\t\tfinish();\n\t\t\t});\n\t\t}\n\n\t\tstatic race<T>(iterable: Iterable<T | PromiseLike<T>> | (T | PromiseLike<T>)[]): Promise<T[]> {\n\t\t\treturn new this(function(resolve: (value?: any) => void, reject) {\n\t\t\t\tfor (const item of iterable) {\n\t\t\t\t\tif (item instanceof Promise) {\n\t\t\t\t\t\t// If a Promise item rejects, this Promise is immediately rejected with the item\n\t\t\t\t\t\t// Promise's rejection error.\n\t\t\t\t\t\titem.then(resolve, reject);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tPromise.resolve(item).then(resolve);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tstatic reject(reason?: any): Promise<never> {\n\t\t\treturn new this(function(resolve, reject) {\n\t\t\t\treject(reason);\n\t\t\t});\n\t\t}\n\n\t\tstatic resolve(): Promise<void>;\n\t\tstatic resolve<T>(value: T | PromiseLike<T>): Promise<T>;\n\t\tstatic resolve<T>(value?: any): Promise<T> {\n\t\t\treturn new this(function(resolve) {\n\t\t\t\tresolve(<T>value);\n\t\t\t});\n\t\t}\n\n\t\tstatic [Symbol.species]: PromiseConstructor = ShimPromise as PromiseConstructor;\n\n\t\t/**\n\t\t * Creates a new Promise.\n\t\t *\n\t\t * @constructor\n\t\t *\n\t\t * @param executor\n\t\t * The executor function is called immediately when the Promise is instantiated. It is responsible for\n\t\t * starting the asynchronous operation when it is invoked.\n\t\t *\n\t\t * The executor must call either the passed `resolve` function when the asynchronous operation has completed\n\t\t * successfully, or the `reject` function when the operation fails.\n\t\t */\n\t\tconstructor(executor: Executor<T>) {\n\t\t\t/**\n\t\t\t * If true, the resolution of this promise is chained (\"locked in\") to another promise.\n\t\t\t */\n\t\t\tlet isChained = false;\n\n\t\t\t/**\n\t\t\t * Whether or not this promise is in a resolved state.\n\t\t\t */\n\t\t\tconst isResolved = (): boolean => {\n\t\t\t\treturn this.state !== State.Pending || isChained;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Callbacks that should be invoked once the asynchronous operation has completed.\n\t\t\t */\n\t\t\tlet callbacks: null | (Array<() => void>) = [];\n\n\t\t\t/**\n\t\t\t * Initially pushes callbacks onto a queue for execution once this promise settles. After the promise settles,\n\t\t\t * enqueues callbacks for execution on the next event loop turn.\n\t\t\t */\n\t\t\tlet whenFinished = function(callback: () => void): void {\n\t\t\t\tif (callbacks) {\n\t\t\t\t\tcallbacks.push(callback);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Settles this promise.\n\t\t\t *\n\t\t\t * @param newState The resolved state for this promise.\n\t\t\t * @param {T|any} value The resolved value for this promise.\n\t\t\t */\n\t\t\tconst settle = (newState: State, value: any): void => {\n\t\t\t\t// A promise can only be settled once.\n\t\t\t\tif (this.state !== State.Pending) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.state = newState;\n\t\t\t\tthis.resolvedValue = value;\n\t\t\t\twhenFinished = queueMicroTask;\n\n\t\t\t\t// Only enqueue a callback runner if there are callbacks so that initially fulfilled Promises don't have to\n\t\t\t\t// wait an extra turn.\n\t\t\t\tif (callbacks && callbacks.length > 0) {\n\t\t\t\t\tqueueMicroTask(function(): void {\n\t\t\t\t\t\tif (callbacks) {\n\t\t\t\t\t\t\tlet count = callbacks.length;\n\t\t\t\t\t\t\tfor (let i = 0; i < count; ++i) {\n\t\t\t\t\t\t\t\tcallbacks[i].call(null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tcallbacks = null;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Resolves this promise.\n\t\t\t *\n\t\t\t * @param newState The resolved state for this promise.\n\t\t\t * @param {T|any} value The resolved value for this promise.\n\t\t\t */\n\t\t\tconst resolve = (newState: State, value: any): void => {\n\t\t\t\tif (isResolved()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (isThenable(value)) {\n\t\t\t\t\tvalue.then(settle.bind(null, State.Fulfilled), settle.bind(null, State.Rejected));\n\t\t\t\t\tisChained = true;\n\t\t\t\t} else {\n\t\t\t\t\tsettle(newState, value);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.then = <TResult1 = T, TResult2 = never>(\n\t\t\t\tonFulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n\t\t\t\tonRejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null\n\t\t\t): Promise<TResult1 | TResult2> => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t// whenFinished initially queues up callbacks for execution after the promise has settled. Once the\n\t\t\t\t\t// promise has settled, whenFinished will schedule callbacks for execution on the next turn through the\n\t\t\t\t\t// event loop.\n\t\t\t\t\twhenFinished(() => {\n\t\t\t\t\t\tconst callback: ((value?: any) => any) | undefined | null =\n\t\t\t\t\t\t\tthis.state === State.Rejected ? onRejected : onFulfilled;\n\n\t\t\t\t\t\tif (typeof callback === 'function') {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tresolve(callback(this.resolvedValue));\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (this.state === State.Rejected) {\n\t\t\t\t\t\t\treject(this.resolvedValue);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve(this.resolvedValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\texecutor(resolve.bind(null, State.Fulfilled), resolve.bind(null, State.Rejected));\n\t\t\t} catch (error) {\n\t\t\t\tsettle(State.Rejected, error);\n\t\t\t}\n\t\t}\n\n\t\tcatch<TResult = never>(\n\t\t\tonRejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null\n\t\t): Promise<T | TResult> {\n\t\t\treturn this.then(undefined, onRejected);\n\t\t}\n\n\t\t/**\n\t\t * The current state of this promise.\n\t\t */\n\t\tprivate state = State.Pending;\n\n\t\t/**\n\t\t * The resolved value for this promise.\n\t\t *\n\t\t * @type {T|any}\n\t\t */\n\t\tprivate resolvedValue: any;\n\n\t\tthen: <TResult1 = T, TResult2 = never>(\n\t\t\tonfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null,\n\t\t\tonrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null\n\t\t) => Promise<TResult1 | TResult2>;\n\n\t\t[Symbol.toStringTag]: 'Promise' = 'Promise';\n\t} as any;\n\t// this cast is needed in order to omit finally in the class declaration; this was done so the finally code\n\t// is not duplicated and always added in the conditional below\n}\n\nif (!has('es2018-promise-finally')) {\n\tglobal.Promise.prototype.finally = function<T>(\n\t\tthis: Promise<T>,\n\t\tonFinally: (() => any) | undefined | null\n\t): Promise<any> {\n\t\treturn this.then(\n\t\t\tonFinally && ((value: T) => Promise.resolve(onFinally()).then(() => value)),\n\t\t\tonFinally &&\n\t\t\t\t((reason: any) =>\n\t\t\t\t\tPromise.resolve(onFinally()).then(() => {\n\t\t\t\t\t\tthrow reason;\n\t\t\t\t\t}))\n\t\t);\n\t};\n}\n\nexport default ShimPromise;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/buttons\",\"root\":\"buttons-m__root__92fc0524om3\",\"center\":\"buttons-m__center__92fc052V4TO\",\"untertitel\":\"buttons-m__untertitel__92fc051tszi\"};","require('C:/Users/Nikolai/Documents/GitHub/design/node_modules/@dojo/widgets/theme/default/button.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/button\",\"root\":\"button-m__root__wCywK\",\"pressed\":\"button-m__pressed__2zyjz\",\"popup\":\"button-m__popup__2Fl0t\",\"disabled\":\"button-m__disabled__19w7M\",\"label\":\"button-m__label__3hxN8\"};;","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/text-input\",\"root\":\"text-input-m__root__92fc051TfFn\",\"wrapper\":\"text-input-m__wrapper__92fc052T80g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/text\",\"root\":\"text-m__root__92fc0536Nc7\",\"text\":\"text-m__text__92fc053YbBS\"};","require('C:/Users/Nikolai/Documents/GitHub/design/node_modules/@dojo/widgets/theme/default/text-input.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/text-input\",\"input\":\"text-input-m__input__3AObE\",\"root\":\"text-input-m__root__1eiQw\",\"wrapper\":\"text-input-m__wrapper__3sXSt\",\"inputWrapper\":\"text-input-m__inputWrapper__3Usth\",\"inputWrapperFocused\":\"text-input-m__inputWrapperFocused__OjF-_\",\"disabled\":\"text-input-m__disabled__1U733\",\"focused\":\"text-input-m__focused__1nmLV\",\"readonly\":\"text-input-m__readonly__INN_p\",\"required\":\"text-input-m__required__2pLE4\",\"invalid\":\"text-input-m__invalid__12hBo\",\"addonRoot\":\"text-input-m__addonRoot__21n_v\",\"addonFilled\":\"text-input-m__addonFilled__azpzz\",\"hasLeading\":\"text-input-m__hasLeading__1vNgP\",\"hasTrailing\":\"text-input-m__hasTrailing__1levI\",\"noLabel\":\"text-input-m__noLabel__3dEz1\",\"label\":\"text-input-m__label__2oAFG\",\"helperText\":\"text-input-m__helperText__1hpcr\",\"valid\":\"text-input-m__valid__1LmDm\"};;","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/button\",\"root\":\"button-m__root__92fc0520wL9\",\"pressed\":\"button-m__pressed__92fc05ipL0E\",\"popup\":\"button-m__popup__92fc053SC8_\",\"disabled\":\"button-m__disabled__92fc0515ucm\",\"label\":\"button-m__label__92fc05lDe3x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/header-card\",\"header\":\"header-card-m__header__92fc05tps54\",\"headerContent\":\"header-card-m__headerContent__92fc051QoxQ\",\"avatar\":\"header-card-m__avatar__92fc051OyrF\",\"title\":\"header-card-m__title__92fc052aWh4\",\"subtitle\":\"header-card-m__subtitle__92fc053TYen\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/header\",\"root\":\"header-m__root__92fc051lnnL\",\"row\":\"header-m__row__92fc053Ypji\",\"primary\":\"header-m__primary__92fc05CDRGK\",\"secondary\":\"header-m__secondary__92fc051puxi\",\"sticky\":\"header-m__sticky__92fc052Ovho\",\"leading\":\"header-m__leading__92fc051NV43\",\"title\":\"header-m__title__92fc05JAdwW\",\"actions\":\"header-m__actions__92fc052MEPx\",\"action\":\"header-m__action__92fc05jG5vz\",\"trailing\":\"header-m__trailing__92fc05Pu-Q1\",\"spacer\":\"header-m__spacer__92fc053NxCO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/menu-item\",\"root\":\"menu-item-m__root__92fc051k0SO\",\"active\":\"menu-item-m__active__92fc053RvRY\",\"disabled\":\"menu-item-m__disabled__92fc051OiO4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/outlined-button\",\"root\":\"outlined-button-m__root__92fc051eAcN button-m__root__92fc0520wL9\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/raised-button\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/text-input\",\"input\":\"text-input-m__input__92fc056zBL5\",\"root\":\"text-input-m__root__92fc051KLjq\",\"wrapper\":\"text-input-m__wrapper__92fc053YK-i\",\"inputWrapper\":\"text-input-m__inputWrapper__92fc052x9vk\",\"inputWrapperFocused\":\"text-input-m__inputWrapperFocused__92fc0535n_t\",\"disabled\":\"text-input-m__disabled__92fc05paGTG\",\"focused\":\"text-input-m__focused__92fc052M9ZV\",\"readonly\":\"text-input-m__readonly__92fc053H4LW\",\"required\":\"text-input-m__required__92fc05158W0\",\"invalid\":\"text-input-m__invalid__92fc0532Sp-\",\"addonRoot\":\"text-input-m__addonRoot__92fc051N8Nn\",\"addonFilled\":\"text-input-m__addonFilled__92fc0524-GQ\",\"hasLeading\":\"text-input-m__hasLeading__92fc05RM1Z0\",\"hasTrailing\":\"text-input-m__hasTrailing__92fc053VxRK\",\"noLabel\":\"text-input-m__noLabel__92fc0532dSm\",\"label\":\"text-input-m__label__92fc05F8rbr\",\"helperText\":\"text-input-m__helperText__92fc052gdpg\",\"valid\":\"text-input-m__valid__92fc052psyu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/label\",\"root\":\"label-m__root__92fc052LrcQ\",\"readonly\":\"label-m__readonly__92fc05kYZLt\",\"invalid\":\"label-m__invalid__92fc0523kz4\",\"valid\":\"label-m__valid__92fc05pMhRX\",\"required\":\"label-m__required__92fc052SQNX\",\"disabled\":\"label-m__disabled__92fc051q0Sj\",\"focused\":\"label-m__focused__92fc053OZYa\",\"secondary\":\"label-m__secondary__92fc053Q0Bh\",\"active\":\"label-m__active__92fc05VwP8V\"};","require('C:/Users/Nikolai/Documents/GitHub/design/node_modules/@dojo/widgets/theme/default/header.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/header\",\"root\":\"header-m__root__1Wu1d\",\"row\":\"header-m__row__3e0zv\",\"primary\":\"header-m__primary__2eL4c\",\"secondary\":\"header-m__secondary__keWQu\",\"sticky\":\"header-m__sticky__3Rxub\",\"leading\":\"header-m__leading__EGBZf\",\"title\":\"header-m__title__3AvG7\",\"actions\":\"header-m__actions__3MCfn\",\"action\":\"header-m__action__1tpKL\",\"trailing\":\"header-m__trailing__1qern\",\"spacer\":\"header-m__spacer__3HogK\"};;","require('C:/Users/Nikolai/Documents/GitHub/design/node_modules/@dojo/widgets/theme/default/outlined-button.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/outlined-button\"};;","require('C:/Users/Nikolai/Documents/GitHub/design/node_modules/@dojo/widgets/theme/default/helper-text.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/helper-text\",\"root\":\"helper-text-m__root__3s_po\",\"text\":\"helper-text-m__text__dNGJX\",\"valid\":\"helper-text-m__valid__18VWN\",\"invalid\":\"helper-text-m__invalid__1CrCV\"};;","require('C:/Users/Nikolai/Documents/GitHub/design/node_modules/@dojo/widgets/common/styles/base.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/base\",\"visuallyHidden\":\"base-m__visuallyHidden__1AeWe\",\"focusable\":\"base-m__focusable__1_qAN\",\"hidden\":\"base-m__hidden__3QddU\"};;","require('C:/Users/Nikolai/Documents/GitHub/design/node_modules/@dojo/widgets/theme/default/label.m.css');\nmodule.exports = {\" _key\":\"@dojo/widgets/label\",\"root\":\"label-m__root__3Kk7r\",\"readonly\":\"label-m__readonly__2pxUq\",\"invalid\":\"label-m__invalid__1CZyi\",\"valid\":\"label-m__valid__2hdFV\",\"required\":\"label-m__required__2WVo7\",\"disabled\":\"label-m__disabled__34MEb\",\"focused\":\"label-m__focused__ISy0H\",\"secondary\":\"label-m__secondary__37QWK\",\"active\":\"label-m__active__3MoIi\"};;","// extracted by mini-css-extract-plugin\nmodule.exports = {\" _key\":\"vt-design/App\",\"root\":\"App-m__root__92fc051d1Ad\"};","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var has = require('@dojo/framework/core/has');\r\nrequire('./common');\r\nrequire('../cldr/bootstrapSync');\r\n\r\nif (has.default('build-serve')) // has('dojo-debug')\r\n// elided: import 'eventsource-polyfill'\r\n// has('dojo-debug')\r\n// elided: import '../webpack-hot-client/client'\r\n{}\r\n\r\nrequire('../build-time-render/blocks-sync');\r\n","var has = require('@dojo/framework/core/has');\r\nvar global = require('@dojo/framework/shim/global');\r\n\r\nif (!global.default[__DOJO_SCOPE]) {\r\n\tglobal.default[__DOJO_SCOPE] = {};\r\n}\r\n\r\nif (!has.exists('build-time-render')) {\r\n\thas.add('build-time-render', false, false);\r\n}\r\n\r\nif (!has.exists('build-serve')) {\r\n\thas.add('build-serve', false, false);\r\n}\r\n\r\nvar appBase = global.default[__DOJO_SCOPE].base ? global.default[__DOJO_SCOPE].base : global.default.__app_base__;\r\n\r\nvar initialPublicPath = global.default[__DOJO_SCOPE].publicPath\r\n\t? global.default[__DOJO_SCOPE].publicPath\r\n\t: global.default.__public_path__;\r\n\r\nvar initialPublicOrigin = global.default[__DOJO_SCOPE].publicOrigin\r\n\t? global.default[__DOJO_SCOPE].publicOrigin\r\n\t: global.default.__public_origin__;\r\n\r\nhas.add('app-base', appBase || '/', true);\r\n\r\nif (initialPublicPath || initialPublicOrigin) {\r\n\tvar publicPath = initialPublicOrigin || window.location.origin;\r\n\tif (initialPublicPath) {\r\n\t\tpublicPath = publicPath + initialPublicPath;\r\n\t\thas.add('public-path', initialPublicPath, true);\r\n\t}\r\n\t__webpack_public_path__ = publicPath;\r\n}\r\n","export default {};\n","window.blockCacheEntry = function (modulePath, args, content) {\n    window.__dojoBuildBridgeCache = window.__dojoBuildBridgeCache || {};\n    window.__dojoBuildBridgeCache[modulePath] = window.__dojoBuildBridgeCache[modulePath] || {};\n    window.__dojoBuildBridgeCache[modulePath][args] = function() {\n        return content;\n    }\n};\n/** @preserve APPEND_BLOCK_CACHE_ENTRY **/ \n","import global from './global';\n`!has('es6-iterator')`;\nimport { isArrayLike, Iterable } from './iterator';\nimport has from '../core/has';\n`!has('es6-symbol')`;\nimport './Symbol';\n\nexport interface WeakMap<K extends object, V> {\n\t/**\n\t * Remove a `key` from the map\n\t *\n\t * @param key The key to remove\n\t * @return `true` if the value was removed, otherwise `false`\n\t */\n\tdelete(key: K): boolean;\n\n\t/**\n\t * Retrieve the value, based on the supplied `key`\n\t *\n\t * @param key The key to retrieve the `value` for\n\t * @return the `value` based on the `key` if found, otherwise `false`\n\t */\n\tget(key: K): V | undefined;\n\n\t/**\n\t * Determines if a `key` is present in the map\n\t *\n\t * @param key The `key` to check\n\t * @return `true` if the key is part of the map, otherwise `false`.\n\t */\n\thas(key: K): boolean;\n\n\t/**\n\t * Set a `value` for a particular `key`.\n\t *\n\t * @param key The `key` to set the `value` for\n\t * @param value The `value` to set\n\t * @return the instances\n\t */\n\tset(key: K, value: V): this;\n\n\treadonly [Symbol.toStringTag]: 'WeakMap';\n}\n\nexport interface WeakMapConstructor {\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t */\n\tnew (): WeakMap<object, any>;\n\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t *\n\t * @param iterable An iterable that contains yields up key/value pair entries\n\t */\n\tnew <K extends object, V>(iterable?: [K, V][]): WeakMap<K, V>;\n\n\t/**\n\t * Create a new instance of a `WeakMap`\n\t *\n\t * @constructor\n\t *\n\t * @param iterable An iterable that contains yields up key/value pair entries\n\t */\n\tnew <K extends object, V>(iterable: Iterable<[K, V]>): WeakMap<K, V>;\n\n\treadonly prototype: WeakMap<object, any>;\n}\n\nexport let WeakMap: WeakMapConstructor = global.WeakMap;\n\ninterface Entry<K, V> {\n\tkey: K;\n\tvalue: V;\n}\n\nif (!has('es6-weakmap')) {\n\tconst DELETED: any = {};\n\n\tconst getUID = function getUID(): number {\n\t\treturn Math.floor(Math.random() * 100000000);\n\t};\n\n\tconst generateName = (function() {\n\t\tlet startId = Math.floor(Date.now() % 100000000);\n\n\t\treturn function generateName(): string {\n\t\t\treturn '__wm' + getUID() + (startId++ + '__');\n\t\t};\n\t})();\n\n\tWeakMap = global.WeakMap = class WeakMap<K, V> {\n\t\tprivate readonly _name: string;\n\t\tprivate readonly _frozenEntries: Entry<K, V>[];\n\n\t\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {\n\t\t\tthis._name = generateName();\n\n\t\t\tthis._frozenEntries = [];\n\n\t\t\tif (iterable) {\n\t\t\t\tif (isArrayLike(iterable)) {\n\t\t\t\t\tfor (let i = 0; i < iterable.length; i++) {\n\t\t\t\t\t\tconst item = iterable[i];\n\t\t\t\t\t\tthis.set(item[0], item[1]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (const [key, value] of iterable) {\n\t\t\t\t\t\tthis.set(key, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate _getFrozenEntryIndex(key: any): number {\n\t\t\tfor (let i = 0; i < this._frozenEntries.length; i++) {\n\t\t\t\tif (this._frozenEntries[i].key === key) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn -1;\n\t\t}\n\n\t\tdelete(key: any): boolean {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (entry && entry.key === key && entry.value !== DELETED) {\n\t\t\t\tentry.value = DELETED;\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\tthis._frozenEntries.splice(frozenIndex, 1);\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tget(key: any): V | undefined {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (entry && entry.key === key && entry.value !== DELETED) {\n\t\t\t\treturn entry.value;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\treturn this._frozenEntries[frozenIndex].value;\n\t\t\t}\n\t\t}\n\n\t\thas(key: any): boolean {\n\t\t\tif (key === undefined || key === null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst entry: Entry<K, V> = key[this._name];\n\t\t\tif (Boolean(entry && entry.key === key && entry.value !== DELETED)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tconst frozenIndex = this._getFrozenEntryIndex(key);\n\t\t\tif (frozenIndex >= 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tset(key: any, value?: any): this {\n\t\t\tif (!key || (typeof key !== 'object' && typeof key !== 'function')) {\n\t\t\t\tthrow new TypeError('Invalid value used as weak map key');\n\t\t\t}\n\t\t\tlet entry: Entry<K, V> = key[this._name];\n\t\t\tif (!entry || entry.key !== key) {\n\t\t\t\tentry = Object.create(null, {\n\t\t\t\t\tkey: { value: key }\n\t\t\t\t});\n\n\t\t\t\tif (Object.isFrozen(key)) {\n\t\t\t\t\tthis._frozenEntries.push(entry);\n\t\t\t\t} else {\n\t\t\t\t\tObject.defineProperty(key, this._name, {\n\t\t\t\t\t\tvalue: entry\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tentry.value = value;\n\t\t\treturn this;\n\t\t}\n\n\t\t[Symbol.toStringTag]: 'WeakMap' = 'WeakMap';\n\t};\n}\n\nexport default WeakMap;\n","import global from './global';\n`!has('es6-iterator')`;\nimport { isArrayLike, Iterable, IterableIterator, ShimIterator } from './iterator';\nimport has from '../core/has';\n`!has('es6-symbol')`;\nimport './Symbol';\n\nexport interface Set<T> {\n\t/**\n\t * Adds a `value` to the `Set`\n\t *\n\t * @param value The value to add to the set\n\t * @returns The instance of the `Set`\n\t */\n\tadd(value: T): this;\n\n\t/**\n\t * Removes all the values from the `Set`.\n\t */\n\tclear(): void;\n\n\t/**\n\t * Removes a `value` from the set\n\t *\n\t * @param value The value to be removed\n\t * @returns `true` if the value was removed\n\t */\n\tdelete(value: T): boolean;\n\n\t/**\n\t * Returns an iterator that yields each entry.\n\t *\n\t * @return An iterator for each key/value pair in the instance.\n\t */\n\tentries(): IterableIterator<[T, T]>;\n\n\t/**\n\t * Executes a given function for each set entry. The function\n\t * is invoked with three arguments: the element value, the\n\t * element key, and the associated `Set` instance.\n\t *\n\t * @param callbackfn The function to execute for each map entry,\n\t * @param thisArg The value to use for `this` for each execution of the calback\n\t */\n\tforEach(callbackfn: (value: T, value2: T, set: Set<T>) => void, thisArg?: any): void;\n\n\t/**\n\t * Identifies if a value is part of the set.\n\t *\n\t * @param value The value to check\n\t * @returns `true` if the value is part of the set otherwise `false`\n\t */\n\thas(value: T): boolean;\n\n\t/**\n\t * Despite its name, returns an iterable of the values in the set,\n\t */\n\tkeys(): IterableIterator<T>;\n\n\t/**\n\t * Returns the number of values in the `Set`.\n\t */\n\treadonly size: number;\n\n\t/**\n\t * Returns an iterable of values in the set.\n\t */\n\tvalues(): IterableIterator<T>;\n\n\t/** Iterates over values in the set. */\n\t[Symbol.iterator](): IterableIterator<T>;\n\n\treadonly [Symbol.toStringTag]: 'Set';\n}\n\nexport interface SetConstructor {\n\t/**\n\t * Creates a new Set\n\t *\n\t * @constructor\n\t */\n\tnew (): Set<any>;\n\n\t/**\n\t * Creates a new Set\n\t *\n\t * @constructor\n\t *\n\t * @param iterator The iterable structure to initialize the set with\n\t */\n\tnew <T>(iterator?: T[]): Set<T>;\n\n\t/**\n\t * Creates a new Set\n\t *\n\t * @constructor\n\t *\n\t * @param iterator The iterable structure to initialize the set with\n\t */\n\tnew <T>(iterator: Iterable<T>): Set<T>;\n\n\treadonly prototype: Set<any>;\n}\n\nexport let Set: SetConstructor = global.Set;\n\nif (!has('es6-set')) {\n\tSet = global.Set = class Set<T> {\n\t\tprivate readonly _setData: T[] = [];\n\n\t\tstatic [Symbol.species] = Set;\n\n\t\tconstructor(iterable?: ArrayLike<T> | Iterable<T>) {\n\t\t\tif (iterable) {\n\t\t\t\tif (isArrayLike(iterable)) {\n\t\t\t\t\tfor (let i = 0; i < iterable.length; i++) {\n\t\t\t\t\t\tthis.add(iterable[i]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (const value of iterable) {\n\t\t\t\t\t\tthis.add(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tadd(value: T): this {\n\t\t\tif (this.has(value)) {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t\tthis._setData.push(value);\n\t\t\treturn this;\n\t\t}\n\n\t\tclear(): void {\n\t\t\tthis._setData.length = 0;\n\t\t}\n\n\t\tdelete(value: T): boolean {\n\t\t\tconst idx = this._setData.indexOf(value);\n\t\t\tif (idx === -1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._setData.splice(idx, 1);\n\t\t\treturn true;\n\t\t}\n\n\t\tentries(): IterableIterator<[T, T]> {\n\t\t\treturn new ShimIterator<[any, any]>(this._setData.map<[any, any]>((value) => [value, value]));\n\t\t}\n\n\t\tforEach(callbackfn: (value: T, index: T, set: Set<T>) => void, thisArg?: any): void {\n\t\t\tconst iterator = this.values();\n\t\t\tlet result = iterator.next();\n\t\t\twhile (!result.done) {\n\t\t\t\tcallbackfn.call(thisArg, result.value, result.value, this);\n\t\t\t\tresult = iterator.next();\n\t\t\t}\n\t\t}\n\n\t\thas(value: T): boolean {\n\t\t\treturn this._setData.indexOf(value) > -1;\n\t\t}\n\n\t\tkeys(): IterableIterator<T> {\n\t\t\treturn new ShimIterator(this._setData);\n\t\t}\n\n\t\tget size(): number {\n\t\t\treturn this._setData.length;\n\t\t}\n\n\t\tvalues(): IterableIterator<T> {\n\t\t\treturn new ShimIterator(this._setData);\n\t\t}\n\n\t\t[Symbol.iterator](): IterableIterator<T> {\n\t\t\treturn new ShimIterator(this._setData);\n\t\t}\n\n\t\t[Symbol.toStringTag]: 'Set' = 'Set';\n\t};\n}\n\nexport default Set;\n","import has from '../core/has';\n\nexport interface ObjectAssign {\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source The source object from which to copy properties.\n\t */\n\t<T, U>(target: T, source: U): T & U;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source1 The first source object from which to copy properties.\n\t * @param source2 The second source object from which to copy properties.\n\t */\n\t<T, U, V>(target: T, source1: U, source2: V): T & U & V;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param source1 The first source object from which to copy properties.\n\t * @param source2 The second source object from which to copy properties.\n\t * @param source3 The third source object from which to copy properties.\n\t */\n\t<T, U, V, W>(target: T, source1: U, source2: V, source3: W): T & U & V & W;\n\n\t/**\n\t * Copy the values of all of the enumerable own properties from one or more source objects to a\n\t * target object. Returns the target object.\n\t * @param target The target object to copy to.\n\t * @param sources One or more source objects from which to copy properties\n\t */\n\t(target: object, ...sources: any[]): any;\n}\n\nexport interface ObjectEnteries {\n\t/**\n\t * Returns an array of key/values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t<T extends { [key: string]: any }, K extends keyof T>(o: T): [keyof T, T[K]][];\n\n\t/**\n\t * Returns an array of key/values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t(o: object): [string, any][];\n}\n\nexport interface ObjectGetOwnPropertyDescriptors {\n\t<T>(o: T): { [K in keyof T]: PropertyDescriptor };\n\t(o: any): { [key: string]: PropertyDescriptor };\n}\n\nexport interface ObjectValues {\n\t/**\n\t * Returns an array of values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t<T>(o: { [s: string]: T }): T[];\n\n\t/**\n\t * Returns an array of values of the enumerable properties of an object\n\t * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n\t */\n\t(o: object): any[];\n}\n\nexport let assign: ObjectAssign;\n\n/**\n * Gets the own property descriptor of the specified object.\n * An own property descriptor is one that is defined directly on the object and is not\n * inherited from the object's prototype.\n * @param o Object that contains the property.\n * @param p Name of the property.\n */\nexport let getOwnPropertyDescriptor: <T, K extends keyof T>(o: T, propertyKey: K) => PropertyDescriptor | undefined;\n\n/**\n * Returns the names of the own properties of an object. The own properties of an object are those that are defined directly\n * on that object, and are not inherited from the object's prototype. The properties of an object include both fields (objects) and functions.\n * @param o Object that contains the own properties.\n */\nexport let getOwnPropertyNames: (o: any) => string[];\n\n/**\n * Returns an array of all symbol properties found directly on object o.\n * @param o Object to retrieve the symbols from.\n */\nexport let getOwnPropertySymbols: (o: any) => symbol[];\n\n/**\n * Returns true if the values are the same value, false otherwise.\n * @param value1 The first value.\n * @param value2 The second value.\n */\nexport let is: (value1: any, value2: any) => boolean;\n\n/**\n * Returns the names of the enumerable properties and methods of an object.\n * @param o Object that contains the properties and methods. This can be an object that you created or an existing Document Object Model (DOM) object.\n */\nexport let keys: (o: object) => string[];\n\n/* ES7 Object static methods */\n\nexport let getOwnPropertyDescriptors: ObjectGetOwnPropertyDescriptors;\n\nexport let entries: ObjectEnteries;\n\nexport let values: ObjectValues;\n\nif (!has('es6-object')) {\n\tconst keys = Object.keys.bind(Object);\n\tObject.keys = function symbolAwareKeys(o: object): string[] {\n\t\treturn keys(o).filter((key) => !Boolean(key.match(/^@@.+/)));\n\t};\n\n\tObject.assign = function assign(target: any, ...sources: any[]) {\n\t\tif (target == null) {\n\t\t\t// TypeError if undefined or null\n\t\t\tthrow new TypeError('Cannot convert undefined or null to object');\n\t\t}\n\n\t\tconst to = Object(target);\n\t\tsources.forEach((nextSource) => {\n\t\t\tif (nextSource) {\n\t\t\t\t// Skip over if undefined or null\n\t\t\t\tkeys(nextSource).forEach((nextKey) => {\n\t\t\t\t\tto[nextKey] = nextSource[nextKey];\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn to;\n\t};\n\n\tconst getOwnPropertyNames = Object.getOwnPropertyNames.bind(Object);\n\tObject.getOwnPropertyNames = function symbolAwareGetOwnPropertyNames(o: any): string[] {\n\t\treturn getOwnPropertyNames(o).filter((key) => !Boolean(key.match(/^@@.+/)));\n\t};\n\n\tObject.getOwnPropertySymbols = function getOwnPropertySymbols(o: any): symbol[] {\n\t\treturn getOwnPropertyNames(o)\n\t\t\t.filter((key) => Boolean(key.match(/^@@.+/)))\n\t\t\t.map((key) => Symbol.for(key.substring(2)));\n\t};\n\n\tObject.is = function is(value1: any, value2: any): boolean {\n\t\tif (value1 === value2) {\n\t\t\treturn value1 !== 0 || 1 / value1 === 1 / value2; // -0\n\t\t}\n\t\treturn value1 !== value1 && value2 !== value2; // NaN\n\t};\n}\n\nif (!has('es2017-object')) {\n\tObject.getOwnPropertyDescriptors = function getOwnPropertyDescriptors<T>(\n\t\to: T\n\t): { [P in keyof T]: TypedPropertyDescriptor<T[P]> } & { [x: string]: PropertyDescriptor } {\n\t\treturn Object.getOwnPropertyNames(o).reduce(\n\t\t\t(previous, key) => {\n\t\t\t\tprevious[key] = Object.getOwnPropertyDescriptor(o, key)!;\n\t\t\t\treturn previous;\n\t\t\t},\n\t\t\t{} as { [x: string]: PropertyDescriptor }\n\t\t) as { [P in keyof T]: TypedPropertyDescriptor<T[P]> } & { [x: string]: PropertyDescriptor };\n\t};\n\n\tObject.entries = function entries(o: any): [string, any][] {\n\t\treturn keys(o).map((key) => [key, o[key]] as [string, any]);\n\t};\n\n\tObject.values = function values(o: any): any[] {\n\t\treturn keys(o).map((key) => o[key]);\n\t};\n}\n\nassign = Object.assign;\ngetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\ngetOwnPropertyNames = Object.getOwnPropertyNames;\ngetOwnPropertySymbols = Object.getOwnPropertySymbols;\nis = Object.is;\nkeys = Object.keys;\ngetOwnPropertyDescriptors = Object.getOwnPropertyDescriptors;\nentries = Object.entries;\nvalues = Object.values;\n\nexport default Object;\n","`!has('es6-iterator')`;\nimport { isArrayLike, Iterable, IterableIterator, ShimIterator } from './iterator';\nimport global from './global';\nimport { is as objectIs } from './object';\nimport has from '../core/has';\n`!has('es6-symbol')`;\nimport './Symbol';\n\nexport interface Map<K, V> {\n\t/**\n\t * Deletes all keys and their associated values.\n\t */\n\tclear(): void;\n\n\t/**\n\t * Deletes a given key and its associated value.\n\t *\n\t * @param key The key to delete\n\t * @return true if the key exists, false if it does not\n\t */\n\tdelete(key: K): boolean;\n\n\t/**\n\t * Returns an iterator that yields each key/value pair as an array.\n\t *\n\t * @return An iterator for each key/value pair in the instance.\n\t */\n\tentries(): IterableIterator<[K, V]>;\n\n\t/**\n\t * Executes a given function for each map entry. The function\n\t * is invoked with three arguments: the element value, the\n\t * element key, and the associated Map instance.\n\t *\n\t * @param callbackfn The function to execute for each map entry,\n\t * @param thisArg The value to use for `this` for each execution of the calback\n\t */\n\tforEach(callbackfn: (value: V, key: K, map: Map<K, V>) => void, thisArg?: any): void;\n\n\t/**\n\t * Returns the value associated with a given key.\n\t *\n\t * @param key The key to look up\n\t * @return The value if one exists or undefined\n\t */\n\tget(key: K): V | undefined;\n\n\t/**\n\t * Returns an iterator that yields each key in the map.\n\t *\n\t * @return An iterator containing the instance's keys.\n\t */\n\tkeys(): IterableIterator<K>;\n\n\t/**\n\t * Checks for the presence of a given key.\n\t *\n\t * @param key The key to check for\n\t * @return true if the key exists, false if it does not\n\t */\n\thas(key: K): boolean;\n\n\t/**\n\t * Sets the value associated with a given key.\n\t *\n\t * @param key The key to define a value to\n\t * @param value The value to assign\n\t * @return The Map instance\n\t */\n\tset(key: K, value: V): this;\n\n\t/**\n\t * Returns the number of key / value pairs in the Map.\n\t */\n\treadonly size: number;\n\n\t/**\n\t * Returns an iterator that yields each value in the map.\n\t *\n\t * @return An iterator containing the instance's values.\n\t */\n\tvalues(): IterableIterator<V>;\n\n\t/** Returns an iterable of entries in the map. */\n\t[Symbol.iterator](): IterableIterator<[K, V]>;\n\n\treadonly [Symbol.toStringTag]: string;\n}\n\nexport interface MapConstructor {\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t */\n\tnew (): Map<any, any>;\n\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t *\n\t * @param iterator\n\t * Array or iterator containing two-item tuples used to initially populate the map.\n\t * The first item in each tuple corresponds to the key of the map entry.\n\t * The second item corresponds to the value of the map entry.\n\t */\n\tnew <K, V>(iterator?: [K, V][]): Map<K, V>;\n\n\t/**\n\t * Creates a new Map\n\t *\n\t * @constructor\n\t *\n\t * @param iterator\n\t * Array or iterator containing two-item tuples used to initially populate the map.\n\t * The first item in each tuple corresponds to the key of the map entry.\n\t * The second item corresponds to the value of the map entry.\n\t */\n\tnew <K, V>(iterator: Iterable<[K, V]>): Map<K, V>;\n\n\treadonly prototype: Map<any, any>;\n\n\treadonly [Symbol.species]: MapConstructor;\n}\n\nexport let Map: MapConstructor = global.Map;\n\nif (!has('es6-map')) {\n\tMap = global.Map = class Map<K, V> {\n\t\tprotected readonly _keys: K[] = [];\n\t\tprotected readonly _values: V[] = [];\n\n\t\t/**\n\t\t * An alternative to Array.prototype.indexOf using Object.is\n\t\t * to check for equality. See http://mzl.la/1zuKO2V\n\t\t */\n\t\tprotected _indexOfKey(keys: K[], key: K): number {\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tif (objectIs(keys[i], key)) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t}\n\n\t\tstatic [Symbol.species] = Map;\n\n\t\tconstructor(iterable?: ArrayLike<[K, V]> | Iterable<[K, V]>) {\n\t\t\tif (iterable) {\n\t\t\t\tif (isArrayLike(iterable)) {\n\t\t\t\t\tfor (let i = 0; i < iterable.length; i++) {\n\t\t\t\t\t\tconst value = iterable[i];\n\t\t\t\t\t\tthis.set(value[0], value[1]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (const value of iterable) {\n\t\t\t\t\t\tthis.set(value[0], value[1]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tget size(): number {\n\t\t\treturn this._keys.length;\n\t\t}\n\n\t\tclear(): void {\n\t\t\tthis._keys.length = this._values.length = 0;\n\t\t}\n\n\t\tdelete(key: K): boolean {\n\t\t\tconst index = this._indexOfKey(this._keys, key);\n\t\t\tif (index < 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis._keys.splice(index, 1);\n\t\t\tthis._values.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\n\t\tentries(): IterableIterator<[K, V]> {\n\t\t\tconst values = this._keys.map(\n\t\t\t\t(key: K, i: number): [K, V] => {\n\t\t\t\t\treturn [key, this._values[i]];\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn new ShimIterator(values);\n\t\t}\n\n\t\tforEach(callback: (value: V, key: K, mapInstance: Map<K, V>) => any, context?: {}) {\n\t\t\tconst keys = this._keys;\n\t\t\tconst values = this._values;\n\t\t\tfor (let i = 0, length = keys.length; i < length; i++) {\n\t\t\t\tcallback.call(context, values[i], keys[i], this);\n\t\t\t}\n\t\t}\n\n\t\tget(key: K): V | undefined {\n\t\t\tconst index = this._indexOfKey(this._keys, key);\n\t\t\treturn index < 0 ? undefined : this._values[index];\n\t\t}\n\n\t\thas(key: K): boolean {\n\t\t\treturn this._indexOfKey(this._keys, key) > -1;\n\t\t}\n\n\t\tkeys(): IterableIterator<K> {\n\t\t\treturn new ShimIterator(this._keys);\n\t\t}\n\n\t\tset(key: K, value: V): Map<K, V> {\n\t\t\tlet index = this._indexOfKey(this._keys, key);\n\t\t\tindex = index < 0 ? this._keys.length : index;\n\t\t\tthis._keys[index] = key;\n\t\t\tthis._values[index] = value;\n\t\t\treturn this;\n\t\t}\n\n\t\tvalues(): IterableIterator<V> {\n\t\t\treturn new ShimIterator(this._values);\n\t\t}\n\n\t\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\t\treturn this.entries();\n\t\t}\n\n\t\t[Symbol.toStringTag]: 'Map' = 'Map';\n\t};\n}\n\nexport default Map;\n","import { DNode, RenderResult } from '@dojo/framework/core/interfaces';\nimport { isVNode, isWNode } from '@dojo/framework/core/vdom';\n\ninterface AriaPropertyObject {\n\t[key: string]: string | null;\n}\n\nexport enum Keys {\n\tDown = 40,\n\tEnd = 35,\n\tEnter = 13,\n\tEscape = 27,\n\tHome = 36,\n\tLeft = 37,\n\tPageDown = 34,\n\tPageUp = 33,\n\tRight = 39,\n\tSpace = 32,\n\tTab = 9,\n\tUp = 38\n}\n\nexport function formatAriaProperties(aria: AriaPropertyObject): AriaPropertyObject {\n\tconst formattedAria = Object.keys(aria).reduce((a: AriaPropertyObject, key: string) => {\n\t\ta[`aria-${key.toLowerCase()}`] = aria[key];\n\t\treturn a;\n\t}, {});\n\treturn formattedAria;\n}\n\nexport function isRenderResult<T extends {}>(child: RenderResult | T): child is RenderResult {\n\tlet childIsRenderResult =\n\t\tchild == null ||\n\t\ttypeof child === 'string' ||\n\t\ttypeof child === 'boolean' ||\n\t\tArray.isArray(child) ||\n\t\tisWNode(child);\n\ttry {\n\t\tchildIsRenderResult = childIsRenderResult || isVNode(child as DNode);\n\t} catch {}\n\n\treturn childIsRenderResult;\n}\n","`!has('es6-iterator')`;\nimport { isArrayLike, isIterable, Iterable } from './iterator';\nimport has from '../core/has';\nimport { wrapNative } from './support/util';\n\nexport interface MapCallback<T, U> {\n\t/**\n\t * A callback function when mapping\n\t *\n\t * @param element The element that is currently being mapped\n\t * @param index The current index of the element\n\t */\n\t(element: T, index: number): U;\n}\n\nexport interface FindCallback<T> {\n\t/**\n\t * A callback function when using find\n\t *\n\t * @param element The element that is currenty being analysed\n\t * @param index The current index of the element that is being analysed\n\t * @param array The source array\n\t */\n\t(element: T, index: number, array: ArrayLike<T>): boolean;\n}\n\n/* ES6 Array static methods */\n\nexport interface From {\n\t/**\n\t * The Array.from() method creates a new Array instance from an array-like or iterable object.\n\t *\n\t * @param source An array-like or iterable object to convert to an array\n\t * @param mapFunction A map function to call on each element in the array\n\t * @param thisArg The execution context for the map function\n\t * @return The new Array\n\t */\n\t<T, U>(source: ArrayLike<T> | Iterable<T>, mapFunction: MapCallback<T, U>, thisArg?: any): Array<U>;\n\n\t/**\n\t * The Array.from() method creates a new Array instance from an array-like or iterable object.\n\t *\n\t * @param source An array-like or iterable object to convert to an array\n\t * @return The new Array\n\t */\n\t<T>(source: ArrayLike<T> | Iterable<T>): Array<T>;\n}\n\nexport interface Flat {\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(\n\t\tarr:\n\t\t\t| ReadonlyArray<U[][][][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[][][]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[][]>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[]>[][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U>[][][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U[][]>>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>[][]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>[][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>[]>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U[]>>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U[]>[]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U[]>>>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U>[]>>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>[]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>>>>,\n\t\tdepth: 4\n\t): U[];\n\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(\n\t\tarr:\n\t\t\t| ReadonlyArray<U[][][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U>[][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[]>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[][]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U[]>>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>[]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>>>,\n\t\tdepth: 3\n\t): U[];\n\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(\n\t\tarr:\n\t\t\t| ReadonlyArray<U[][]>\n\t\t\t| ReadonlyArray<ReadonlyArray<U[]>>\n\t\t\t| ReadonlyArray<ReadonlyArray<U>[]>\n\t\t\t| ReadonlyArray<ReadonlyArray<ReadonlyArray<U>>>,\n\t\tdepth: 2\n\t): U[];\n\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(arr: ReadonlyArray<U[]> | ReadonlyArray<ReadonlyArray<U>>, depth?: 1): U[];\n\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(arr: ReadonlyArray<U>, depth: 0): U[];\n\n\t/**\n\t * Returns a new array with all sub-array elements concatenated into it recursively up to the\n\t * specified depth. If no depth is provided, flat method defaults to the depth of 1.\n\t *\n\t * @param depth The maximum recursion depth\n\t */\n\t<U>(arr: any[], depth?: number): any[];\n}\n\nexport interface FlatMap {\n\t/**\n\t * Calls a defined callback function on each element of an array. Then, flattens the result into\n\t * a new array.\n\t * This is identical to a map followed by flat with depth 1.\n\t *\n\t * @param callback A function that accepts up to three arguments. The flatMap method calls the\n\t * callback function one time for each element in the array.\n\t * @param thisArg An object to which the this keyword can refer in the callback function. If\n\t * thisArg is omitted, undefined is used as the this value.\n\t */\n\t<U, T extends any, This = undefined>(\n\t\tarr: T[],\n\t\tcallback: (this: This, value: T, index: number, array: T[]) => U | ReadonlyArray<U>,\n\t\tthisArg?: This\n\t): U[];\n}\n\nexport let from: From;\n\n/**\n * Creates a new array from the function parameters.\n *\n * @param arguments Any number of arguments for the array\n * @return An array from the given arguments\n */\nexport let of: <T>(...items: T[]) => Array<T>;\n\n/* ES6 Array instance methods */\n\n/**\n * Copies data internally within an array or array-like object.\n *\n * @param target The target array-like object\n * @param offset The index to start copying values to; if negative, it counts backwards from length\n * @param start The first (inclusive) index to copy; if negative, it counts backwards from length\n * @param end The last (exclusive) index to copy; if negative, it counts backwards from length\n * @return The target\n */\nexport let copyWithin: <T>(target: ArrayLike<T>, offset: number, start: number, end?: number) => ArrayLike<T>;\n\n/**\n * Fills elements of an array-like object with the specified value.\n *\n * @param target The target to fill\n * @param value The value to fill each element of the target with\n * @param start The first index to fill\n * @param end The (exclusive) index at which to stop filling\n * @return The filled target\n */\nexport let fill: <T>(target: ArrayLike<T>, value: T, start?: number, end?: number) => ArrayLike<T>;\n\n/**\n * Finds and returns the first instance matching the callback or undefined if one is not found.\n *\n * @param target An array-like object\n * @param callback A function returning if the current value matches a criteria\n * @param thisArg The execution context for the find function\n * @return The first element matching the callback, or undefined if one does not exist\n */\nexport let find: <T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}) => T | undefined;\n\n/**\n * Performs a linear search and returns the first index whose value satisfies the passed callback,\n * or -1 if no values satisfy it.\n *\n * @param target An array-like object\n * @param callback A function returning true if the current value satisfies its criteria\n * @param thisArg The execution context for the find function\n * @return The first index whose value satisfies the passed callback, or -1 if no values satisfy it\n */\nexport let findIndex: <T>(target: ArrayLike<T>, callback: FindCallback<T>, thisArg?: {}) => number;\n\n/* ES7 Array instance methods */\n\n/**\n * Determines whether an array includes a given value\n *\n * @param target the target array-like object\n * @param searchElement the item to search for\n * @param fromIndex the starting index to search from\n * @return `true` if the array includes the element, otherwise `false`\n */\nexport let includes: <T>(target: ArrayLike<T>, searchElement: T, fromIndex?: number) => boolean;\n\n/**\n * Flattens arrays to the depth specified\n *\n * @param target An array-like object\n * @param depth The depth to flatten too, defaults to 1.\n */\nexport let flat: Flat;\n\nexport let flatMap: FlatMap;\n\n// Util functions for filled implementations\n\nlet toLength: any;\nlet toInteger: any;\nlet normalizeOffset: any;\n\nif (!has('es6-array') || !has('es6-array-fill') || !has('es7-array')) {\n\tconst MAX_SAFE_INTEGER = Math.pow(2, 53) - 1;\n\n\t/**\n\t * Ensures a non-negative, non-infinite, safe integer.\n\t *\n\t * @param length The number to validate\n\t * @return A proper length\n\t */\n\ttoLength = function toLength(length: number): number {\n\t\tif (isNaN(length)) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tlength = Number(length);\n\t\tif (isFinite(length)) {\n\t\t\tlength = Math.floor(length);\n\t\t}\n\t\t// Ensure a non-negative, real, safe integer\n\t\treturn Math.min(Math.max(length, 0), MAX_SAFE_INTEGER);\n\t};\n\n\t/**\n\t * From ES6 7.1.4 ToInteger()\n\t *\n\t * @param value A value to convert\n\t * @return An integer\n\t */\n\ttoInteger = function toInteger(value: any): number {\n\t\tvalue = Number(value);\n\t\tif (isNaN(value)) {\n\t\t\treturn 0;\n\t\t}\n\t\tif (value === 0 || !isFinite(value)) {\n\t\t\treturn value;\n\t\t}\n\n\t\treturn (value > 0 ? 1 : -1) * Math.floor(Math.abs(value));\n\t};\n\n\t/**\n\t * Normalizes an offset against a given length, wrapping it if negative.\n\t *\n\t * @param value The original offset\n\t * @param length The total length to normalize against\n\t * @return If negative, provide a distance from the end (length); otherwise provide a distance from 0\n\t */\n\tnormalizeOffset = function normalizeOffset(value: number, length: number): number {\n\t\treturn value < 0 ? Math.max(length + value, 0) : Math.min(value, length);\n\t};\n}\n\nif (!has('es6-array')) {\n\tArray.from = function from(\n\t\tthis: ArrayConstructor,\n\t\tarrayLike: Iterable<any> | ArrayLike<any>,\n\t\tmapFunction?: MapCallback<any, any>,\n\t\tthisArg?: any\n\t): Array<any> {\n\t\tif (arrayLike == null) {\n\t\t\tthrow new TypeError('from: requires an array-like object');\n\t\t}\n\n\t\tif (mapFunction && thisArg) {\n\t\t\tmapFunction = mapFunction.bind(thisArg);\n\t\t}\n\n\t\t/* tslint:disable-next-line:variable-name */\n\t\tconst Constructor = this;\n\t\tconst length: number = toLength((arrayLike as any).length);\n\n\t\t// Support extension\n\t\tconst array: any[] =\n\t\t\ttypeof Constructor === 'function' ? <any[]>Object(new Constructor(length)) : new Array(length);\n\n\t\tif (!isArrayLike(arrayLike) && !isIterable(arrayLike)) {\n\t\t\treturn array;\n\t\t}\n\n\t\t// if this is an array and the normalized length is 0, just return an empty array. this prevents a problem\n\t\t// with the iteration on IE when using a NaN array length.\n\t\tif (isArrayLike(arrayLike)) {\n\t\t\tif (length === 0) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < arrayLike.length; i++) {\n\t\t\t\tarray[i] = mapFunction ? mapFunction(arrayLike[i], i) : arrayLike[i];\n\t\t\t}\n\t\t} else {\n\t\t\tlet i = 0;\n\t\t\tfor (const value of arrayLike) {\n\t\t\t\tarray[i] = mapFunction ? mapFunction(value, i) : value;\n\t\t\t\ti++;\n\t\t\t}\n\t\t}\n\n\t\tif ((arrayLike as any).length !== undefined) {\n\t\t\tarray.length = length;\n\t\t}\n\n\t\treturn array;\n\t};\n\n\tArray.of = function of<T>(...items: T[]): Array<T> {\n\t\treturn Array.prototype.slice.call(items);\n\t};\n\n\tArray.prototype.copyWithin = function copyWithin(offset: number, start: number, end?: number) {\n\t\tif (this == null) {\n\t\t\tthrow new TypeError('copyWithin: target must be an array-like object');\n\t\t}\n\n\t\tconst length = toLength(this.length);\n\t\toffset = normalizeOffset(toInteger(offset), length);\n\t\tstart = normalizeOffset(toInteger(start), length);\n\t\tend = normalizeOffset(end === undefined ? length : toInteger(end), length);\n\t\tlet count = Math.min(end! - start, length - offset);\n\n\t\tlet direction = 1;\n\t\tif (offset > start && offset < start + count) {\n\t\t\tdirection = -1;\n\t\t\tstart += count - 1;\n\t\t\toffset += count - 1;\n\t\t}\n\n\t\twhile (count > 0) {\n\t\t\tif (start in this) {\n\t\t\t\tthis[offset] = this[start];\n\t\t\t} else {\n\t\t\t\tdelete this[offset];\n\t\t\t}\n\n\t\t\toffset += direction;\n\t\t\tstart += direction;\n\t\t\tcount--;\n\t\t}\n\n\t\treturn this;\n\t};\n\n\ttype Predicate = (this: {} | void, value: any, index: number, obj: any[]) => boolean;\n\n\tArray.prototype.find = function find(callback: Predicate, thisArg?: {}) {\n\t\tconst index = this.findIndex(callback, thisArg);\n\t\treturn index !== -1 ? this[index] : undefined;\n\t};\n\n\tArray.prototype.findIndex = function findIndex(callback: Predicate, thisArg?: {}): number {\n\t\tconst length = toLength(this.length);\n\n\t\tif (!callback) {\n\t\t\tthrow new TypeError('find: second argument must be a function');\n\t\t}\n\n\t\tif (thisArg) {\n\t\t\tcallback = callback.bind(thisArg);\n\t\t}\n\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tif (callback(this[i], i, this)) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn -1;\n\t};\n}\n\nif (!has('es6-array-fill')) {\n\tArray.prototype.fill = function fill(value: any, start?: number, end?: number) {\n\t\tconst length = toLength(this.length);\n\t\tlet i = normalizeOffset(toInteger(start), length);\n\t\tend = normalizeOffset(end === undefined ? length : toInteger(end), length);\n\n\t\twhile (i < (end || 0)) {\n\t\t\tthis[i++] = value;\n\t\t}\n\n\t\treturn this;\n\t};\n}\n\nif (!has('es7-array')) {\n\tArray.prototype.includes = function includes(searchElement, fromIndex = 0) {\n\t\tlet len = toLength(this.length);\n\n\t\tfor (let i = fromIndex; i < len; ++i) {\n\t\t\tconst currentElement = this[i];\n\t\t\tif (\n\t\t\t\tsearchElement === currentElement ||\n\t\t\t\t(searchElement !== searchElement && currentElement !== currentElement)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t};\n}\n\nif (!has('es2019-array')) {\n\tArray.prototype.flat = function flat(depth: number = 1) {\n\t\treturn depth > 0\n\t\t\t? this.reduce((acc, val) => acc.concat(Array.isArray(val) ? val.flat(depth - 1) : val), [])\n\t\t\t: this.slice();\n\t};\n\n\tArray.prototype.flatMap = function flatMap(callback: any) {\n\t\treturn this.map(callback).flat();\n\t};\n}\n\nfrom = Array.from;\nof = Array.of;\ncopyWithin = wrapNative(Array.prototype.copyWithin);\nfill = wrapNative(Array.prototype.fill);\nfind = wrapNative(Array.prototype.find);\nflat = wrapNative(Array.prototype.flat) as any;\nflatMap = wrapNative(Array.prototype.flatMap) as any;\nfindIndex = wrapNative(Array.prototype.findIndex);\nincludes = wrapNative(Array.prototype.includes);\n\nexport default Array;\n","import Promise from '../shim/Promise';\n\n/**\n * Used through the toolkit as a consistent API to manage how callers can \"cleanup\"\n * when doing a function.\n */\nexport interface Handle {\n\t/**\n\t * Perform the destruction/cleanup logic associated with this Handle\n\t */\n\tdestroy(): void;\n}\n\n/**\n * No op function used to replace a Destroyable instance's `destroy` method, once the instance has been destroyed\n */\nfunction noop(): Promise<boolean> {\n\treturn Promise.resolve(false);\n}\n\n/**\n * No op function used to replace a Destroyable instance's `own` method, once the instance has been destroyed\n */\nfunction destroyed(): never {\n\tthrow new Error('Call made to destroyed method');\n}\n\nexport class Destroyable {\n\t/**\n\t * The instance's handles\n\t */\n\tprivate handles: Handle[];\n\n\t/**\n\t * @constructor\n\t */\n\tconstructor() {\n\t\tthis.handles = [];\n\t}\n\n\t/**\n\t * Register handles for the instance that will be destroyed when `this.destroy` is called\n\t *\n\t * @param {Handle} handle The handle to add for the instance\n\t * @returns {Handle} A wrapper Handle. When the wrapper Handle's `destroy` method is invoked, the original handle is\n\t *                   removed from the instance, and its `destroy` method is invoked.\n\t */\n\town(handle: Handle): Handle {\n\t\tconst { handles: _handles } = this;\n\t\t_handles.push(handle);\n\t\treturn {\n\t\t\tdestroy() {\n\t\t\t\t_handles.splice(_handles.indexOf(handle));\n\t\t\t\thandle.destroy();\n\t\t\t}\n\t\t};\n\t}\n\n\t/**\n\t * Destroys all handlers registered for the instance\n\t *\n\t * @returns {Promise<any} A Promise that resolves once all handles have been destroyed\n\t */\n\tdestroy(): Promise<any> {\n\t\treturn new Promise((resolve) => {\n\t\t\tthis.handles.forEach((handle) => {\n\t\t\t\thandle && handle.destroy && handle.destroy();\n\t\t\t});\n\t\t\tthis.destroy = noop;\n\t\t\tthis.own = destroyed;\n\t\t\tresolve(true);\n\t\t});\n\t}\n}\n\nexport default Destroyable;\n","import Map from '../shim/Map';\nimport { Destroyable, Handle } from './Destroyable';\n\n/**\n * Map of computed regular expressions, keyed by string\n */\nconst regexMap = new Map<string, RegExp>();\n\nexport type EventType = string | symbol;\n\n/**\n * The base event object, which provides a `type` property\n */\nexport interface EventObject<T = EventType> {\n\t/**\n\t * The type of the event\n\t */\n\treadonly type: T;\n}\n\n/**\n * Determines if the event type glob has been matched\n *\n * @returns boolean that indicates if the glob is matched\n */\nexport function isGlobMatch(globString: string | symbol, targetString: string | symbol): boolean {\n\tif (typeof targetString === 'string' && typeof globString === 'string' && globString.indexOf('*') !== -1) {\n\t\tlet regex: RegExp;\n\t\tif (regexMap.has(globString)) {\n\t\t\tregex = regexMap.get(globString)!;\n\t\t} else {\n\t\t\tregex = new RegExp(`^${globString.replace(/\\*/g, '.*')}$`);\n\t\t\tregexMap.set(globString, regex);\n\t\t}\n\t\treturn regex.test(targetString);\n\t} else {\n\t\treturn globString === targetString;\n\t}\n}\n\nexport type EventedCallback<T = EventType, E extends EventObject<T> = EventObject<T>> = {\n\t/**\n\t * A callback that takes an `event` argument\n\t *\n\t * @param event The event object\n\t */\n\n\t(event: E): boolean | void;\n};\n\nexport interface CustomEventTypes<T extends EventObject<any> = EventObject<any>> {\n\t[index: string]: T;\n}\n\n/**\n * A type which is either a targeted event listener or an array of listeners\n * @template T The type of target for the events\n * @template E The event type for the events\n */\nexport type EventedCallbackOrArray<T = EventType, E extends EventObject<T> = EventObject<T>> =\n\t| EventedCallback<T, E>\n\t| EventedCallback<T, E>[];\n\n/**\n * Event Class\n */\nexport class Evented<\n\tM extends CustomEventTypes = {},\n\tT = EventType,\n\tO extends EventObject<T> = EventObject<T>\n> extends Destroyable {\n\t// The following member is purely so TypeScript remembers the type of `M` when extending so\n\t// that the utilities in `on.ts` will work https://github.com/Microsoft/TypeScript/issues/20348\n\t// tslint:disable-next-line\n\tprotected __typeMap__?: M;\n\t/**\n\t * map of listeners keyed by event type\n\t */\n\tprotected listenersMap: Map<T | keyof M, EventedCallback<T, O>[]> = new Map();\n\n\t/**\n\t * Emits the event object for the specified type\n\t *\n\t * @param event the event to emit\n\t */\n\temit<K extends keyof M>(event: M[K]): void;\n\temit(event: O): void;\n\temit(event: any): void {\n\t\tthis.listenersMap.forEach((methods, type) => {\n\t\t\tif (isGlobMatch(type as any, event.type)) {\n\t\t\t\t[...methods].forEach((method) => {\n\t\t\t\t\tmethod.call(this, event);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Catch all handler for various call signatures. The signatures are defined in\n\t * `BaseEventedEvents`.  You can add your own event type -> handler types by extending\n\t * `BaseEventedEvents`.  See example for details.\n\t *\n\t * @param args\n\t *\n\t * @example\n\t *\n\t * interface WidgetBaseEvents extends BaseEventedEvents {\n\t *     (type: 'properties:changed', handler: PropertiesChangedHandler): Handle;\n\t * }\n\t * class WidgetBase extends Evented {\n\t *    on: WidgetBaseEvents;\n\t * }\n\t *\n\t * @return {any}\n\t */\n\ton<K extends keyof M>(type: K, listener: EventedCallbackOrArray<K, M[K]>): Handle;\n\ton(type: T, listener: EventedCallbackOrArray<T, O>): Handle;\n\ton(type: any, listener: EventedCallbackOrArray<any, any>): Handle {\n\t\tif (Array.isArray(listener)) {\n\t\t\tconst handles = listener.map((listener) => this._addListener(type, listener));\n\t\t\treturn {\n\t\t\t\tdestroy() {\n\t\t\t\t\thandles.forEach((handle) => handle.destroy());\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\treturn this._addListener(type, listener);\n\t}\n\n\tprivate _addListener(type: T | keyof M, listener: EventedCallback<T, O>) {\n\t\tconst listeners = this.listenersMap.get(type) || [];\n\t\tlisteners.push(listener);\n\t\tthis.listenersMap.set(type, listeners);\n\t\treturn {\n\t\t\tdestroy: () => {\n\t\t\t\tconst listeners = this.listenersMap.get(type) || [];\n\t\t\t\tlisteners.splice(listeners.indexOf(listener), 1);\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport default Evented;\n","import Promise from '../shim/Promise';\nimport Map from '../shim/Map';\nimport { Evented, EventObject } from '../core/Evented';\nimport {\n\tConstructor,\n\tInjectorFactory,\n\tInjectorItem,\n\tRegistryLabel,\n\tWidgetBaseConstructor,\n\tWidgetBaseInterface,\n\tESMDefaultWidgetBase,\n\tWidgetBaseConstructorFunction,\n\tESMDefaultWidgetBaseFunction,\n\tCallback,\n\tWNodeFactory,\n\tRenderResult,\n\tWidgetBaseTypes,\n\tDefaultChildrenWNodeFactory,\n\tOptionalWNodeFactory\n} from './interfaces';\n\nexport type RegistryItem =\n\t| WidgetBaseConstructor\n\t| WNodeFactory<any>\n\t| DefaultChildrenWNodeFactory<any>\n\t| OptionalWNodeFactory<any>\n\t| Promise<WidgetBaseConstructor | WNodeFactory<any>>\n\t| WidgetBaseConstructorFunction\n\t| ESMDefaultWidgetBaseFunction;\n\n/**\n * Widget base type\n */\nexport const WIDGET_BASE_TYPE = '__widget_base_type';\n\nexport interface RegistryEventObject extends EventObject<RegistryLabel> {\n\taction: string;\n\titem:\n\t\t| WNodeFactory<any>\n\t\t| DefaultChildrenWNodeFactory<any>\n\t\t| OptionalWNodeFactory<any>\n\t\t| WidgetBaseConstructor\n\t\t| InjectorItem;\n}\n/**\n * Widget Registry Interface\n */\nexport interface RegistryInterface {\n\t/**\n\t * Define a WidgetRegistryItem against a label\n\t *\n\t * @param label The label of the widget to register\n\t * @param registryItem The registry item to define\n\t */\n\tdefine(label: RegistryLabel, registryItem: RegistryItem): void;\n\n\t/**\n\t * Return a RegistryItem for the given label, null if an entry doesn't exist\n\t *\n\t * @param widgetLabel The label of the widget to return\n\t * @returns The RegistryItem for the widgetLabel, `null` if no entry exists\n\t */\n\tget(label: RegistryLabel): WNodeFactory<any> | Callback<any, any, any, RenderResult> | Constructor<any> | null;\n\tget<T extends WNodeFactory<any>>(label: RegistryLabel): T | null;\n\tget<T extends Callback<any, any, any, RenderResult>>(label: RegistryLabel): T | null;\n\tget<T extends WidgetBaseInterface = WidgetBaseInterface>(label: RegistryLabel): Constructor<T> | null;\n\n\t/**\n\t * Returns a boolean if an entry for the label exists\n\t *\n\t * @param widgetLabel The label to search for\n\t * @returns boolean indicating if a widget registry item exists\n\t */\n\thas(label: RegistryLabel): boolean;\n\n\t/**\n\t * Define an Injector against a label\n\t *\n\t * @param label The label of the injector to register\n\t * @param registryItem The injector factory\n\t */\n\tdefineInjector(label: RegistryLabel, injectorFactory: InjectorFactory): void;\n\n\t/**\n\t * Return an Injector registry item for the given label, null if an entry doesn't exist\n\t *\n\t * @param label The label of the injector to return\n\t * @returns The RegistryItem for the widgetLabel, `null` if no entry exists\n\t */\n\tgetInjector<T>(label: RegistryLabel): InjectorItem<T> | null;\n\n\t/**\n\t * Returns a boolean if an injector for the label exists\n\t *\n\t * @param widgetLabel The label to search for\n\t * @returns boolean indicating if a injector registry item exists\n\t */\n\thasInjector(label: RegistryLabel): boolean;\n}\n\n/**\n * Checks is the item is a subclass of WidgetBase (or a WidgetBase)\n *\n * @param item the item to check\n * @returns true/false indicating if the item is a WidgetBaseConstructor\n */\nexport function isWidgetBaseConstructor<T extends WidgetBaseInterface = any>(item: any): item is Constructor<T> {\n\treturn Boolean(item && item._type === WIDGET_BASE_TYPE);\n}\n\nexport function isWidgetFunction(item: any): item is Callback<any, any, any, RenderResult> {\n\treturn Boolean(item && item.isWidget);\n}\n\nexport function isWNodeFactory<W extends WidgetBaseTypes>(node: any): node is WNodeFactory<W> {\n\tif (typeof node === 'function' && node.isFactory) {\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function isWidget<T extends WidgetBaseInterface = any>(\n\titem: any\n): item is Constructor<T> | Callback<any, any, any, RenderResult> {\n\treturn isWidgetBaseConstructor(item) || isWidgetFunction(item);\n}\n\nexport function isWidgetConstructorDefaultExport<T extends WidgetBaseTypes>(\n\titem: any\n): item is ESMDefaultWidgetBase<T> {\n\treturn Boolean(\n\t\titem &&\n\t\t\titem.hasOwnProperty('__esModule') &&\n\t\t\titem.hasOwnProperty('default') &&\n\t\t\t(isWidget(item.default) || isWNodeFactory(item.default))\n\t);\n}\n\n/**\n * The Registry implementation\n */\nexport class Registry extends Evented<{}, RegistryLabel, RegistryEventObject> implements RegistryInterface {\n\t/**\n\t * internal map of labels and RegistryItem\n\t */\n\tprivate _widgetRegistry: Map<RegistryLabel, RegistryItem> | undefined;\n\n\tprivate _injectorRegistry: Map<RegistryLabel, InjectorItem> | undefined;\n\n\t/**\n\t * Emit loaded event for registry label\n\t */\n\tprivate emitLoadedEvent(\n\t\twidgetLabel: RegistryLabel,\n\t\titem:\n\t\t\t| DefaultChildrenWNodeFactory<any>\n\t\t\t| OptionalWNodeFactory<any>\n\t\t\t| WNodeFactory<any>\n\t\t\t| WidgetBaseConstructor\n\t\t\t| InjectorItem\n\t): void {\n\t\tthis.emit({\n\t\t\ttype: widgetLabel,\n\t\t\taction: 'loaded',\n\t\t\titem\n\t\t});\n\t}\n\n\tpublic define(label: RegistryLabel, item: RegistryItem): void {\n\t\tif (this._widgetRegistry === undefined) {\n\t\t\tthis._widgetRegistry = new Map();\n\t\t}\n\n\t\tif (this._widgetRegistry.has(label)) {\n\t\t\tthrow new Error(`widget has already been registered for '${label.toString()}'`);\n\t\t}\n\n\t\tthis._widgetRegistry.set(label, item);\n\n\t\tif (item instanceof Promise) {\n\t\t\titem.then(\n\t\t\t\t(widgetCtor) => {\n\t\t\t\t\tthis._widgetRegistry!.set(label, widgetCtor);\n\t\t\t\t\tthis.emitLoadedEvent(label, widgetCtor);\n\t\t\t\t\treturn widgetCtor;\n\t\t\t\t},\n\t\t\t\t(error) => {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\t\t\t);\n\t\t} else if (isWidgetBaseConstructor(item)) {\n\t\t\tthis.emitLoadedEvent(label, item);\n\t\t}\n\t}\n\n\tpublic defineInjector(label: RegistryLabel, injectorFactory: InjectorFactory): void {\n\t\tif (this._injectorRegistry === undefined) {\n\t\t\tthis._injectorRegistry = new Map();\n\t\t}\n\n\t\tif (this._injectorRegistry.has(label)) {\n\t\t\tthrow new Error(`injector has already been registered for '${label.toString()}'`);\n\t\t}\n\n\t\tconst invalidator = new Evented();\n\n\t\tconst injectorItem: InjectorItem = {\n\t\t\tinjector: injectorFactory(() => invalidator.emit({ type: 'invalidate' })),\n\t\t\tinvalidator\n\t\t};\n\n\t\tthis._injectorRegistry.set(label, injectorItem);\n\t\tthis.emitLoadedEvent(label, injectorItem);\n\t}\n\n\tpublic get(\n\t\tlabel: RegistryLabel\n\t): WNodeFactory<any> | Callback<any, any, any, RenderResult> | Constructor<any> | null;\n\tpublic get<T extends WNodeFactory<any>>(label: RegistryLabel): T | null;\n\tpublic get<T extends Callback<any, any, any, RenderResult>>(label: RegistryLabel): T | null;\n\tpublic get<T extends WidgetBaseInterface = WidgetBaseInterface>(label: RegistryLabel): Constructor<T> | null;\n\tpublic get<T extends WidgetBaseInterface = WidgetBaseInterface>(\n\t\tlabel: RegistryLabel\n\t): WNodeFactory<T> | Callback<any, any, any, RenderResult> | Constructor<T> | null {\n\t\tif (!this._widgetRegistry || !this.has(label)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst item = this._widgetRegistry.get(label);\n\n\t\tif (isWidget<T>(item) || isWNodeFactory(item)) {\n\t\t\treturn item as any;\n\t\t}\n\n\t\tif (item instanceof Promise) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst promise = (<WidgetBaseConstructorFunction>item)();\n\t\tthis._widgetRegistry.set(label, promise);\n\n\t\tpromise.then(\n\t\t\t(widgetCtor: any) => {\n\t\t\t\tif (isWidgetConstructorDefaultExport<T>(widgetCtor)) {\n\t\t\t\t\twidgetCtor = widgetCtor.default;\n\t\t\t\t}\n\n\t\t\t\tthis._widgetRegistry!.set(label, widgetCtor);\n\t\t\t\tthis.emitLoadedEvent(label, widgetCtor);\n\t\t\t\treturn widgetCtor;\n\t\t\t},\n\t\t\t(error) => {\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t);\n\n\t\treturn null;\n\t}\n\n\tpublic getInjector<T>(label: RegistryLabel): InjectorItem<T> | null {\n\t\tif (!this._injectorRegistry || !this.hasInjector(label)) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this._injectorRegistry.get(label)!;\n\t}\n\n\tpublic has(label: RegistryLabel): boolean {\n\t\treturn Boolean(this._widgetRegistry && this._widgetRegistry.has(label));\n\t}\n\n\tpublic hasInjector(label: RegistryLabel): boolean {\n\t\treturn Boolean(this._injectorRegistry && this._injectorRegistry.has(label));\n\t}\n}\n\nexport default Registry;\n","import { PropertyChangeRecord } from './interfaces';\nimport { WIDGET_BASE_TYPE } from './Registry';\n\nfunction isObjectOrArray(value: any): boolean {\n\treturn Object.prototype.toString.call(value) === '[object Object]' || Array.isArray(value);\n}\n\nexport function always(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: true,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function ignore(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: false,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function reference(previousProperty: any, newProperty: any): PropertyChangeRecord {\n\treturn {\n\t\tchanged: previousProperty !== newProperty,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function shallow(previousProperty: any, newProperty: any, depth = 0): PropertyChangeRecord {\n\tlet changed = false;\n\n\tconst validOldProperty = previousProperty && isObjectOrArray(previousProperty);\n\tconst validNewProperty = newProperty && isObjectOrArray(newProperty);\n\n\tif (!validOldProperty || !validNewProperty) {\n\t\treturn {\n\t\t\tchanged: true,\n\t\t\tvalue: newProperty\n\t\t};\n\t}\n\n\tconst previousKeys = Object.keys(previousProperty);\n\tconst newKeys = Object.keys(newProperty);\n\n\tif (previousKeys.length !== newKeys.length) {\n\t\tchanged = true;\n\t} else {\n\t\tchanged = newKeys.some((key) => {\n\t\t\tif (depth > 0) {\n\t\t\t\treturn auto(newProperty[key], previousProperty[key], depth - 1).changed;\n\t\t\t}\n\t\t\treturn newProperty[key] !== previousProperty[key];\n\t\t});\n\t}\n\treturn {\n\t\tchanged,\n\t\tvalue: newProperty\n\t};\n}\n\nexport function auto(previousProperty: any, newProperty: any, depth = 0): PropertyChangeRecord {\n\tlet result;\n\tif (typeof newProperty === 'function') {\n\t\tif (newProperty._type === WIDGET_BASE_TYPE) {\n\t\t\tresult = reference(previousProperty, newProperty);\n\t\t} else {\n\t\t\tresult = ignore(previousProperty, newProperty);\n\t\t}\n\t} else if (isObjectOrArray(newProperty)) {\n\t\tresult = shallow(previousProperty, newProperty, depth);\n\t} else {\n\t\tresult = reference(previousProperty, newProperty);\n\t}\n\treturn result;\n}\n","import { Map } from '../shim/Map';\nimport { Evented, EventObject } from '../core/Evented';\nimport { Constructor, InjectorFactory, InjectorItem, RegistryLabel, WidgetBaseInterface } from './interfaces';\nimport { Registry, RegistryEventObject, RegistryItem } from './Registry';\n\nexport type RegistryHandlerEventMap = {\n\tinvalidate: EventObject<'invalidate'>;\n};\n\nexport class RegistryHandler extends Evented<RegistryHandlerEventMap> {\n\tprivate _registry = new Registry();\n\tprivate _registryWidgetLabelMap: Map<Registry, RegistryLabel[]> = new Map();\n\tprivate _registryInjectorLabelMap: Map<Registry, RegistryLabel[]> = new Map();\n\tprotected baseRegistry!: Registry;\n\n\tconstructor() {\n\t\tsuper();\n\t\tthis.own(this._registry);\n\t\tconst destroy = () => {\n\t\t\tif (this.baseRegistry) {\n\t\t\t\tthis._registryWidgetLabelMap.delete(this.baseRegistry);\n\t\t\t\tthis._registryInjectorLabelMap.delete(this.baseRegistry);\n\t\t\t\tthis.baseRegistry = undefined as any;\n\t\t\t}\n\t\t};\n\t\tthis.own({ destroy });\n\t}\n\n\tpublic set base(baseRegistry: Registry) {\n\t\tif (this.baseRegistry) {\n\t\t\tthis._registryWidgetLabelMap.delete(this.baseRegistry);\n\t\t\tthis._registryInjectorLabelMap.delete(this.baseRegistry);\n\t\t}\n\t\tthis.baseRegistry = baseRegistry;\n\t}\n\n\tpublic get base(): Registry {\n\t\treturn this.baseRegistry;\n\t}\n\n\tpublic define(label: RegistryLabel, widget: RegistryItem): void {\n\t\tthis._registry.define(label, widget);\n\t}\n\n\tpublic defineInjector(label: RegistryLabel, injector: InjectorFactory): void {\n\t\tthis._registry.defineInjector(label, injector);\n\t}\n\n\tpublic has(label: RegistryLabel): boolean {\n\t\treturn this._registry.has(label) || Boolean(this.baseRegistry && this.baseRegistry.has(label));\n\t}\n\n\tpublic hasInjector(label: RegistryLabel): boolean {\n\t\treturn this._registry.hasInjector(label) || Boolean(this.baseRegistry && this.baseRegistry.hasInjector(label));\n\t}\n\n\tpublic get<T extends WidgetBaseInterface = WidgetBaseInterface>(\n\t\tlabel: RegistryLabel,\n\t\tglobalPrecedence: boolean = false\n\t): Constructor<T> | null {\n\t\treturn this._get(label, globalPrecedence, 'get', this._registryWidgetLabelMap);\n\t}\n\n\tpublic getInjector<T>(label: RegistryLabel, globalPrecedence: boolean = false): InjectorItem<T> | null {\n\t\treturn this._get(label, globalPrecedence, 'getInjector', this._registryInjectorLabelMap);\n\t}\n\n\tprivate _get(\n\t\tlabel: RegistryLabel,\n\t\tglobalPrecedence: boolean,\n\t\tgetFunctionName: 'getInjector' | 'get',\n\t\tlabelMap: Map<Registry, RegistryLabel[]>\n\t): any {\n\t\tconst registries = globalPrecedence ? [this.baseRegistry, this._registry] : [this._registry, this.baseRegistry];\n\t\tfor (let i = 0; i < registries.length; i++) {\n\t\t\tconst registry: any = registries[i];\n\t\t\tif (!registry) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst item = registry[getFunctionName](label);\n\t\t\tconst registeredLabels = labelMap.get(registry) || [];\n\t\t\tif (item) {\n\t\t\t\treturn item;\n\t\t\t} else if (registeredLabels.indexOf(label) === -1) {\n\t\t\t\tconst handle = registry.on(label, (event: RegistryEventObject) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.action === 'loaded' &&\n\t\t\t\t\t\t(this as any)[getFunctionName](label, globalPrecedence) === event.item\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.emit({ type: 'invalidate' });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.own(handle);\n\t\t\t\tlabelMap.set(registry, [...registeredLabels, label]);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport default RegistryHandler;\n","import global from '../shim/global';\nimport has from '../core/has';\nimport WeakMap from '../shim/WeakMap';\nimport Set from '../shim/Set';\nimport Map from '../shim/Map';\nimport { flat } from '../shim/array';\nimport {\n\tWNode,\n\tVNode,\n\tDNode,\n\tVNodeProperties,\n\tTransitionStrategy,\n\tSupportedClassName,\n\tDomVNode,\n\tLazyDefine,\n\tConstructor,\n\tRenderResult,\n\tWidgetBaseInterface,\n\tCallback,\n\tMiddlewareMap,\n\tWNodeFactory,\n\tOptionalWNodeFactory,\n\tUnionToIntersection,\n\tWidgetProperties,\n\tMiddlewareResultFactory,\n\tWidgetBaseTypes,\n\tRegistryLabel,\n\tDeferredVirtualProperties,\n\tDomOptions,\n\tDefaultChildrenWNodeFactory\n} from './interfaces';\nimport { Registry, isWidget, isWidgetBaseConstructor, isWidgetFunction, isWNodeFactory } from './Registry';\nimport { auto } from './diff';\nimport RegistryHandler from './RegistryHandler';\nimport { NodeHandler } from './NodeHandler';\n\ndeclare global {\n\tnamespace JSX {\n\t\ttype Element = WNode;\n\t\tinterface ElementAttributesProperty {\n\t\t\t__properties__: {};\n\t\t}\n\t\tinterface IntrinsicElements {\n\t\t\t[key: string]: VNodeProperties;\n\t\t}\n\t\tinterface ElementChildrenAttribute {\n\t\t\t__children__: {};\n\t\t}\n\t}\n}\n\nexport interface BaseNodeWrapper {\n\tid: string;\n\towningId: string;\n\tnode: WNode<any> | VNode;\n\tdomNode?: Node;\n\tdepth: number;\n\torder: number;\n\trequiresInsertBefore?: boolean;\n\thasPreviousSiblings?: boolean;\n\thasParentWNode?: boolean;\n\tnamespace?: string;\n\thasAnimations?: boolean;\n\tparentId: string;\n\tchildDomWrapperId?: string;\n}\n\nexport interface WNodeWrapper extends BaseNodeWrapper {\n\tnode: WNode<any>;\n\tkeys?: string[];\n\tinstance?: any;\n\tmergeNodes?: Node[];\n\tnodeHandlerCalled?: boolean;\n\tregistryItem?: Callback<any, any, any, RenderResult> | Constructor<any> | null;\n\tproperties: any;\n}\n\nexport interface WidgetMeta {\n\twidgetName: string;\n\tmountNode: HTMLElement;\n\tdirty: boolean;\n\tinvalidator: () => void;\n\tmiddleware?: any;\n\tmiddlewareIds: string[];\n\tregistryHandler?: RegistryHandler;\n\tregistry: Registry;\n\tproperties: any;\n\toriginalProperties: any;\n\tchildren?: DNode[];\n\trendering: boolean;\n\tnodeMap?: Map<string | number, HTMLElement>;\n\tdestroyMap?: Map<string, () => void>;\n\tdeferRefs: number;\n\tcustomDiffProperties?: Set<string>;\n\tcustomDiffMap?: Map<string, Map<string, (current: any, next: any) => any>>;\n\tpropertiesCalled: boolean;\n}\n\nexport interface WidgetData {\n\tonDetach: () => void;\n\tonAttach: () => void;\n\tdirty: boolean;\n\tnodeHandler: NodeHandler;\n\tinvalidate?: Function;\n\trendering: boolean;\n\tinputProperties: any;\n\tregistry: RegistryHandler;\n}\n\nexport interface VNodeWrapper extends BaseNodeWrapper {\n\tnode: VNode | DomVNode;\n\tmerged?: boolean;\n\tinserted?: boolean;\n\tdeferredProperties?: VNodeProperties;\n}\n\nexport type DNodeWrapper = VNodeWrapper | WNodeWrapper;\n\nexport interface MountOptions {\n\tsync: boolean;\n\tmerge: boolean;\n\ttransition?: TransitionStrategy;\n\tdomNode: HTMLElement | null;\n\tregistry: Registry;\n}\n\nexport interface Renderer {\n\tinvalidate(): void;\n\tmount(mountOptions?: Partial<MountOptions>): void;\n\tunmount(): void;\n}\n\ninterface ProcessItem {\n\tcurrent?: (WNodeWrapper | VNodeWrapper)[];\n\tnext?: (WNodeWrapper | VNodeWrapper)[];\n\tmeta: ProcessMeta;\n}\n\ninterface ProcessResult {\n\titem?: ProcessItem;\n\twidget?: AttachApplication | DetachApplication;\n\tdom?: ApplicationInstruction;\n}\n\ninterface ProcessMeta {\n\tmergeNodes?: Node[];\n\toldIndex?: number;\n\tnewIndex?: number;\n}\n\ninterface InvalidationQueueItem {\n\tid: string;\n\tdepth: number;\n\torder: number;\n}\n\ninterface Instruction {\n\tcurrent: undefined | DNodeWrapper;\n\tnext: undefined | DNodeWrapper;\n}\n\ninterface CreateWidgetInstruction {\n\tnext: WNodeWrapper;\n}\n\ninterface UpdateWidgetInstruction {\n\tcurrent: WNodeWrapper;\n\tnext: WNodeWrapper;\n}\n\ninterface RemoveWidgetInstruction {\n\tcurrent: WNodeWrapper;\n}\n\ninterface CreateDomInstruction {\n\tnext: VNodeWrapper;\n}\n\ninterface UpdateDomInstruction {\n\tcurrent: VNodeWrapper;\n\tnext: VNodeWrapper;\n}\n\ninterface RemoveDomInstruction {\n\tcurrent: VNodeWrapper;\n}\n\ninterface AttachApplication {\n\ttype: 'attach';\n\tid: string;\n\tinstance?: WidgetBaseInterface;\n\tattached?: boolean;\n}\n\ninterface DetachApplication {\n\ttype: 'detach';\n\tcurrent: WNodeWrapper;\n\tinstance?: WidgetBaseInterface;\n}\n\ninterface CreateDomApplication {\n\ttype: 'create';\n\tcurrent?: VNodeWrapper;\n\tnext: VNodeWrapper;\n\tparentDomNode: Node;\n}\n\ninterface DeleteDomApplication {\n\ttype: 'delete';\n\tcurrent: VNodeWrapper;\n}\n\ninterface UpdateDomApplication {\n\ttype: 'update';\n\tcurrent: VNodeWrapper;\n\tnext: VNodeWrapper;\n}\n\ninterface PreviousProperties {\n\tproperties: any;\n\tattributes?: any;\n\tevents?: any;\n}\n\ntype ApplicationInstruction =\n\t| CreateDomApplication\n\t| UpdateDomApplication\n\t| DeleteDomApplication\n\t| Required<AttachApplication>\n\t| DetachApplication;\n\nconst EMPTY_ARRAY: DNodeWrapper[] = [];\nconst nodeOperations = ['focus', 'blur', 'scrollIntoView', 'click'];\nconst NAMESPACE_W3 = 'http://www.w3.org/';\nconst NAMESPACE_SVG = NAMESPACE_W3 + '2000/svg';\nconst NAMESPACE_XLINK = NAMESPACE_W3 + '1999/xlink';\nconst WNODE = '__WNODE_TYPE';\nconst VNODE = '__VNODE_TYPE';\nconst DOMVNODE = '__DOMVNODE_TYPE';\n\n// @ts-ignore\nconst scope = typeof __DOJO_SCOPE === 'string' ? __DOJO_SCOPE : 'dojo_scope';\n\nif (!global[scope]) {\n\tglobal[scope] = {};\n}\n\nexport function setRendering(value: boolean) {\n\tglobal[scope].rendering = value;\n}\n\nexport function incrementBlockCount() {\n\tconst blocksPending = global[scope].blocksPending || 0;\n\tglobal[scope].blocksPending = blocksPending + 1;\n}\n\nexport function decrementBlockCount() {\n\tconst blocksPending = global[scope].blocksPending || 0;\n\tglobal[scope].blocksPending = blocksPending - 1;\n}\n\nexport function isTextNode(item: any): item is Text {\n\treturn item && item.nodeType === 3;\n}\n\nfunction isLazyDefine(item: any): item is LazyDefine<any> {\n\treturn Boolean(item && item.label);\n}\n\nfunction isWNodeWrapper(child: DNodeWrapper): child is WNodeWrapper {\n\treturn child && isWNode(child.node);\n}\n\nfunction isVNodeWrapper(child?: DNodeWrapper | null): child is VNodeWrapper {\n\treturn !!child && isVNode(child.node);\n}\n\nfunction isVirtualWrapper(child?: DNodeWrapper | null): boolean {\n\treturn isVNodeWrapper(child) && child.node.tag === 'virtual';\n}\n\nfunction isBodyWrapper(wrapper?: DNodeWrapper): boolean {\n\treturn isVNodeWrapper(wrapper) && wrapper.node.tag === 'body';\n}\n\nfunction isHeadWrapper(wrapper?: DNodeWrapper): boolean {\n\treturn isVNodeWrapper(wrapper) && wrapper.node.tag === 'head';\n}\n\nfunction isSpecialWrapper(wrapper?: DNodeWrapper): boolean {\n\treturn isHeadWrapper(wrapper) || isBodyWrapper(wrapper) || isVirtualWrapper(wrapper);\n}\n\nfunction isAttachApplication(value: any): value is AttachApplication | DetachApplication {\n\treturn !!value.type;\n}\n\nexport function isWNode<W extends WidgetBaseTypes = any>(child: any): child is WNode<W> {\n\treturn Boolean(child && child !== true && typeof child !== 'string' && child.type === WNODE);\n}\n\nexport function isVNode(child: DNode): child is VNode {\n\treturn Boolean(\n\t\tchild && child !== true && typeof child !== 'string' && (child.type === VNODE || child.type === DOMVNODE)\n\t);\n}\n\nexport function isDomVNode(child: DNode): child is DomVNode {\n\treturn Boolean(child && child !== true && typeof child !== 'string' && child.type === DOMVNODE);\n}\n\nexport function isElementNode(value: any): value is Element {\n\treturn !!value.tagName;\n}\n\nfunction toTextVNode(data: any): VNode {\n\treturn {\n\t\ttag: '',\n\t\tproperties: {},\n\t\tchildren: undefined,\n\t\ttext: `${data}`,\n\t\ttype: VNODE\n\t};\n}\n\nfunction updateAttributes(\n\tdomNode: Element,\n\tpreviousAttributes: { [index: string]: string | undefined },\n\tattributes: { [index: string]: string | undefined },\n\tnamespace?: string\n) {\n\tconst attrNames = Object.keys(attributes);\n\tconst attrCount = attrNames.length;\n\tfor (let i = 0; i < attrCount; i++) {\n\t\tconst attrName = attrNames[i];\n\t\tconst attrValue = attributes[attrName];\n\t\tconst previousAttrValue = previousAttributes[attrName];\n\t\tif (attrValue !== previousAttrValue) {\n\t\t\tupdateAttribute(domNode, attrName, attrValue, namespace);\n\t\t}\n\t}\n}\n\n/**\n * Wrapper function for calls to create a widget.\n */\nexport function w<W extends WidgetBaseTypes>(\n\tnode: WNode<W>,\n\tproperties: Partial<W['properties']>,\n\tchildren?: W['properties'] extends { __children__: any } ? W['properties']['__children__'] : W['children']\n): WNode<W>;\nexport function w<W extends WidgetBaseTypes>(\n\twidgetConstructor: Constructor<W> | RegistryLabel | LazyDefine<W>,\n\tproperties: W['properties'],\n\tchildren?: W['children']\n): WNode<W>;\nexport function w<W extends WNodeFactory<any>>(\n\twidgetConstructor: W,\n\tproperties: W['properties'],\n\tchildren: W['children'] extends any[] ? W['children'] : [W['children']]\n): WNode<W>;\nexport function w<W extends DefaultChildrenWNodeFactory<any>>(\n\twidgetConstructor: W,\n\tproperties: W['properties'],\n\tchildren?: W['children']\n): WNode<W>;\nexport function w<W extends OptionalWNodeFactory<any>>(\n\twidgetConstructor: W,\n\tproperties: W['properties'],\n\tchildren?: W['children'] extends any[] ? W['children'] : [W['children']]\n): WNode<W>;\nexport function w<W extends WidgetBaseTypes>(\n\twidgetConstructorOrNode:\n\t\t| Constructor<W>\n\t\t| RegistryLabel\n\t\t| WNodeFactory<W>\n\t\t| WNode<W>\n\t\t| LazyDefine<W>\n\t\t| Callback<any, any, any, RenderResult>,\n\tproperties: W['properties'],\n\tchildren?: any\n): WNode<W> {\n\tif ((properties as any).__children__) {\n\t\tdelete (properties as any).__children__;\n\t}\n\n\tif (isWNodeFactory<W>(widgetConstructorOrNode)) {\n\t\treturn widgetConstructorOrNode(properties, children);\n\t}\n\n\tif (isWNode<W>(widgetConstructorOrNode)) {\n\t\tproperties = { ...(widgetConstructorOrNode.properties as any), ...(properties as any) };\n\t\tchildren = children ? children : widgetConstructorOrNode.children;\n\t\twidgetConstructorOrNode = widgetConstructorOrNode.widgetConstructor;\n\t}\n\n\treturn {\n\t\tchildren: children || [],\n\t\twidgetConstructor: widgetConstructorOrNode,\n\t\tproperties,\n\t\ttype: WNODE\n\t};\n}\n\n/**\n * Wrapper function for calls to create VNodes.\n */\nexport function v(node: VNode, properties: VNodeProperties, children: undefined | DNode[]): VNode;\nexport function v(node: VNode, properties: VNodeProperties): VNode;\nexport function v(tag: string, children: undefined | DNode[]): VNode;\nexport function v<K extends keyof HTMLElementTagNameMap>(\n\ttag: K,\n\tproperties: DeferredVirtualProperties | VNodeProperties<HTMLElementTagNameMap[K]>,\n\tchildren?: DNode[]\n): VNode;\nexport function v(tag: string, properties: DeferredVirtualProperties | VNodeProperties, children?: DNode[]): VNode;\nexport function v(tag: string): VNode;\nexport function v(\n\ttag: string | VNode,\n\tpropertiesOrChildren: VNodeProperties | DeferredVirtualProperties | DNode[] = {},\n\tchildren: undefined | DNode[] = undefined\n): VNode {\n\tlet properties: VNodeProperties | DeferredVirtualProperties = propertiesOrChildren;\n\tlet deferredPropertiesCallback;\n\n\tif (typeof (tag as any).tag === 'function') {\n\t\treturn (tag as any).tag(properties, children);\n\t}\n\n\tif (Array.isArray(propertiesOrChildren)) {\n\t\tchildren = propertiesOrChildren;\n\t\tproperties = {};\n\t}\n\n\tif (typeof properties === 'function') {\n\t\tdeferredPropertiesCallback = properties;\n\t\tproperties = {};\n\t}\n\n\tif (isVNode(tag)) {\n\t\tlet { classes = [], styles = {}, ...newProperties } = properties;\n\t\tlet { classes: nodeClasses = [], styles: nodeStyles = {}, ...nodeProperties } = tag.properties;\n\t\tnodeClasses = Array.isArray(nodeClasses) ? nodeClasses : [nodeClasses];\n\t\tclasses = Array.isArray(classes) ? classes : [classes];\n\t\tstyles = { ...nodeStyles, ...styles };\n\t\tproperties = { ...nodeProperties, ...newProperties, classes: [...nodeClasses, ...classes], styles };\n\t\tchildren = children ? children : tag.children;\n\t\ttag = tag.tag;\n\t}\n\n\treturn {\n\t\ttag,\n\t\tdeferredPropertiesCallback,\n\t\tchildren,\n\t\tproperties,\n\t\ttype: VNODE\n\t};\n}\n\n/**\n * Create a VNode for an existing DOM Node.\n */\nexport function dom(\n\t{ node, attrs = {}, props = {}, on = {}, diffType = 'none', onAttach }: DomOptions,\n\tchildren?: DNode[]\n): DomVNode {\n\treturn {\n\t\ttag: isElementNode(node) ? node.tagName.toLowerCase() : '',\n\t\tproperties: props,\n\t\tattributes: attrs,\n\t\tevents: on,\n\t\tchildren,\n\t\ttype: DOMVNODE,\n\t\tdomNode: node,\n\t\ttext: isElementNode(node) ? undefined : node.data,\n\t\tdiffType,\n\t\tonAttach\n\t};\n}\n\nexport const REGISTRY_ITEM = '__registry_item';\n\nexport class FromRegistry<P> {\n\tstatic type = REGISTRY_ITEM;\n\t/* tslint:disable-next-line:variable-name */\n\t__properties__: P = {} as P;\n\tname: string | undefined;\n}\n\nexport function fromRegistry<P>(tag: string): Constructor<FromRegistry<P>> {\n\treturn class extends FromRegistry<P> {\n\t\tproperties: P = {} as P;\n\t\tstatic type = REGISTRY_ITEM;\n\t\tname = tag;\n\t};\n}\n\nexport function tsx(tag: any, properties = {}, ...children: any[]): DNode {\n\tchildren = flat(children, Infinity);\n\tproperties = properties === null ? {} : properties;\n\tif (typeof tag === 'string') {\n\t\treturn v(tag, properties, children);\n\t} else if (tag.type === 'registry' && (properties as any).__autoRegistryItem) {\n\t\tconst name = (properties as any).__autoRegistryItem;\n\t\tdelete (properties as any).__autoRegistryItem;\n\t\treturn w(name, properties, children);\n\t} else if (tag.type === REGISTRY_ITEM) {\n\t\tconst registryItem = new tag();\n\t\treturn w(registryItem.name, properties, children);\n\t} else {\n\t\treturn w(tag, properties, children);\n\t}\n}\n\nexport function propertiesDiff(current: any, next: any, invalidator: () => void, ignoreProperties: string[]) {\n\tconst propertyNames = [...Object.keys(current), ...Object.keys(next)];\n\tfor (let i = 0; i < propertyNames.length; i++) {\n\t\tif (ignoreProperties.indexOf(propertyNames[i]) > -1) {\n\t\t\tcontinue;\n\t\t}\n\t\tconst result = auto(current[propertyNames[i]], next[propertyNames[i]]);\n\t\tif (result.changed) {\n\t\t\tinvalidator();\n\t\t\tbreak;\n\t\t}\n\t\tignoreProperties.push(propertyNames[i]);\n\t}\n}\n\nfunction buildPreviousProperties(domNode: any, current: VNodeWrapper) {\n\tconst {\n\t\tnode: { diffType, properties, attributes }\n\t} = current;\n\tif (!diffType || diffType === 'vdom') {\n\t\treturn {\n\t\t\tproperties: current.deferredProperties\n\t\t\t\t? { ...current.deferredProperties, ...current.node.properties }\n\t\t\t\t: current.node.properties,\n\t\t\tattributes: current.node.attributes,\n\t\t\tevents: current.node.events\n\t\t};\n\t} else if (diffType === 'none') {\n\t\treturn {\n\t\t\tproperties: {},\n\t\t\tattributes: current.node.attributes ? {} : undefined,\n\t\t\tevents: current.node.events\n\t\t};\n\t}\n\tlet newProperties: any = {\n\t\tproperties: {}\n\t};\n\tif (attributes) {\n\t\tnewProperties.attributes = {};\n\t\tnewProperties.events = current.node.events;\n\t\tObject.keys(properties).forEach((propName) => {\n\t\t\tnewProperties.properties[propName] = domNode[propName];\n\t\t});\n\t\tObject.keys(attributes).forEach((attrName) => {\n\t\t\tnewProperties.attributes[attrName] = domNode.getAttribute(attrName);\n\t\t});\n\t\treturn newProperties;\n\t}\n\tnewProperties.properties = Object.keys(properties).reduce(\n\t\t(props, property) => {\n\t\t\tprops[property] = domNode.getAttribute(property) || domNode[property];\n\t\t\treturn props;\n\t\t},\n\t\t{} as any\n\t);\n\treturn newProperties;\n}\n\nfunction checkDistinguishable(wrappers: DNodeWrapper[], index: number, parentWNodeWrapper?: WNodeWrapper) {\n\tconst wrapperToCheck = wrappers[index];\n\tif (isVNodeWrapper(wrapperToCheck) && !wrapperToCheck.node.tag) {\n\t\treturn;\n\t}\n\tconst { key } = wrapperToCheck.node.properties;\n\tlet parentName = 'unknown';\n\tif (parentWNodeWrapper) {\n\t\tconst {\n\t\t\tnode: { widgetConstructor }\n\t\t} = parentWNodeWrapper;\n\t\tparentName = (widgetConstructor as any).name || 'unknown';\n\t}\n\n\tif (key === undefined || key === null) {\n\t\tfor (let i = 0; i < wrappers.length; i++) {\n\t\t\tif (i !== index) {\n\t\t\t\tconst wrapper = wrappers[i];\n\t\t\t\tif (same(wrapper, wrapperToCheck)) {\n\t\t\t\t\tlet nodeIdentifier: string;\n\t\t\t\t\tif (isWNodeWrapper(wrapper)) {\n\t\t\t\t\t\tnodeIdentifier = (wrapper.node.widgetConstructor as any).name || 'unknown';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnodeIdentifier = wrapper.node.tag;\n\t\t\t\t\t}\n\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`A widget (${parentName}) has had a child added or removed, but they were not able to uniquely identified. It is recommended to provide a unique 'key' property when using the same widget or element (${nodeIdentifier}) multiple times as siblings`\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction same(dnode1: DNodeWrapper, dnode2: DNodeWrapper): boolean {\n\tif (isVNodeWrapper(dnode1) && isVNodeWrapper(dnode2)) {\n\t\tif (isDomVNode(dnode1.node) && isDomVNode(dnode2.node)) {\n\t\t\tif (dnode1.node.domNode !== dnode2.node.domNode) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif (dnode1.node.tag !== dnode2.node.tag) {\n\t\t\treturn false;\n\t\t}\n\t\tif (dnode1.node.properties.key !== dnode2.node.properties.key) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t} else if (isWNodeWrapper(dnode1) && isWNodeWrapper(dnode2)) {\n\t\tconst widgetConstructor1 = dnode1.registryItem || dnode1.node.widgetConstructor;\n\t\tconst widgetConstructor2 = dnode2.registryItem || dnode2.node.widgetConstructor;\n\t\tconst {\n\t\t\tnode: { properties: props1 }\n\t\t} = dnode1;\n\t\tconst {\n\t\t\tnode: { properties: props2 }\n\t\t} = dnode2;\n\t\tif (dnode1.instance === undefined && typeof widgetConstructor2 === 'string') {\n\t\t\treturn false;\n\t\t}\n\t\tif (widgetConstructor1 !== widgetConstructor2) {\n\t\t\treturn false;\n\t\t}\n\t\tif (props1.key !== props2.key) {\n\t\t\treturn false;\n\t\t}\n\t\tif (!((widgetConstructor1 as any).keys || []).every((key: string) => props1[key] === props2[key])) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\treturn false;\n}\n\nfunction findIndexOfChild(children: DNodeWrapper[], sameAs: DNodeWrapper, start: number) {\n\tfor (let i = start; i < children.length; i++) {\n\t\tif (same(children[i], sameAs)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\nfunction createClassPropValue(classes: SupportedClassName | SupportedClassName[] = []) {\n\tlet classNames = '';\n\tif (Array.isArray(classes)) {\n\t\tfor (let i = 0; i < classes.length; i++) {\n\t\t\tlet className = classes[i];\n\t\t\tif (className && className !== true) {\n\t\t\t\tclassNames = classNames ? `${classNames} ${className}` : className;\n\t\t\t}\n\t\t}\n\t\treturn classNames;\n\t}\n\tif (classes && classes !== true) {\n\t\tclassNames = classes;\n\t}\n\treturn classNames;\n}\n\nfunction updateAttribute(domNode: Element, attrName: string, attrValue: string | undefined, namespace?: string) {\n\tif (namespace === NAMESPACE_SVG && attrName === 'href' && attrValue) {\n\t\tdomNode.setAttributeNS(NAMESPACE_XLINK, attrName, attrValue);\n\t} else if ((attrName === 'role' && attrValue === '') || attrValue === undefined) {\n\t\tdomNode.removeAttribute(attrName);\n\t} else {\n\t\tdomNode.setAttribute(attrName, attrValue);\n\t}\n}\n\nfunction arrayFrom(arr: any) {\n\treturn Array.prototype.slice.call(arr);\n}\n\nfunction createFactory(callback: any, middlewares: any, key?: any): any {\n\tconst factory = (properties: any, children?: any) => {\n\t\tif (properties) {\n\t\t\tconst result = w(callback, properties, children);\n\t\t\tcallback.isWidget = true;\n\t\t\tcallback.middlewares = middlewares;\n\t\t\treturn result;\n\t\t}\n\t\treturn {\n\t\t\tmiddlewares,\n\t\t\tcallback\n\t\t};\n\t};\n\tconst keys = Object.keys(middlewares).reduce((keys: string[], middlewareName: any) => {\n\t\tconst middleware = middlewares[middlewareName];\n\t\tif (middleware.keys) {\n\t\t\tkeys = [...keys, ...middleware.keys];\n\t\t}\n\t\treturn keys;\n\t}, key ? [key] : []);\n\n\tcallback.keys = keys;\n\tfactory.keys = keys;\n\tfactory.isFactory = true;\n\treturn factory;\n}\n\ntype KeysMatching<T, V> = { [K in keyof T]: T[K] extends V ? K : never }[keyof T];\n\nexport function create<T extends MiddlewareMap, MiddlewareProps = ReturnType<T[keyof T]>['properties']>(\n\tmiddlewares: T = {} as T\n) {\n\tfunction properties<Props>() {\n\t\tfunction returns<ReturnValue>(\n\t\t\tcallback: Callback<WidgetProperties & Props & UnionToIntersection<MiddlewareProps>, DNode[], T, ReturnValue>\n\t\t): ReturnValue extends RenderResult\n\t\t\t? DefaultChildrenWNodeFactory<{\n\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\tchildren: DNode[];\n\t\t\t  }>\n\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\tDNode[],\n\t\t\t\t\tT,\n\t\t\t\t\tReturnValue\n\t\t\t  > {\n\t\t\treturn createFactory(callback, middlewares);\n\t\t}\n\n\t\tfunction key(key: KeysMatching<Props, string | number>) {\n\t\t\tfunction returns<ReturnValue>(\n\t\t\t\tcallback: Callback<\n\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\tDNode[],\n\t\t\t\t\tT,\n\t\t\t\t\tReturnValue\n\t\t\t\t>\n\t\t\t): ReturnValue extends RenderResult\n\t\t\t\t? DefaultChildrenWNodeFactory<{\n\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\tchildren: DNode[];\n\t\t\t\t  }>\n\t\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\tDNode[],\n\t\t\t\t\t\tT,\n\t\t\t\t\t\tReturnValue\n\t\t\t\t  > {\n\t\t\t\treturn createFactory(callback, middlewares, key);\n\t\t\t}\n\t\t\treturn returns;\n\t\t}\n\n\t\tfunction children<Children>() {\n\t\t\tfunction returns<ReturnValue>(\n\t\t\t\tcallback: Callback<\n\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\tChildren,\n\t\t\t\t\tT,\n\t\t\t\t\tReturnValue\n\t\t\t\t>\n\t\t\t): ReturnValue extends RenderResult\n\t\t\t\t? UnionToIntersection<Children> extends undefined\n\t\t\t\t\t? OptionalWNodeFactory<{\n\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\tchildren: NonNullable<Children>;\n\t\t\t\t\t  }>\n\t\t\t\t\t: WNodeFactory<{\n\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\tchildren: Children;\n\t\t\t\t\t  }>\n\t\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\tChildren,\n\t\t\t\t\t\tT,\n\t\t\t\t\t\tReturnValue\n\t\t\t\t  > {\n\t\t\t\treturn createFactory(callback, middlewares);\n\t\t\t}\n\n\t\t\tfunction key(key: KeysMatching<Props, string | number>) {\n\t\t\t\tfunction returns<ReturnValue>(\n\t\t\t\t\tcallback: Callback<\n\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\tChildren,\n\t\t\t\t\t\tT,\n\t\t\t\t\t\tReturnValue\n\t\t\t\t\t>\n\t\t\t\t): ReturnValue extends RenderResult\n\t\t\t\t\t? UnionToIntersection<Children> extends undefined\n\t\t\t\t\t\t? OptionalWNodeFactory<{\n\t\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\t\tchildren: NonNullable<Children>;\n\t\t\t\t\t\t  }>\n\t\t\t\t\t\t: WNodeFactory<{\n\t\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\t\tchildren: Children;\n\t\t\t\t\t\t  }>\n\t\t\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\t\tChildren,\n\t\t\t\t\t\t\tT,\n\t\t\t\t\t\t\tReturnValue\n\t\t\t\t\t  > {\n\t\t\t\t\treturn createFactory(callback, middlewares, key);\n\t\t\t\t}\n\t\t\t\treturn returns;\n\t\t\t}\n\t\t\treturns.key = key;\n\t\t\treturn returns;\n\t\t}\n\t\treturns.children = children;\n\t\treturns.key = key;\n\t\treturn returns;\n\t}\n\n\tfunction children<Children>() {\n\t\tfunction properties<Props>() {\n\t\t\tfunction returns<ReturnValue>(\n\t\t\t\tcallback: Callback<\n\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\tChildren,\n\t\t\t\t\tT,\n\t\t\t\t\tReturnValue\n\t\t\t\t>\n\t\t\t): ReturnValue extends RenderResult\n\t\t\t\t? UnionToIntersection<Children> extends undefined\n\t\t\t\t\t? OptionalWNodeFactory<{\n\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\tchildren: NonNullable<Children>;\n\t\t\t\t\t  }>\n\t\t\t\t\t: WNodeFactory<{\n\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\tchildren: Children;\n\t\t\t\t\t  }>\n\t\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\tChildren,\n\t\t\t\t\t\tT,\n\t\t\t\t\t\tReturnValue\n\t\t\t\t  > {\n\t\t\t\treturn createFactory(callback, middlewares);\n\t\t\t}\n\t\t\tfunction key(key: KeysMatching<Props, string | number>) {\n\t\t\t\tfunction returns<ReturnValue>(\n\t\t\t\t\tcallback: Callback<\n\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\tChildren,\n\t\t\t\t\t\tT,\n\t\t\t\t\t\tReturnValue\n\t\t\t\t\t>\n\t\t\t\t): ReturnValue extends RenderResult\n\t\t\t\t\t? UnionToIntersection<Children> extends undefined\n\t\t\t\t\t\t? OptionalWNodeFactory<{\n\t\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\t\tchildren: NonNullable<Children>;\n\t\t\t\t\t\t  }>\n\t\t\t\t\t\t: WNodeFactory<{\n\t\t\t\t\t\t\t\tproperties: Props & WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\t\t\tchildren: Children;\n\t\t\t\t\t\t  }>\n\t\t\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\t\t\tWidgetProperties & Props & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\t\t\tChildren,\n\t\t\t\t\t\t\tT,\n\t\t\t\t\t\t\tReturnValue\n\t\t\t\t\t  > {\n\t\t\t\t\treturn createFactory(callback, middlewares, key);\n\t\t\t\t}\n\t\t\t\treturn returns;\n\t\t\t}\n\t\t\treturns.key = key;\n\t\t\treturn returns;\n\t\t}\n\n\t\tfunction returns<ReturnValue>(\n\t\t\tcallback: Callback<WidgetProperties & UnionToIntersection<MiddlewareProps>, Children, T, ReturnValue>\n\t\t): ReturnValue extends RenderResult\n\t\t\t? UnionToIntersection<Children> extends undefined\n\t\t\t\t? OptionalWNodeFactory<{\n\t\t\t\t\t\tproperties: WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\tchildren: NonNullable<Children>;\n\t\t\t\t  }>\n\t\t\t\t: WNodeFactory<{\n\t\t\t\t\t\tproperties: WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\t\t\tchildren: Children;\n\t\t\t\t  }>\n\t\t\t: MiddlewareResultFactory<\n\t\t\t\t\tWidgetProperties & UnionToIntersection<MiddlewareProps>,\n\t\t\t\t\tNonNullable<Children>,\n\t\t\t\t\tT,\n\t\t\t\t\tReturnValue\n\t\t\t  > {\n\t\t\treturn createFactory(callback, middlewares);\n\t\t}\n\t\treturns.properties = properties;\n\t\treturn returns;\n\t}\n\n\tfunction returns<ReturnValue>(\n\t\tcallback: Callback<WidgetProperties & UnionToIntersection<MiddlewareProps>, DNode[], T, ReturnValue>\n\t): ReturnValue extends RenderResult\n\t\t? DefaultChildrenWNodeFactory<{\n\t\t\t\tproperties: WidgetProperties & UnionToIntersection<MiddlewareProps>;\n\t\t\t\tchildren: DNode[];\n\t\t  }>\n\t\t: MiddlewareResultFactory<WidgetProperties & UnionToIntersection<MiddlewareProps>, DNode[], T, ReturnValue> {\n\t\treturn createFactory(callback, middlewares);\n\t}\n\treturns.children = children;\n\treturns.properties = properties;\n\treturn returns;\n}\n\nconst factory = create();\n\nfunction wrapNodes(renderer: () => RenderResult) {\n\tconst result = renderer();\n\tconst isWNodeWrapper = isWNode(result);\n\tconst callback = () => {\n\t\treturn result;\n\t};\n\tcallback.isWNodeWrapper = isWNodeWrapper;\n\treturn factory(callback);\n}\n\nexport const widgetInstanceMap = new WeakMap<WidgetBaseInterface, WidgetData>();\nconst widgetMetaMap = new Map<string, WidgetMeta>();\nconst requestedDomNodes = new Set();\nlet wrapperId = 0;\nlet metaId = 0;\n\nfunction addNodeToMap(id: string, key: string | number, node: HTMLElement) {\n\tconst widgetMeta = widgetMetaMap.get(id);\n\tif (widgetMeta) {\n\t\twidgetMeta.nodeMap = widgetMeta.nodeMap || new Map();\n\t\twidgetMeta.nodeMap.set(key, node);\n\t\tif (requestedDomNodes.has(`${id}-${key}`)) {\n\t\t\twidgetMeta.invalidator();\n\t\t\trequestedDomNodes.delete(`${id}-${key}`);\n\t\t}\n\t}\n}\n\nfunction destroyHandles(meta: WidgetMeta) {\n\tconst { destroyMap, middlewareIds } = meta;\n\tif (!destroyMap) {\n\t\treturn;\n\t}\n\tfor (let i = 0; i < middlewareIds.length; i++) {\n\t\tconst id = middlewareIds[i];\n\t\tconst destroy = destroyMap.get(id);\n\t\tdestroy && destroy();\n\t\tdestroyMap.delete(id);\n\t\tif (destroyMap.size === 0) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tdestroyMap.clear();\n}\n\nfunction runDiffs(meta: WidgetMeta, current: any, next: any) {\n\tlet customProperties: any = {};\n\tmeta.customDiffMap = meta.customDiffMap || new Map();\n\tif (meta.customDiffMap.size) {\n\t\tmeta.customDiffMap.forEach((diffMap) => {\n\t\t\tdiffMap.forEach((diff, propertyName) => {\n\t\t\t\tconst result = diff({ ...current }, { ...next });\n\t\t\t\tif (result) {\n\t\t\t\t\tcustomProperties[propertyName] = result;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\treturn customProperties;\n}\n\nexport const invalidator = factory(({ id }) => {\n\tconst [widgetId] = id.split('-');\n\treturn () => {\n\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\tif (widgetMeta) {\n\t\t\treturn widgetMeta.invalidator();\n\t\t}\n\t};\n});\n\nexport const node = factory(({ id }) => {\n\treturn {\n\t\tget(key: string | number): HTMLElement | null {\n\t\t\tconst [widgetId] = id.split('-');\n\t\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\t\tif (widgetMeta) {\n\t\t\t\twidgetMeta.nodeMap = widgetMeta.nodeMap || new Map();\n\t\t\t\tconst mountNode = widgetMeta.mountNode;\n\t\t\t\tconst node = widgetMeta.nodeMap.get(key);\n\t\t\t\tif (\n\t\t\t\t\tnode &&\n\t\t\t\t\t(mountNode.contains(node) ||\n\t\t\t\t\t\t(global.document.body !== mountNode && global.document.body.contains(node)))\n\t\t\t\t) {\n\t\t\t\t\treturn node;\n\t\t\t\t}\n\t\t\t\trequestedDomNodes.add(`${widgetId}-${key}`);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n});\n\nexport const diffProperty = factory(({ id }) => {\n\tfunction callback<T extends (...args: any) => any, K extends keyof ReturnType<T>>(\n\t\tproperty: K,\n\t\tproperties: T,\n\t\tdiff: (current: ReturnType<T>, next: ReturnType<T>) => void | ReturnType<T>[K]\n\t): void;\n\tfunction callback(propertyName: string, diff: (current: any, next: any) => void): void;\n\tfunction callback(propertyName: string, propertiesOrDiff: any, diff?: any) {\n\t\tconst [widgetId] = id.split('-');\n\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\tif (!diff) {\n\t\t\tdiff = propertiesOrDiff;\n\t\t}\n\t\tif (widgetMeta) {\n\t\t\twidgetMeta.customDiffMap = widgetMeta.customDiffMap || new Map();\n\t\t\twidgetMeta.customDiffProperties = widgetMeta.customDiffProperties || new Set();\n\t\t\tconst propertyDiffMap = widgetMeta.customDiffMap.get(id) || new Map();\n\t\t\tif (!propertyDiffMap.has(propertyName)) {\n\t\t\t\tconst result = diff({}, widgetMeta.originalProperties);\n\t\t\t\tif (result !== undefined) {\n\t\t\t\t\tif (has('dojo-debug')) {\n\t\t\t\t\t\tif (widgetMeta.propertiesCalled) {\n\t\t\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t\t\t`Calling \"propertyDiff\" middleware after accessing properties in \"${\n\t\t\t\t\t\t\t\t\twidgetMeta.widgetName\n\t\t\t\t\t\t\t\t}\", can result in referencing stale properties.`\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twidgetMeta.properties = { ...widgetMeta.properties, [propertyName]: result };\n\t\t\t\t}\n\t\t\t\tpropertyDiffMap.set(propertyName, diff);\n\t\t\t\twidgetMeta.customDiffProperties.add(propertyName);\n\t\t\t}\n\t\t\twidgetMeta.customDiffMap.set(id, propertyDiffMap);\n\t\t}\n\t}\n\n\treturn callback;\n});\n\nexport const destroy = factory(({ id }) => {\n\treturn (destroyFunction: () => void): void => {\n\t\tconst [widgetId] = id.split('-');\n\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\tif (widgetMeta) {\n\t\t\twidgetMeta.destroyMap = widgetMeta.destroyMap || new Map();\n\t\t\tif (!widgetMeta.destroyMap.has(id)) {\n\t\t\t\twidgetMeta.destroyMap.set(id, destroyFunction);\n\t\t\t}\n\t\t}\n\t};\n});\n\nexport const getRegistry = factory(({ id }) => {\n\tconst [widgetId] = id.split('-');\n\treturn (): RegistryHandler | null => {\n\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\tif (widgetMeta) {\n\t\t\tif (!widgetMeta.registryHandler) {\n\t\t\t\twidgetMeta.registryHandler = new RegistryHandler();\n\t\t\t\twidgetMeta.registryHandler.base = widgetMeta.registry;\n\t\t\t\twidgetMeta.registryHandler.on('invalidate', widgetMeta.invalidator);\n\t\t\t}\n\t\t\twidgetMeta.registryHandler = widgetMeta.registryHandler || new RegistryHandler();\n\t\t\treturn widgetMeta.registryHandler;\n\t\t}\n\t\treturn null;\n\t};\n});\n\nexport const defer = factory(({ id }) => {\n\tconst [widgetId] = id.split('-');\n\tlet isDeferred = false;\n\treturn {\n\t\tpause() {\n\t\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\t\tif (!isDeferred && widgetMeta) {\n\t\t\t\twidgetMeta.deferRefs = widgetMeta.deferRefs + 1;\n\t\t\t\tisDeferred = true;\n\t\t\t}\n\t\t},\n\t\tresume() {\n\t\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\t\tif (isDeferred && widgetMeta) {\n\t\t\t\twidgetMeta.deferRefs = widgetMeta.deferRefs - 1;\n\t\t\t\tisDeferred = false;\n\t\t\t}\n\t\t}\n\t};\n});\n\nfunction wrapFunctionProperties(id: string, properties: any) {\n\tconst props: any = {};\n\tconst propertyNames = Object.keys(properties);\n\tfor (let i = 0; i < propertyNames.length; i++) {\n\t\tconst propertyName = propertyNames[i];\n\t\tif (typeof properties[propertyName] === 'function') {\n\t\t\tprops[propertyName] = function WrappedProperty(...args: any[]) {\n\t\t\t\tconst widgetMeta = widgetMetaMap.get(id);\n\t\t\t\tif (widgetMeta) {\n\t\t\t\t\treturn widgetMeta.originalProperties[propertyName](...args);\n\t\t\t\t}\n\t\t\t\treturn properties[propertyName](...args);\n\t\t\t};\n\t\t\tprops[propertyName].unwrap = () => {\n\t\t\t\tconst widgetMeta = widgetMetaMap.get(id);\n\t\t\t\tif (widgetMeta) {\n\t\t\t\t\treturn widgetMeta.originalProperties[propertyName];\n\t\t\t\t}\n\t\t\t\treturn properties[propertyName];\n\t\t\t};\n\t\t} else {\n\t\t\tprops[propertyName] = properties[propertyName];\n\t\t}\n\t}\n\treturn props;\n}\n\nexport function renderer(renderer: () => RenderResult): Renderer {\n\tlet _mountOptions: MountOptions & { domNode: HTMLElement } = {\n\t\tsync: false,\n\t\tmerge: true,\n\t\ttransition: undefined,\n\t\tdomNode: global.document.body,\n\t\tregistry: new Registry()\n\t};\n\tlet _invalidationQueue: InvalidationQueueItem[] = [];\n\tlet _processQueue: (ProcessItem | DetachApplication | AttachApplication)[] = [];\n\tlet _deferredProcessQueue: (ProcessItem | DetachApplication | AttachApplication)[] = [];\n\tlet _applicationQueue: ApplicationInstruction[] = [];\n\tlet _eventMap = new WeakMap<Function, EventListener>();\n\tlet _idToWrapperMap = new Map<string, DNodeWrapper>();\n\tlet _wrapperSiblingMap = new WeakMap<DNodeWrapper, DNodeWrapper>();\n\tlet _idToChildrenWrappers = new Map<string, DNodeWrapper[]>();\n\tlet _insertBeforeMap: undefined | WeakMap<DNodeWrapper, Node> = new WeakMap<DNodeWrapper, Node>();\n\tlet _nodeToWrapperMap = new WeakMap<VNode | WNode<any>, WNodeWrapper>();\n\tlet _renderScheduled: number | undefined;\n\tlet _deferredRenderCallbacks: Function[] = [];\n\tlet parentInvalidate: () => void;\n\tlet _allMergedNodes: Node[] = [];\n\tlet _appWrapperId: string | undefined;\n\tlet _deferredProcessIds = new Map<number, Function>();\n\n\tfunction nodeOperation(\n\t\tpropName: string,\n\t\tpropValue: (() => boolean) | boolean,\n\t\tpreviousValue: boolean,\n\t\tdomNode: HTMLElement & { [index: string]: any }\n\t): void {\n\t\tlet result = propValue && !previousValue;\n\t\tif (typeof propValue === 'function') {\n\t\t\tresult = propValue();\n\t\t}\n\t\tif (result === true) {\n\t\t\t_deferredRenderCallbacks.push(() => {\n\t\t\t\tdomNode[propName]();\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction updateEvent(\n\t\tdomNode: Node,\n\t\teventName: string,\n\t\tcurrentValue: (event: Event) => void,\n\t\tpreviousValue?: Function\n\t) {\n\t\tif (previousValue) {\n\t\t\tconst previousEvent = _eventMap.get(previousValue);\n\t\t\tpreviousEvent && domNode.removeEventListener(eventName, previousEvent);\n\t\t}\n\n\t\tlet callback = currentValue;\n\n\t\tif (eventName === 'input') {\n\t\t\tcallback = function(this: any, evt: Event) {\n\t\t\t\tcurrentValue.call(this, evt);\n\t\t\t\t(evt.target as any)['oninput-value'] = (evt.target as HTMLInputElement).value;\n\t\t\t};\n\t\t}\n\n\t\tdomNode.addEventListener(eventName, callback);\n\t\t_eventMap.set(currentValue, callback);\n\t}\n\n\tfunction removeOrphanedEvents(\n\t\tdomNode: Element,\n\t\tpreviousProperties: VNodeProperties,\n\t\tproperties: VNodeProperties,\n\t\tonlyEvents: boolean = false\n\t) {\n\t\tObject.keys(previousProperties).forEach((propName) => {\n\t\t\tconst isEvent = propName.substr(0, 2) === 'on' || onlyEvents;\n\t\t\tconst eventName = onlyEvents ? propName : propName.substr(2);\n\t\t\tif (isEvent && !properties[propName]) {\n\t\t\t\tconst eventCallback = _eventMap.get(previousProperties[propName]);\n\t\t\t\tif (eventCallback) {\n\t\t\t\t\tdomNode.removeEventListener(eventName, eventCallback);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction resolveRegistryItem(wrapper: WNodeWrapper, instance?: any, id?: string) {\n\t\tif (!isWidget(wrapper.node.widgetConstructor)) {\n\t\t\tconst owningNode = _nodeToWrapperMap.get(wrapper.node);\n\t\t\tif (owningNode) {\n\t\t\t\tif (owningNode.instance) {\n\t\t\t\t\tinstance = owningNode.instance;\n\t\t\t\t} else {\n\t\t\t\t\tid = owningNode.id;\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet registry: RegistryHandler | undefined;\n\t\t\tif (instance) {\n\t\t\t\tconst instanceData = widgetInstanceMap.get(instance);\n\t\t\t\tif (instanceData) {\n\t\t\t\t\tregistry = instanceData.registry;\n\t\t\t\t}\n\t\t\t} else if (id !== undefined) {\n\t\t\t\tconst widgetMeta = widgetMetaMap.get(id);\n\t\t\t\tif (widgetMeta) {\n\t\t\t\t\tif (!widgetMeta.registryHandler) {\n\t\t\t\t\t\twidgetMeta.registryHandler = new RegistryHandler();\n\t\t\t\t\t\twidgetMeta.registryHandler.base = widgetMeta.registry;\n\t\t\t\t\t\twidgetMeta.registryHandler.on('invalidate', widgetMeta.invalidator);\n\t\t\t\t\t}\n\t\t\t\t\tregistry = widgetMeta.registryHandler;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (registry) {\n\t\t\t\tlet registryLabel: symbol | string;\n\t\t\t\tif (isLazyDefine(wrapper.node.widgetConstructor)) {\n\t\t\t\t\tconst { label, registryItem } = wrapper.node.widgetConstructor;\n\t\t\t\t\tif (!registry.has(label)) {\n\t\t\t\t\t\tregistry.define(label, registryItem);\n\t\t\t\t\t}\n\t\t\t\t\tregistryLabel = label;\n\t\t\t\t} else {\n\t\t\t\t\tregistryLabel = wrapper.node.widgetConstructor as any;\n\t\t\t\t}\n\t\t\t\tlet item = registry.get(registryLabel) as any;\n\t\t\t\tif (isWNodeFactory(item)) {\n\t\t\t\t\tconst node = item(wrapper.node.properties, wrapper.node.children);\n\t\t\t\t\tif (isWidgetFunction(node.widgetConstructor)) {\n\t\t\t\t\t\twrapper.registryItem = node.widgetConstructor;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\twrapper.registryItem = item;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction mapNodeToInstance(nodes: DNode[], wrapper: WNodeWrapper) {\n\t\twhile (nodes.length) {\n\t\t\tlet node = nodes.pop();\n\t\t\tif (isWNode(node) || isVNode(node)) {\n\t\t\t\tif (!_nodeToWrapperMap.has(node)) {\n\t\t\t\t\t_nodeToWrapperMap.set(node, wrapper);\n\t\t\t\t\tif (node.children && node.children.length) {\n\t\t\t\t\t\tnodes = [...nodes, ...node.children];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction renderedToWrapper(\n\t\trendered: DNode[],\n\t\tparent: DNodeWrapper,\n\t\tcurrentParent: DNodeWrapper | null\n\t): DNodeWrapper[] {\n\t\tconst { requiresInsertBefore, hasPreviousSiblings, namespace, depth } = parent;\n\t\tconst wrappedRendered: DNodeWrapper[] = [];\n\t\tconst hasParentWNode = isWNodeWrapper(parent);\n\t\tconst hasVirtualParentNode = isVirtualWrapper(parent);\n\t\tconst currentParentChildren =\n\t\t\t(isVNodeWrapper(currentParent) && _idToChildrenWrappers.get(currentParent.id)) || [];\n\t\tconst hasCurrentParentChildren = currentParentChildren.length > 0;\n\t\tconst insertBefore =\n\t\t\t((requiresInsertBefore || hasPreviousSiblings !== false) && (hasParentWNode || hasVirtualParentNode)) ||\n\t\t\t(hasCurrentParentChildren && rendered.length > 1);\n\t\tlet previousItem: DNodeWrapper | undefined;\n\t\tif (isWNodeWrapper(parent) && rendered.length) {\n\t\t\tmapNodeToInstance([...rendered], parent);\n\t\t}\n\t\tfor (let i = 0; i < rendered.length; i++) {\n\t\t\tlet renderedItem = rendered[i];\n\t\t\tif (!renderedItem || renderedItem === true) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (typeof renderedItem === 'string') {\n\t\t\t\trenderedItem = toTextVNode(renderedItem);\n\t\t\t}\n\t\t\tconst owningNode = _nodeToWrapperMap.get(renderedItem);\n\t\t\tconst wrapper: DNodeWrapper = {\n\t\t\t\tnode: renderedItem,\n\t\t\t\tdepth: depth + 1,\n\t\t\t\torder: i,\n\t\t\t\tparentId: parent.id,\n\t\t\t\trequiresInsertBefore: insertBefore,\n\t\t\t\thasParentWNode,\n\t\t\t\tnamespace: namespace\n\t\t\t} as DNodeWrapper;\n\t\t\tif (isVNode(renderedItem)) {\n\t\t\t\tif (renderedItem.deferredPropertiesCallback) {\n\t\t\t\t\t(wrapper as VNodeWrapper).deferredProperties = renderedItem.deferredPropertiesCallback(false);\n\t\t\t\t}\n\t\t\t\tif (renderedItem.properties.exitAnimation) {\n\t\t\t\t\tparent.hasAnimations = true;\n\t\t\t\t\tlet nextParent = _idToWrapperMap.get(parent.parentId);\n\t\t\t\t\twhile (nextParent) {\n\t\t\t\t\t\tif (nextParent.hasAnimations) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnextParent.hasAnimations = true;\n\t\t\t\t\t\tnextParent = _idToWrapperMap.get(nextParent.parentId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (owningNode) {\n\t\t\t\twrapper.owningId = owningNode.id;\n\t\t\t}\n\t\t\tif (isWNode(renderedItem)) {\n\t\t\t\tresolveRegistryItem(wrapper as WNodeWrapper, (parent as any).instance, (parent as any).id);\n\t\t\t}\n\t\t\tif (previousItem) {\n\t\t\t\t_wrapperSiblingMap.set(previousItem, wrapper);\n\t\t\t}\n\t\t\twrappedRendered.push(wrapper);\n\t\t\tpreviousItem = wrapper;\n\t\t}\n\t\treturn wrappedRendered;\n\t}\n\n\tfunction findParentDomNode(currentNode: DNodeWrapper): Node | undefined {\n\t\tlet parentDomNode: Node | undefined;\n\t\tlet parentWrapper = _idToWrapperMap.get(currentNode.parentId);\n\n\t\twhile (!parentDomNode && parentWrapper) {\n\t\t\tif (\n\t\t\t\t!parentDomNode &&\n\t\t\t\tisVNodeWrapper(parentWrapper) &&\n\t\t\t\t!isVirtualWrapper(parentWrapper) &&\n\t\t\t\tparentWrapper.domNode\n\t\t\t) {\n\t\t\t\tparentDomNode = parentWrapper.domNode;\n\t\t\t}\n\t\t\tparentWrapper = _idToWrapperMap.get(parentWrapper.parentId);\n\t\t}\n\t\treturn parentDomNode;\n\t}\n\n\tfunction runDeferredProperties(next: VNodeWrapper) {\n\t\tconst { deferredPropertiesCallback } = next.node;\n\t\tif (deferredPropertiesCallback) {\n\t\t\tconst properties = next.node.properties;\n\t\t\t_deferredRenderCallbacks.push(() => {\n\t\t\t\tif (_idToWrapperMap.has(next.owningId)) {\n\t\t\t\t\tconst deferredProperties = next.deferredProperties;\n\t\t\t\t\tnext.deferredProperties = deferredPropertiesCallback(true);\n\t\t\t\t\tprocessProperties(next, {\n\t\t\t\t\t\tproperties: { ...deferredProperties, ...properties }\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction findInsertBefore(next: DNodeWrapper) {\n\t\tlet insertBefore: Node | null = null;\n\t\tlet searchNode: DNodeWrapper | undefined = next;\n\t\twhile (!insertBefore) {\n\t\t\tconst nextSibling = _wrapperSiblingMap.get(searchNode);\n\t\t\tif (nextSibling) {\n\t\t\t\tlet domNode = nextSibling.domNode;\n\t\t\t\tif (isWNodeWrapper(nextSibling) || isVirtualWrapper(nextSibling)) {\n\t\t\t\t\tif (!nextSibling.childDomWrapperId) {\n\t\t\t\t\t\tnextSibling.childDomWrapperId = findDomNodeOnParentWrapper(nextSibling.id);\n\t\t\t\t\t}\n\t\t\t\t\tif (nextSibling.childDomWrapperId) {\n\t\t\t\t\t\tconst childWrapper = _idToWrapperMap.get(nextSibling.childDomWrapperId);\n\t\t\t\t\t\tif (childWrapper && !isBodyWrapper(childWrapper) && !isHeadWrapper(childWrapper)) {\n\t\t\t\t\t\t\tdomNode = childWrapper.domNode;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (domNode && domNode.parentNode) {\n\t\t\t\t\tinsertBefore = domNode;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tsearchNode = nextSibling;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tsearchNode = searchNode && _idToWrapperMap.get(searchNode.parentId);\n\t\t\tif (!searchNode || (isVNodeWrapper(searchNode) && !isVirtualWrapper(searchNode))) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn insertBefore;\n\t}\n\n\tfunction setValue(domNode: any, propValue?: any, previousValue?: any) {\n\t\tconst domValue = domNode.value;\n\t\tconst onInputValue = domNode['oninput-value'];\n\t\tconst onSelectValue = domNode['select-value'];\n\n\t\tif (onSelectValue && domValue !== onSelectValue) {\n\t\t\tdomNode.value = onSelectValue;\n\t\t\tif (domNode.value === onSelectValue) {\n\t\t\t\tdomNode['select-value'] = undefined;\n\t\t\t}\n\t\t} else if ((onInputValue && domValue === onInputValue) || propValue !== previousValue) {\n\t\t\tdomNode.value = propValue;\n\t\t\tdomNode['oninput-value'] = undefined;\n\t\t}\n\t}\n\n\tfunction setProperties(\n\t\tdomNode: HTMLElement,\n\t\tcurrentProperties: VNodeProperties = {},\n\t\tnextWrapper: VNodeWrapper,\n\t\tincludesEventsAndAttributes = true\n\t): void {\n\t\tconst properties = nextWrapper.deferredProperties\n\t\t\t? { ...nextWrapper.deferredProperties, ...nextWrapper.node.properties }\n\t\t\t: nextWrapper.node.properties;\n\t\tconst propNames = Object.keys(properties);\n\t\tconst propCount = propNames.length;\n\t\tif (propNames.indexOf('classes') === -1 && currentProperties.classes) {\n\t\t\tdomNode.removeAttribute('class');\n\t\t}\n\n\t\tincludesEventsAndAttributes && removeOrphanedEvents(domNode, currentProperties, properties);\n\n\t\tfor (let i = 0; i < propCount; i++) {\n\t\t\tconst propName = propNames[i];\n\t\t\tlet propValue = properties[propName];\n\t\t\tconst previousValue = currentProperties[propName];\n\t\t\tif (propName === 'classes') {\n\t\t\t\tconst previousClassString = createClassPropValue(previousValue);\n\t\t\t\tlet currentClassString = createClassPropValue(propValue);\n\t\t\t\tif (previousClassString !== currentClassString) {\n\t\t\t\t\tif (currentClassString) {\n\t\t\t\t\t\tif (nextWrapper.merged) {\n\t\t\t\t\t\t\tconst domClasses = (domNode.getAttribute('class') || '').split(' ');\n\t\t\t\t\t\t\tfor (let i = 0; i < domClasses.length; i++) {\n\t\t\t\t\t\t\t\tif (currentClassString.indexOf(domClasses[i]) === -1) {\n\t\t\t\t\t\t\t\t\tcurrentClassString = `${domClasses[i]} ${currentClassString}`;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdomNode.setAttribute('class', currentClassString);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdomNode.removeAttribute('class');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (nodeOperations.indexOf(propName) !== -1) {\n\t\t\t\tnodeOperation(propName, propValue, previousValue, domNode);\n\t\t\t} else if (propName === 'styles') {\n\t\t\t\tconst styleNames = Object.keys(propValue);\n\t\t\t\tconst styleCount = styleNames.length;\n\t\t\t\tfor (let j = 0; j < styleCount; j++) {\n\t\t\t\t\tconst styleName = styleNames[j];\n\t\t\t\t\tconst newStyleValue = propValue[styleName];\n\t\t\t\t\tconst oldStyleValue = previousValue && previousValue[styleName];\n\t\t\t\t\tif (newStyleValue === oldStyleValue) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t(domNode.style as any)[styleName] = newStyleValue || '';\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (!propValue && typeof previousValue === 'string') {\n\t\t\t\t\tpropValue = '';\n\t\t\t\t}\n\t\t\t\tif (propName === 'value') {\n\t\t\t\t\tif ((domNode as HTMLElement).tagName === 'SELECT') {\n\t\t\t\t\t\t(domNode as any)['select-value'] = propValue;\n\t\t\t\t\t}\n\t\t\t\t\tsetValue(domNode, propValue, previousValue);\n\t\t\t\t} else if (propName !== 'key' && propValue !== previousValue) {\n\t\t\t\t\tconst type = typeof propValue;\n\t\t\t\t\tif (type === 'function' && propName.lastIndexOf('on', 0) === 0 && includesEventsAndAttributes) {\n\t\t\t\t\t\tupdateEvent(domNode, propName.substr(2), propValue, previousValue);\n\t\t\t\t\t} else if (type === 'string' && propName !== 'innerHTML' && includesEventsAndAttributes) {\n\t\t\t\t\t\tupdateAttribute(domNode, propName, propValue, nextWrapper.namespace);\n\t\t\t\t\t} else if (propName === 'scrollLeft' || propName === 'scrollTop') {\n\t\t\t\t\t\tif ((domNode as any)[propName] !== propValue) {\n\t\t\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\t(domNode as any)[propName] = propValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _createDeferredRenderCallback(): (() => void) | undefined {\n\t\tconst callbacks = _deferredRenderCallbacks;\n\t\t_deferredRenderCallbacks = [];\n\t\tif (callbacks.length) {\n\t\t\treturn () => {\n\t\t\t\tlet callback: Function | undefined;\n\t\t\t\twhile ((callback = callbacks.shift())) {\n\t\t\t\t\tcallback();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction _scheduleDeferredRenderCallbacks() {\n\t\tconst { sync } = _mountOptions;\n\t\tconst run = _createDeferredRenderCallback();\n\t\tif (run) {\n\t\t\tif (sync) {\n\t\t\t\trun();\n\t\t\t} else {\n\t\t\t\tlet id: number;\n\t\t\t\tid = global.requestAnimationFrame(() => {\n\t\t\t\t\t_deferredProcessIds.delete(id);\n\t\t\t\t\trun();\n\t\t\t\t});\n\t\t\t\t_deferredProcessIds.set(id, run);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction processProperties(next: VNodeWrapper, previousProperties: PreviousProperties) {\n\t\tif (next.node.attributes && next.node.events) {\n\t\t\tupdateAttributes(\n\t\t\t\tnext.domNode as HTMLElement,\n\t\t\t\tpreviousProperties.attributes || {},\n\t\t\t\tnext.node.attributes,\n\t\t\t\tnext.namespace\n\t\t\t);\n\t\t\tsetProperties(next.domNode as HTMLElement, previousProperties.properties, next, false);\n\t\t\tconst events = next.node.events || {};\n\t\t\tif (previousProperties.events) {\n\t\t\t\tremoveOrphanedEvents(\n\t\t\t\t\tnext.domNode as HTMLElement,\n\t\t\t\t\tpreviousProperties.events || {},\n\t\t\t\t\tnext.node.events,\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tpreviousProperties.events = previousProperties.events || {};\n\t\t\tObject.keys(events).forEach((event) => {\n\t\t\t\tupdateEvent(next.domNode as HTMLElement, event, events[event], previousProperties.events[event]);\n\t\t\t});\n\t\t} else {\n\t\t\tsetProperties(next.domNode as HTMLElement, previousProperties.properties, next);\n\t\t}\n\t}\n\n\tfunction unmount() {\n\t\t_processQueue.push({\n\t\t\tcurrent: [_idToWrapperMap.get(_appWrapperId!)!],\n\t\t\tnext: [],\n\t\t\tmeta: {}\n\t\t});\n\t\tif (_renderScheduled) {\n\t\t\tglobal.cancelAnimationFrame(_renderScheduled);\n\t\t}\n\t\t_runProcessQueue();\n\t\t_runDomInstructionQueue();\n\t\t_deferredProcessIds.forEach((callback, id) => {\n\t\t\tglobal.cancelAnimationFrame(id);\n\t\t\tcallback();\n\t\t});\n\t\tconst run = _createDeferredRenderCallback();\n\t\trun && run();\n\t\t_invalidationQueue = [];\n\t\t_processQueue = [];\n\t\t_deferredProcessQueue = [];\n\t\t_applicationQueue = [];\n\t\t_deferredRenderCallbacks = [];\n\t\t_allMergedNodes = [];\n\t\t_eventMap = new WeakMap();\n\t\t_idToWrapperMap.clear();\n\t\t_idToChildrenWrappers.clear();\n\t\t_wrapperSiblingMap = new WeakMap();\n\t\t_nodeToWrapperMap = new WeakMap();\n\t\t_insertBeforeMap = undefined;\n\t}\n\n\tfunction mount(mountOptions: Partial<MountOptions> = {}) {\n\t\tlet domNode = mountOptions.domNode;\n\t\tif (!domNode) {\n\t\t\tif (has('dojo-debug') && domNode === null) {\n\t\t\t\tconsole.warn('Unable to find node to mount the application, defaulting to the document body.');\n\t\t\t}\n\t\t\tdomNode = global.document.body as HTMLElement;\n\t\t}\n\t\t_mountOptions = { ..._mountOptions, ...mountOptions, domNode };\n\t\tconst renderResult = wrapNodes(renderer)({}, []);\n\t\t_appWrapperId = `${wrapperId++}`;\n\t\tconst nextWrapper = {\n\t\t\tid: _appWrapperId,\n\t\t\tnode: renderResult,\n\t\t\torder: 0,\n\t\t\tdepth: 1,\n\t\t\towningId: '-1',\n\t\t\tparentId: '-1',\n\t\t\tsiblingId: '-1',\n\t\t\tproperties: {}\n\t\t};\n\t\t_idToWrapperMap.set('-1', {\n\t\t\tid: `-1`,\n\t\t\tdepth: 0,\n\t\t\torder: 0,\n\t\t\towningId: '',\n\t\t\tdomNode,\n\t\t\tnode: v('fake'),\n\t\t\tparentId: '-1'\n\t\t});\n\t\t_processQueue.push({\n\t\t\tcurrent: [],\n\t\t\tnext: [nextWrapper],\n\t\t\tmeta: { mergeNodes: arrayFrom(domNode.childNodes) }\n\t\t});\n\t\t_runProcessQueue();\n\t\t_runDomInstructionQueue();\n\t\t_cleanUpMergedNodes();\n\t\t_insertBeforeMap = undefined;\n\t\t_scheduleDeferredRenderCallbacks();\n\t\tif (!_renderScheduled) {\n\t\t\tsetRendering(false);\n\t\t}\n\t}\n\n\tfunction invalidate() {\n\t\tparentInvalidate && parentInvalidate();\n\t}\n\n\tfunction _schedule(): void {\n\t\tconst { sync } = _mountOptions;\n\t\tif (sync) {\n\t\t\t_runInvalidationQueue();\n\t\t} else if (!_renderScheduled) {\n\t\t\tsetRendering(true);\n\t\t\t_renderScheduled = global.requestAnimationFrame(() => {\n\t\t\t\t_runInvalidationQueue();\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction getWNodeWrapper(id: string) {\n\t\tconst wrapper = _idToWrapperMap.get(id);\n\t\tif (wrapper && isWNodeWrapper(wrapper)) {\n\t\t\treturn wrapper;\n\t\t}\n\t}\n\n\tfunction _runInvalidationQueue() {\n\t\t_renderScheduled = undefined;\n\t\tlet invalidationQueue = [..._invalidationQueue];\n\t\tconst previouslyRendered = [];\n\t\t_invalidationQueue = [];\n\t\tinvalidationQueue.sort((a, b) => {\n\t\t\tlet result = b.depth - a.depth;\n\t\t\tif (result === 0) {\n\t\t\t\tresult = b.order - a.order;\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t\tif (_deferredProcessQueue.length) {\n\t\t\t_processQueue = [..._deferredProcessQueue];\n\t\t\t_deferredProcessQueue = [];\n\t\t\t_runProcessQueue();\n\t\t\tif (_deferredProcessQueue.length) {\n\t\t\t\t_invalidationQueue = [...invalidationQueue];\n\t\t\t\tinvalidationQueue = [];\n\t\t\t}\n\t\t}\n\t\tlet item: InvalidationQueueItem | undefined;\n\t\twhile ((item = invalidationQueue.pop())) {\n\t\t\tlet { id } = item;\n\t\t\tconst current = getWNodeWrapper(id);\n\t\t\tif (!current || previouslyRendered.indexOf(id) !== -1 || !_idToWrapperMap.has(current.parentId)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tpreviouslyRendered.push(id);\n\t\t\tconst sibling = _wrapperSiblingMap.get(current);\n\t\t\tconst next = {\n\t\t\t\tnode: {\n\t\t\t\t\ttype: WNODE,\n\t\t\t\t\twidgetConstructor: current.node.widgetConstructor,\n\t\t\t\t\tproperties: current.properties || {},\n\t\t\t\t\tchildren: current.node.children || []\n\t\t\t\t},\n\t\t\t\tinstance: current.instance,\n\t\t\t\tid: current.id,\n\t\t\t\tproperties: current.properties,\n\t\t\t\tdepth: current.depth,\n\t\t\t\torder: current.order,\n\t\t\t\towningId: current.owningId,\n\t\t\t\tparentId: current.parentId,\n\t\t\t\tregistryItem: current.registryItem\n\t\t\t};\n\n\t\t\tsibling && _wrapperSiblingMap.set(next, sibling);\n\t\t\tconst result = _updateWidget({ current, next });\n\t\t\tif (result && result.item) {\n\t\t\t\t_processQueue.push(result.item);\n\t\t\t\t_idToWrapperMap.set(id, next);\n\t\t\t\t_runProcessQueue();\n\t\t\t}\n\t\t}\n\t\t_runDomInstructionQueue();\n\t\t_cleanUpMergedNodes();\n\t\t_scheduleDeferredRenderCallbacks();\n\t\tif (!_renderScheduled) {\n\t\t\tsetRendering(false);\n\t\t}\n\t}\n\n\tfunction _cleanUpMergedNodes() {\n\t\tif (_deferredProcessQueue.length === 0) {\n\t\t\tlet mergedNode: Node | undefined;\n\t\t\twhile ((mergedNode = _allMergedNodes.pop())) {\n\t\t\t\tmergedNode.parentNode && mergedNode.parentNode.removeChild(mergedNode);\n\t\t\t}\n\t\t\t_mountOptions.merge = false;\n\t\t}\n\t}\n\n\tfunction _runProcessQueue() {\n\t\tlet item: DetachApplication | AttachApplication | ProcessItem | undefined;\n\t\twhile ((item = _processQueue.pop())) {\n\t\t\tif (isAttachApplication(item)) {\n\t\t\t\titem.instance && _applicationQueue.push(item as any);\n\t\t\t} else {\n\t\t\t\tconst { current, next, meta } = item;\n\t\t\t\t_process(current || EMPTY_ARRAY, next || EMPTY_ARRAY, meta);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _runDomInstructionQueue(): void {\n\t\t_applicationQueue.reverse();\n\t\tlet item: ApplicationInstruction | undefined;\n\t\twhile ((item = _applicationQueue.pop())) {\n\t\t\tif (item.type === 'create') {\n\t\t\t\tconst {\n\t\t\t\t\tparentDomNode,\n\t\t\t\t\tnext,\n\t\t\t\t\tnext: { domNode, merged, requiresInsertBefore, node }\n\t\t\t\t} = item;\n\n\t\t\t\tprocessProperties(next, { properties: {} });\n\t\t\t\trunDeferredProperties(next);\n\t\t\t\tif (!merged) {\n\t\t\t\t\tlet insertBefore: any;\n\t\t\t\t\tif (requiresInsertBefore) {\n\t\t\t\t\t\tinsertBefore = findInsertBefore(next);\n\t\t\t\t\t} else if (_insertBeforeMap) {\n\t\t\t\t\t\tinsertBefore = _insertBeforeMap.get(next);\n\t\t\t\t\t}\n\t\t\t\t\tparentDomNode.insertBefore(domNode!, insertBefore);\n\t\t\t\t\tif (isDomVNode(next.node) && next.node.onAttach) {\n\t\t\t\t\t\tnext.node.onAttach();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif ((domNode as HTMLElement).tagName === 'OPTION' && domNode!.parentElement) {\n\t\t\t\t\tsetValue(domNode!.parentElement);\n\t\t\t\t}\n\t\t\t\tconst { enterAnimation, enterAnimationActive } = node.properties;\n\t\t\t\tif (_mountOptions.transition && enterAnimation && enterAnimation !== true) {\n\t\t\t\t\t_mountOptions.transition.enter(domNode as HTMLElement, enterAnimation, enterAnimationActive);\n\t\t\t\t}\n\t\t\t\tconst owningWrapper = _nodeToWrapperMap.get(next.node);\n\t\t\t\tif (owningWrapper && node.properties.key != null) {\n\t\t\t\t\tif (owningWrapper.instance) {\n\t\t\t\t\t\tconst instanceData = widgetInstanceMap.get(owningWrapper.instance);\n\t\t\t\t\t\tinstanceData && instanceData.nodeHandler.add(domNode as HTMLElement, `${node.properties.key}`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\taddNodeToMap(owningWrapper.id, node.properties.key, domNode as HTMLElement);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\titem.next.inserted = true;\n\t\t\t} else if (item.type === 'update') {\n\t\t\t\tconst {\n\t\t\t\t\tnext,\n\t\t\t\t\tnext: { domNode },\n\t\t\t\t\tcurrent,\n\t\t\t\t\tcurrent: { domNode: currentDomNode }\n\t\t\t\t} = item;\n\t\t\t\tif (isTextNode(domNode) && isTextNode(currentDomNode) && domNode !== currentDomNode) {\n\t\t\t\t\tcurrentDomNode.parentNode && currentDomNode.parentNode.replaceChild(domNode, currentDomNode);\n\t\t\t\t} else {\n\t\t\t\t\tconst previousProperties = buildPreviousProperties(domNode, current);\n\t\t\t\t\tprocessProperties(next, previousProperties);\n\t\t\t\t\trunDeferredProperties(next);\n\t\t\t\t}\n\t\t\t} else if (item.type === 'delete') {\n\t\t\t\tconst { current } = item;\n\t\t\t\tconst { exitAnimation, exitAnimationActive } = current.node.properties;\n\t\t\t\tif (_mountOptions.transition && exitAnimation && exitAnimation !== true) {\n\t\t\t\t\t_mountOptions.transition.exit(current.domNode as HTMLElement, exitAnimation, exitAnimationActive);\n\t\t\t\t} else {\n\t\t\t\t\tcurrent.domNode!.parentNode!.removeChild(current.domNode!);\n\t\t\t\t}\n\t\t\t} else if (item.type === 'attach') {\n\t\t\t\tconst { instance, attached } = item;\n\t\t\t\tconst instanceData = widgetInstanceMap.get(instance);\n\t\t\t\tif (instanceData) {\n\t\t\t\t\tinstanceData.nodeHandler.addRoot();\n\t\t\t\t\tattached && instanceData.onAttach();\n\t\t\t\t}\n\t\t\t} else if (item.type === 'detach') {\n\t\t\t\tif (item.current.instance) {\n\t\t\t\t\tconst instanceData = widgetInstanceMap.get(item.current.instance);\n\t\t\t\t\tinstanceData && instanceData.onDetach();\n\t\t\t\t}\n\t\t\t\titem.current.instance = undefined;\n\t\t\t}\n\t\t}\n\t\tif (_deferredProcessQueue.length === 0) {\n\t\t\t_nodeToWrapperMap = new WeakMap();\n\t\t}\n\t}\n\n\tfunction _processMergeNodes(next: DNodeWrapper, mergeNodes: Node[]) {\n\t\tconst { merge } = _mountOptions;\n\t\tif (merge && mergeNodes.length) {\n\t\t\tif (isVNodeWrapper(next)) {\n\t\t\t\tlet {\n\t\t\t\t\tnode: { tag }\n\t\t\t\t} = next;\n\t\t\t\tfor (let i = 0; i < mergeNodes.length; i++) {\n\t\t\t\t\tconst domElement = mergeNodes[i] as Element;\n\t\t\t\t\tconst tagName = domElement.tagName || '';\n\t\t\t\t\tif (tag.toUpperCase() === tagName.toUpperCase()) {\n\t\t\t\t\t\tconst mergeNodeIndex = _allMergedNodes.indexOf(domElement);\n\t\t\t\t\t\tif (mergeNodeIndex !== -1) {\n\t\t\t\t\t\t\t_allMergedNodes.splice(mergeNodeIndex, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmergeNodes.splice(i, 1);\n\t\t\t\t\t\tnext.domNode = domElement;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tnext.mergeNodes = mergeNodes;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction distinguishableCheck(childNodes: DNodeWrapper[], index: number) {\n\t\tconst parentWNodeWrapper = getWNodeWrapper(childNodes[index].owningId);\n\t\tcheckDistinguishable(childNodes, index, parentWNodeWrapper);\n\t}\n\n\tfunction createKeyMap(wrappers: DNodeWrapper[]): (string | number)[] | false {\n\t\tconst keys: (string | number)[] = [];\n\t\tfor (let i = 0; i < wrappers.length; i++) {\n\t\t\tconst wrapper = wrappers[i];\n\t\t\tif (wrapper.node.properties.key != null) {\n\t\t\t\tkeys.push(wrapper.node.properties.key);\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn keys;\n\t}\n\n\tfunction _process(current: DNodeWrapper[], next: DNodeWrapper[], meta: ProcessMeta = {}): void {\n\t\tlet { mergeNodes = [], oldIndex = 0, newIndex = 0 } = meta;\n\t\tconst currentLength = current.length;\n\t\tconst nextLength = next.length;\n\t\tconst hasPreviousSiblings = currentLength > 1 || (currentLength > 0 && currentLength < nextLength);\n\t\tlet instructions: Instruction[] = [];\n\t\tlet replace = false;\n\t\tif (oldIndex === 0 && newIndex === 0 && currentLength) {\n\t\t\tconst currentKeys = createKeyMap(current);\n\t\t\tif (currentKeys) {\n\t\t\t\tconst nextKeys = createKeyMap(next);\n\t\t\t\tif (nextKeys) {\n\t\t\t\t\tfor (let i = 0; i < currentKeys.length; i++) {\n\t\t\t\t\t\tif (nextKeys.indexOf(currentKeys[i]) !== -1) {\n\t\t\t\t\t\t\tinstructions = [];\n\t\t\t\t\t\t\treplace = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treplace = true;\n\t\t\t\t\t\tinstructions.push({ current: current[i], next: undefined });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (replace || (currentLength === 0 && !_mountOptions.merge)) {\n\t\t\tfor (let i = 0; i < next.length; i++) {\n\t\t\t\tinstructions.push({ current: undefined, next: next[i] });\n\t\t\t}\n\t\t} else {\n\t\t\tif (newIndex < nextLength) {\n\t\t\t\tlet currentWrapper = oldIndex < currentLength ? current[oldIndex] : undefined;\n\t\t\t\tconst nextWrapper = next[newIndex];\n\t\t\t\tnextWrapper.hasPreviousSiblings = hasPreviousSiblings;\n\n\t\t\t\t_processMergeNodes(nextWrapper, mergeNodes);\n\n\t\t\t\tif (currentWrapper && same(currentWrapper, nextWrapper)) {\n\t\t\t\t\toldIndex++;\n\t\t\t\t\tnewIndex++;\n\t\t\t\t\tif (isVNodeWrapper(currentWrapper) && isVNodeWrapper(nextWrapper)) {\n\t\t\t\t\t\tnextWrapper.inserted = currentWrapper.inserted;\n\t\t\t\t\t}\n\t\t\t\t\tinstructions.push({ current: currentWrapper, next: nextWrapper });\n\t\t\t\t} else if (!currentWrapper || findIndexOfChild(current, nextWrapper, oldIndex + 1) === -1) {\n\t\t\t\t\thas('dojo-debug') && current.length && distinguishableCheck(next, newIndex);\n\t\t\t\t\tinstructions.push({ current: undefined, next: nextWrapper });\n\t\t\t\t\tnewIndex++;\n\t\t\t\t} else if (findIndexOfChild(next, currentWrapper, newIndex + 1) === -1) {\n\t\t\t\t\thas('dojo-debug') && distinguishableCheck(current, oldIndex);\n\t\t\t\t\tinstructions.push({ current: currentWrapper, next: undefined });\n\t\t\t\t\toldIndex++;\n\t\t\t\t} else {\n\t\t\t\t\thas('dojo-debug') && distinguishableCheck(next, newIndex);\n\t\t\t\t\thas('dojo-debug') && distinguishableCheck(current, oldIndex);\n\t\t\t\t\tinstructions.push({ current: currentWrapper, next: undefined });\n\t\t\t\t\tinstructions.push({ current: undefined, next: nextWrapper });\n\t\t\t\t\toldIndex++;\n\t\t\t\t\tnewIndex++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (newIndex < nextLength) {\n\t\t\t\t_processQueue.push({ current, next, meta: { mergeNodes, oldIndex, newIndex } });\n\t\t\t}\n\t\t\tif (currentLength > oldIndex && newIndex >= nextLength) {\n\t\t\t\tfor (let i = oldIndex; i < currentLength; i++) {\n\t\t\t\t\thas('dojo-debug') && distinguishableCheck(current, i);\n\t\t\t\t\tinstructions.push({ current: current[i], next: undefined });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (let i = 0; i < instructions.length; i++) {\n\t\t\tconst result = _processOne(instructions[i]);\n\t\t\tif (result === false) {\n\t\t\t\tif (_mountOptions.merge && mergeNodes.length) {\n\t\t\t\t\tif (newIndex < nextLength) {\n\t\t\t\t\t\t_processQueue.pop();\n\t\t\t\t\t}\n\t\t\t\t\t_processQueue.push({ next, current, meta });\n\t\t\t\t\t_deferredProcessQueue = _processQueue;\n\t\t\t\t\t_processQueue = [];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tconst { widget, item, dom } = result;\n\t\t\twidget && _processQueue.push(widget);\n\t\t\titem && _processQueue.push(item);\n\t\t\tdom && _applicationQueue.push(dom);\n\t\t}\n\t}\n\n\tfunction _processOne({ current, next }: Instruction): ProcessResult | false {\n\t\tif (current !== next) {\n\t\t\tif (!current && next) {\n\t\t\t\tif (isVNodeWrapper(next)) {\n\t\t\t\t\treturn _createDom({ next });\n\t\t\t\t} else {\n\t\t\t\t\treturn _createWidget({ next });\n\t\t\t\t}\n\t\t\t} else if (current && next) {\n\t\t\t\tif (isVNodeWrapper(current) && isVNodeWrapper(next)) {\n\t\t\t\t\treturn _updateDom({ current, next });\n\t\t\t\t} else if (isWNodeWrapper(current) && isWNodeWrapper(next)) {\n\t\t\t\t\treturn _updateWidget({ current, next });\n\t\t\t\t}\n\t\t\t} else if (current && !next) {\n\t\t\t\tif (isVNodeWrapper(current)) {\n\t\t\t\t\treturn _removeDom({ current });\n\t\t\t\t} else if (isWNodeWrapper(current)) {\n\t\t\t\t\treturn _removeWidget({ current });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn {};\n\t}\n\n\tfunction createWidgetOptions(id: string, widgetId: string, middleware?: any) {\n\t\treturn {\n\t\t\tid,\n\t\t\tproperties: () => {\n\t\t\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\t\t\tif (widgetMeta) {\n\t\t\t\t\twidgetMeta.propertiesCalled = true;\n\t\t\t\t\treturn { ...widgetMeta.properties };\n\t\t\t\t}\n\t\t\t\treturn {};\n\t\t\t},\n\t\t\tchildren: () => {\n\t\t\t\tconst widgetMeta = widgetMetaMap.get(widgetId);\n\t\t\t\tif (widgetMeta) {\n\t\t\t\t\treturn widgetMeta.children;\n\t\t\t\t}\n\t\t\t\treturn [];\n\t\t\t},\n\t\t\tmiddleware\n\t\t};\n\t}\n\n\tfunction resolveMiddleware(\n\t\tmiddlewares: any,\n\t\tid: string,\n\t\tmiddlewareIds: string[] = []\n\t): { middlewares: any; ids: string[] } {\n\t\tconst keys = Object.keys(middlewares);\n\t\tconst results: any = {};\n\t\tconst uniqueId = `${id}-${metaId++}`;\n\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\tconst middleware = middlewares[keys[i]]();\n\t\t\tconst payload = createWidgetOptions(uniqueId, id);\n\t\t\tif (middleware.middlewares) {\n\t\t\t\tconst { middlewares: resolvedMiddleware } = resolveMiddleware(\n\t\t\t\t\tmiddleware.middlewares,\n\t\t\t\t\tid,\n\t\t\t\t\tmiddlewareIds\n\t\t\t\t);\n\t\t\t\tpayload.middleware = resolvedMiddleware;\n\t\t\t\tresults[keys[i]] = middleware.callback(payload);\n\t\t\t} else {\n\t\t\t\tresults[keys[i]] = middleware.callback(payload);\n\t\t\t}\n\t\t}\n\t\tmiddlewareIds.push(uniqueId);\n\t\treturn { middlewares: results, ids: middlewareIds };\n\t}\n\n\tfunction _createWidget({ next }: CreateWidgetInstruction): ProcessResult | false {\n\t\tlet {\n\t\t\tnode: { widgetConstructor }\n\t\t} = next;\n\t\tlet { registry } = _mountOptions;\n\t\tlet Constructor = next.registryItem || widgetConstructor;\n\t\tif (!isWidget(Constructor)) {\n\t\t\tresolveRegistryItem(next);\n\t\t\tif (!next.registryItem) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tConstructor = next.registryItem;\n\t\t}\n\n\t\tlet rendered: RenderResult;\n\t\tlet invalidate: () => void;\n\t\tnext.properties = { ...next.node.properties };\n\t\tnext.id = next.id || `${wrapperId++}`;\n\t\t_idToWrapperMap.set(next.id, next);\n\t\tconst { id, depth, order } = next;\n\t\tif (!isWidgetBaseConstructor(Constructor)) {\n\t\t\tlet widgetMeta = widgetMetaMap.get(id);\n\t\t\tif (!widgetMeta) {\n\t\t\t\tinvalidate = () => {\n\t\t\t\t\tconst widgetMeta = widgetMetaMap.get(id);\n\t\t\t\t\tif (widgetMeta) {\n\t\t\t\t\t\twidgetMeta.dirty = true;\n\t\t\t\t\t\tif (!widgetMeta.rendering && _idToWrapperMap.has(id)) {\n\t\t\t\t\t\t\t_invalidationQueue.push({ id, depth, order });\n\t\t\t\t\t\t\t_schedule();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\twidgetMeta = {\n\t\t\t\t\twidgetName: Constructor.name || 'unknown',\n\t\t\t\t\tmountNode: _mountOptions.domNode,\n\t\t\t\t\tdirty: false,\n\t\t\t\t\tinvalidator: invalidate,\n\t\t\t\t\tproperties: wrapFunctionProperties(id, next.node.properties),\n\t\t\t\t\toriginalProperties: { ...next.node.properties },\n\t\t\t\t\tchildren: next.node.children,\n\t\t\t\t\tdeferRefs: 0,\n\t\t\t\t\trendering: true,\n\t\t\t\t\tmiddleware: {},\n\t\t\t\t\tmiddlewareIds: [],\n\t\t\t\t\tregistry: _mountOptions.registry,\n\t\t\t\t\tpropertiesCalled: false\n\t\t\t\t};\n\n\t\t\t\twidgetMetaMap.set(next.id, widgetMeta);\n\t\t\t\tif ((Constructor as any).middlewares && Object.keys((Constructor as any).middlewares).length) {\n\t\t\t\t\tconst { middlewares, ids } = resolveMiddleware((Constructor as any).middlewares, id);\n\t\t\t\t\twidgetMeta.middleware = middlewares;\n\t\t\t\t\twidgetMeta.middlewareIds = ids;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tinvalidate = widgetMeta.invalidator;\n\t\t\t}\n\n\t\t\trendered = Constructor(createWidgetOptions(id, id, widgetMeta.middleware));\n\t\t\twidgetMeta.rendering = false;\n\t\t\twidgetMeta.propertiesCalled = false;\n\t\t\tif (widgetMeta.deferRefs > 0) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t} else {\n\t\t\tlet instance = new Constructor() as WidgetBaseInterface & {\n\t\t\t\tinvalidate: any;\n\t\t\t\tregistry: any;\n\t\t\t};\n\t\t\tinstance.registry.base = registry;\n\t\t\tconst instanceData = widgetInstanceMap.get(instance)!;\n\t\t\tinvalidate = () => {\n\t\t\t\tinstanceData.dirty = true;\n\t\t\t\tif (!instanceData.rendering && _idToWrapperMap.has(id)) {\n\t\t\t\t\t_invalidationQueue.push({ id, depth, order });\n\t\t\t\t\t_schedule();\n\t\t\t\t}\n\t\t\t};\n\t\t\tinstanceData.invalidate = invalidate;\n\t\t\tinstanceData.rendering = true;\n\t\t\tinstance.__setProperties__(next.node.properties);\n\t\t\tinstance.__setChildren__(next.node.children);\n\t\t\tnext.instance = instance;\n\t\t\trendered = instance.__render__();\n\t\t\tinstanceData.rendering = false;\n\t\t}\n\n\t\tlet children: DNodeWrapper[] | undefined;\n\t\tif (rendered) {\n\t\t\trendered = Array.isArray(rendered) ? rendered : [rendered];\n\t\t\tchildren = renderedToWrapper(rendered, next, null);\n\t\t\t_idToChildrenWrappers.set(id, children);\n\t\t}\n\n\t\tif (!parentInvalidate && !(Constructor as any).isWNodeWrapper) {\n\t\t\tparentInvalidate = invalidate;\n\t\t}\n\n\t\treturn {\n\t\t\titem: {\n\t\t\t\tnext: children,\n\t\t\t\tmeta: { mergeNodes: next.mergeNodes }\n\t\t\t},\n\t\t\twidget: { type: 'attach', instance: next.instance, id, attached: true }\n\t\t};\n\t}\n\n\tfunction _updateWidget({ current, next }: UpdateWidgetInstruction): ProcessResult {\n\t\tcurrent = getWNodeWrapper(current.id) || current;\n\t\tconst { instance, domNode, hasAnimations, id } = current;\n\t\tlet {\n\t\t\tnode: { widgetConstructor }\n\t\t} = next;\n\t\tconst Constructor = next.registryItem || widgetConstructor;\n\n\t\tif (!isWidget(Constructor)) {\n\t\t\treturn {};\n\t\t}\n\t\tlet rendered: RenderResult;\n\t\tlet processResult: ProcessResult = {};\n\t\tlet didRender = false;\n\t\tlet currentChildren = _idToChildrenWrappers.get(current.id);\n\t\tnext.hasAnimations = hasAnimations;\n\t\tnext.id = id;\n\t\tnext.properties = { ...next.node.properties };\n\t\t_wrapperSiblingMap.delete(current);\n\t\tif (domNode && domNode.parentNode) {\n\t\t\tnext.domNode = domNode;\n\t\t}\n\n\t\tif (!isWidgetBaseConstructor(Constructor)) {\n\t\t\tconst widgetMeta = widgetMetaMap.get(id);\n\t\t\tif (widgetMeta) {\n\t\t\t\twidgetMeta.originalProperties = { ...next.properties };\n\t\t\t\twidgetMeta.properties = wrapFunctionProperties(id, widgetMeta.originalProperties);\n\t\t\t\twidgetMeta.children = next.node.children;\n\t\t\t\twidgetMeta.rendering = true;\n\t\t\t\tconst customProperties = runDiffs(widgetMeta, current.properties, widgetMeta.originalProperties);\n\t\t\t\twidgetMeta.properties = { ...widgetMeta.properties, ...customProperties };\n\t\t\t\tif (current.node.children.length > 0 || next.node.children.length > 0) {\n\t\t\t\t\twidgetMeta.dirty = true;\n\t\t\t\t}\n\t\t\t\tif (!widgetMeta.dirty) {\n\t\t\t\t\tpropertiesDiff(\n\t\t\t\t\t\tcurrent.properties,\n\t\t\t\t\t\tnext.properties,\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\twidgetMeta.dirty = true;\n\t\t\t\t\t\t},\n\t\t\t\t\t\twidgetMeta.customDiffProperties ? [...widgetMeta.customDiffProperties.values()] : []\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (widgetMeta.dirty) {\n\t\t\t\t\t_idToChildrenWrappers.delete(id);\n\t\t\t\t\tdidRender = true;\n\t\t\t\t\trendered = Constructor(createWidgetOptions(id, id, widgetMeta.middleware));\n\t\t\t\t\twidgetMeta.dirty = false;\n\t\t\t\t\tif (widgetMeta.deferRefs > 0) {\n\t\t\t\t\t\trendered = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twidgetMeta.rendering = false;\n\t\t\t\twidgetMeta.propertiesCalled = false;\n\t\t\t}\n\t\t} else {\n\t\t\tconst instanceData = widgetInstanceMap.get(instance!)!;\n\t\t\tnext.instance = instance;\n\t\t\tinstanceData.rendering = true;\n\t\t\tinstance!.__setProperties__(next.node.properties);\n\t\t\tinstance!.__setChildren__(next.node.children);\n\t\t\tif (instanceData.dirty) {\n\t\t\t\tdidRender = true;\n\t\t\t\t_idToChildrenWrappers.delete(id);\n\t\t\t\trendered = instance!.__render__();\n\t\t\t}\n\t\t\tinstanceData.rendering = false;\n\t\t}\n\t\t_idToWrapperMap.set(next.id, next);\n\t\tprocessResult.widget = { type: 'attach', instance, id, attached: false };\n\n\t\tlet children: DNodeWrapper[] | undefined;\n\t\tif (rendered) {\n\t\t\trendered = Array.isArray(rendered) ? rendered : [rendered];\n\t\t\tchildren = renderedToWrapper(rendered, next, current);\n\t\t\t_idToChildrenWrappers.set(id, children);\n\t\t}\n\n\t\tif (didRender) {\n\t\t\tprocessResult.item = {\n\t\t\t\tcurrent: currentChildren,\n\t\t\t\tnext: children,\n\t\t\t\tmeta: {}\n\t\t\t};\n\t\t}\n\t\treturn processResult;\n\t}\n\n\tfunction _removeWidget({ current }: RemoveWidgetInstruction): ProcessResult {\n\t\tcurrent = getWNodeWrapper(current.id) || current;\n\t\t_idToWrapperMap.delete(current.id);\n\t\tconst meta = widgetMetaMap.get(current.id);\n\t\tlet currentChildren = _idToChildrenWrappers.get(current.id);\n\t\t_idToChildrenWrappers.delete(current.id);\n\t\t_wrapperSiblingMap.delete(current);\n\t\tlet processResult: ProcessResult = {\n\t\t\titem: {\n\t\t\t\tcurrent: currentChildren,\n\t\t\t\tmeta: {}\n\t\t\t}\n\t\t};\n\t\tif (meta) {\n\t\t\tmeta.registryHandler && meta.registryHandler.destroy();\n\t\t\tdestroyHandles(meta);\n\t\t\twidgetMetaMap.delete(current.id);\n\t\t} else {\n\t\t\tprocessResult.widget = { type: 'detach', current, instance: current.instance };\n\t\t}\n\n\t\treturn processResult;\n\t}\n\n\tfunction findDomNodeOnParentWrapper(id: string): string | undefined {\n\t\tconst children = _idToChildrenWrappers.get(id) || [];\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tconst child = children[i];\n\t\t\tif (child.domNode) {\n\t\t\t\treturn child.id;\n\t\t\t}\n\t\t\tconst childId = findDomNodeOnParentWrapper(child.id);\n\t\t\tif (childId) {\n\t\t\t\treturn childId;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction _createDom({ next }: CreateDomInstruction): ProcessResult {\n\t\tconst parentDomNode = findParentDomNode(next)!;\n\t\tconst isVirtual = isVirtualWrapper(next);\n\t\tconst isBody = isBodyWrapper(next);\n\t\tconst isHead = isHeadWrapper(next);\n\t\tlet mergeNodes: Node[] = [];\n\t\tnext.id = `${wrapperId++}`;\n\t\t_idToWrapperMap.set(next.id, next);\n\t\tif (!next.domNode) {\n\t\t\tif ((next.node as any).domNode) {\n\t\t\t\tnext.domNode = (next.node as any).domNode;\n\t\t\t} else {\n\t\t\t\tif (next.node.tag === 'svg') {\n\t\t\t\t\tnext.namespace = NAMESPACE_SVG;\n\t\t\t\t}\n\t\t\t\tif (isBody) {\n\t\t\t\t\tnext.domNode = global.document.body;\n\t\t\t\t} else if (isHead) {\n\t\t\t\t\tnext.domNode = global.document.head;\n\t\t\t\t} else if (next.node.tag && !isVirtual) {\n\t\t\t\t\tif (next.namespace) {\n\t\t\t\t\t\tnext.domNode = global.document.createElementNS(next.namespace, next.node.tag);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnext.domNode = global.document.createElement(next.node.tag);\n\t\t\t\t\t}\n\t\t\t\t} else if (next.node.text != null) {\n\t\t\t\t\tnext.domNode = global.document.createTextNode(next.node.text);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (_insertBeforeMap && _allMergedNodes.length) {\n\t\t\t\tif (parentDomNode === _allMergedNodes[0].parentNode) {\n\t\t\t\t\t_insertBeforeMap.set(next, _allMergedNodes[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (_mountOptions.merge) {\n\t\t\tnext.merged = true;\n\t\t\tif (isTextNode(next.domNode)) {\n\t\t\t\tif (next.domNode.data !== next.node.text) {\n\t\t\t\t\t_allMergedNodes = [next.domNode, ..._allMergedNodes];\n\t\t\t\t\tnext.domNode = global.document.createTextNode(next.node.text);\n\t\t\t\t\tnext.merged = false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tmergeNodes = arrayFrom(next.domNode.childNodes);\n\t\t\t\t_allMergedNodes = [..._allMergedNodes, ...mergeNodes];\n\t\t\t}\n\t\t}\n\t\tlet children: DNodeWrapper[] | undefined;\n\t\tif (next.domNode || isVirtual) {\n\t\t\tif (next.node.children && next.node.children.length) {\n\t\t\t\tchildren = renderedToWrapper(next.node.children, next, null);\n\t\t\t\t_idToChildrenWrappers.set(next.id, children);\n\t\t\t}\n\t\t}\n\t\tconst dom: ApplicationInstruction | undefined = isSpecialWrapper(next)\n\t\t\t? undefined\n\t\t\t: {\n\t\t\t\t\tnext: next!,\n\t\t\t\t\tparentDomNode: parentDomNode,\n\t\t\t\t\ttype: 'create'\n\t\t\t  };\n\t\tif (children) {\n\t\t\treturn {\n\t\t\t\titem: {\n\t\t\t\t\tcurrent: [],\n\t\t\t\t\tnext: children,\n\t\t\t\t\tmeta: { mergeNodes }\n\t\t\t\t},\n\t\t\t\tdom,\n\t\t\t\twidget: isVirtual ? { type: 'attach', id: (next as any).id, attached: false } : undefined\n\t\t\t};\n\t\t}\n\t\treturn { dom };\n\t}\n\n\tfunction _updateDom({ current, next }: UpdateDomInstruction): ProcessResult {\n\t\tnext.domNode = current.domNode;\n\t\tnext.namespace = current.namespace;\n\t\tnext.id = current.id;\n\t\tnext.childDomWrapperId = current.childDomWrapperId;\n\t\tlet children: DNodeWrapper[] | undefined;\n\t\tlet currentChildren = _idToChildrenWrappers.get(next.id);\n\t\tif (next.node.text != null && next.node.text !== current.node.text) {\n\t\t\tnext.domNode = global.document.createTextNode(next.node.text);\n\t\t} else if (next.node.children) {\n\t\t\tchildren = renderedToWrapper(next.node.children, next, current);\n\t\t\t_idToChildrenWrappers.set(next.id, children);\n\t\t}\n\t\t_wrapperSiblingMap.delete(current);\n\t\t_idToWrapperMap.set(next.id, next);\n\t\treturn {\n\t\t\titem: {\n\t\t\t\tcurrent: currentChildren,\n\t\t\t\tnext: children,\n\t\t\t\tmeta: {}\n\t\t\t},\n\t\t\tdom: { type: 'update', next, current }\n\t\t};\n\t}\n\n\tfunction _removeDom({ current }: RemoveDomInstruction): ProcessResult {\n\t\tconst isSpecial = isSpecialWrapper(current);\n\t\tconst children = _idToChildrenWrappers.get(current.id);\n\t\t_idToChildrenWrappers.delete(current.id);\n\t\t_idToWrapperMap.delete(current.id);\n\t\t_wrapperSiblingMap.delete(current);\n\t\tif (current.node.properties.key) {\n\t\t\tconst widgetMeta = widgetMetaMap.get(current.owningId);\n\t\t\tconst parentWrapper = getWNodeWrapper(current.owningId);\n\t\t\tif (widgetMeta) {\n\t\t\t\twidgetMeta.nodeMap && widgetMeta.nodeMap.delete(current.node.properties.key);\n\t\t\t} else if (parentWrapper && parentWrapper.instance) {\n\t\t\t\tconst instanceData = widgetInstanceMap.get(parentWrapper.instance);\n\t\t\t\tinstanceData && instanceData.nodeHandler.remove(current.node.properties.key);\n\t\t\t}\n\t\t}\n\t\tif (current.hasAnimations || isSpecial) {\n\t\t\treturn {\n\t\t\t\titem: { current: children, meta: {} },\n\t\t\t\tdom: isSpecial ? undefined : { type: 'delete', current }\n\t\t\t};\n\t\t}\n\n\t\tif (children) {\n\t\t\t_deferredRenderCallbacks.push(() => {\n\t\t\t\tlet wrappers = children || [];\n\t\t\t\tlet wrapper: DNodeWrapper | undefined;\n\t\t\t\tlet specialIds = [];\n\t\t\t\twhile ((wrapper = wrappers.pop())) {\n\t\t\t\t\tif (isWNodeWrapper(wrapper)) {\n\t\t\t\t\t\twrapper = getWNodeWrapper(wrapper.id) || wrapper;\n\t\t\t\t\t\tif (wrapper.instance) {\n\t\t\t\t\t\t\tconst instanceData = widgetInstanceMap.get(wrapper.instance);\n\t\t\t\t\t\t\tinstanceData && instanceData.onDetach();\n\t\t\t\t\t\t\twrapper.instance = undefined;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst meta = widgetMetaMap.get(wrapper.id);\n\t\t\t\t\t\t\tif (meta) {\n\t\t\t\t\t\t\t\tmeta.registryHandler && meta.registryHandler.destroy();\n\t\t\t\t\t\t\t\tdestroyHandles(meta);\n\t\t\t\t\t\t\t\twidgetMetaMap.delete(wrapper.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet wrapperChildren = _idToChildrenWrappers.get(wrapper.id);\n\t\t\t\t\tif (wrapperChildren) {\n\t\t\t\t\t\twrappers.push(...wrapperChildren);\n\t\t\t\t\t}\n\t\t\t\t\tif (isBodyWrapper(wrapper) || isHeadWrapper(wrapper)) {\n\t\t\t\t\t\tspecialIds.push(wrapper.id);\n\t\t\t\t\t} else if (specialIds.indexOf(wrapper.parentId) !== -1) {\n\t\t\t\t\t\tif (isWNodeWrapper(wrapper) || isVirtualWrapper(wrapper)) {\n\t\t\t\t\t\t\tspecialIds.push(wrapper.id);\n\t\t\t\t\t\t} else if (wrapper.domNode && wrapper.domNode.parentNode) {\n\t\t\t\t\t\t\twrapper.domNode.parentNode.removeChild(wrapper.domNode);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t_idToChildrenWrappers.delete(wrapper.id);\n\t\t\t\t\t_idToWrapperMap.delete(wrapper.id);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn {\n\t\t\tdom: { type: 'delete', current }\n\t\t};\n\t}\n\n\treturn {\n\t\tmount,\n\t\tunmount,\n\t\tinvalidate\n\t};\n}\n\nexport default renderer;\n","import global from '../../shim/global';\nimport { History, HistoryOptions, OnChangeFunction } from './../interfaces';\n\nexport class HashHistory implements History {\n\tprivate _onChangeFunction: OnChangeFunction;\n\tprivate _current: string;\n\tprivate _window: Window;\n\n\tconstructor({ window = global.window, onChange }: HistoryOptions) {\n\t\tthis._onChangeFunction = onChange;\n\t\tthis._window = window;\n\t\tthis._window.addEventListener('hashchange', this._onChange, false);\n\t\tthis._current = this.normalizePath(this._window.location.hash);\n\t\tthis._onChangeFunction(this._current);\n\t}\n\n\tpublic normalizePath(path: string): string {\n\t\treturn path.replace('#', '');\n\t}\n\n\tpublic prefix(path: string) {\n\t\tif (path[0] !== '#') {\n\t\t\treturn `#${path}`;\n\t\t}\n\t\treturn path;\n\t}\n\n\tpublic set(path: string) {\n\t\tthis._window.location.hash = this.prefix(path);\n\t\tthis._onChange();\n\t}\n\n\tpublic get current(): string {\n\t\treturn this._current;\n\t}\n\n\tpublic destroy() {\n\t\tthis._window.removeEventListener('hashchange', this._onChange);\n\t}\n\n\tprivate _onChange = () => {\n\t\tconst path = this.normalizePath(this._window.location.hash);\n\t\tif (path !== this._current) {\n\t\t\tthis._current = path;\n\t\t\tthis._onChangeFunction(this._current);\n\t\t}\n\t};\n}\n\nexport default HashHistory;\n","import global from '../shim/global';\nimport Evented from '../core/Evented';\nimport {\n\tRouteConfig,\n\tHistory,\n\tRouteContext,\n\tParams,\n\tRouterInterface,\n\tRoute,\n\tRouterOptions,\n\tMatchType\n} from './interfaces';\nimport { HashHistory } from './history/HashHistory';\nimport { EventObject } from '../core/Evented';\n\nconst PARAM = '__PARAM__';\n\nconst paramRegExp = new RegExp(/^{.+}$/);\n\ninterface RouteWrapper {\n\troute: Route;\n\tsegments: string[];\n\tparent: RouteWrapper | undefined;\n\ttype: MatchType;\n\tparams: Params;\n}\n\nexport interface NavEvent extends EventObject<string> {\n\toutlet?: string;\n\tcontext?: RouteContext;\n}\n\nexport interface RouteEvent extends EventObject<string> {\n\troute: RouteContext;\n\taction: 'enter' | 'exit';\n}\n\nexport interface OutletEvent extends EventObject<string> {\n\toutlet: RouteContext;\n\taction: 'enter' | 'exit';\n}\n\nconst ROUTE_SEGMENT_SCORE = 7;\nconst DYNAMIC_SEGMENT_PENALTY = 2;\n\nfunction matchingParams({ params: previousParams }: RouteContext, { params }: RouteContext) {\n\tconst matching = Object.keys(previousParams).every((key) => previousParams[key] === params[key]);\n\tif (!matching) {\n\t\treturn false;\n\t}\n\treturn Object.keys(params).every((key) => previousParams[key] === params[key]);\n}\n\nexport class Router extends Evented<{ nav: NavEvent; route: RouteEvent; outlet: OutletEvent }>\n\timplements RouterInterface {\n\tprivate _routes: Route[] = [];\n\tprivate _routeMap: { [index: string]: Route } = Object.create(null);\n\tprivate _matchedRoutes: { [index: string]: RouteContext } = Object.create(null);\n\tprivate _matchedOutletMap = new Map<string, Map<string, RouteContext>>();\n\tprivate _currentParams: Params = {};\n\tprivate _currentQueryParams: Params = {};\n\tprivate _defaultRoute: string | undefined;\n\tprivate _history!: History;\n\tprivate _options: RouterOptions;\n\tprivate _currentMatchedRoute: RouteContext | undefined;\n\n\tconstructor(config: RouteConfig[], options: RouterOptions = {}) {\n\t\tsuper();\n\t\tthis._options = options;\n\t\tthis._register(config);\n\t\tconst autostart = options.autostart === undefined ? true : options.autostart;\n\t\tif (autostart) {\n\t\t\tthis.start();\n\t\t}\n\t}\n\n\t/**\n\t * Sets the path against the registered history manager\n\t *\n\t * @param path The path to set on the history manager\n\t */\n\tpublic setPath(path: string): void {\n\t\tthis._history.set(path);\n\t}\n\n\tpublic start() {\n\t\tconst { HistoryManager = HashHistory, base, window } = this._options;\n\t\tthis._history = new HistoryManager({ onChange: this._onChange, base, window });\n\t\tif (this._matchedRoutes.errorRoute && this._defaultRoute) {\n\t\t\tconst path = this.link(this._defaultRoute);\n\t\t\tif (path) {\n\t\t\t\tthis.setPath(path);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Generate a link for a given outlet identifier and optional params.\n\t *\n\t * @param outlet The outlet to generate a link for\n\t * @param params Optional Params for the generated link\n\t */\n\tpublic link(outlet: string, params: Params = {}): string | undefined {\n\t\tlet route = this._routeMap[outlet];\n\t\tif (route === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet linkPath: string | undefined = route.fullPath;\n\t\tif (route.fullQueryParams.length > 0) {\n\t\t\tlet queryString = route.fullQueryParams.reduce((queryParamString, param, index) => {\n\t\t\t\tif (index > 0) {\n\t\t\t\t\treturn `${queryParamString}&${param}={${param}}`;\n\t\t\t\t}\n\t\t\t\treturn `?${param}={${param}}`;\n\t\t\t}, '');\n\t\t\tlinkPath = `${linkPath}${queryString}`;\n\t\t}\n\t\tparams = { ...route.defaultParams, ...this._currentQueryParams, ...this._currentParams, ...params };\n\n\t\tif (Object.keys(params).length === 0 && route.fullParams.length > 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst fullParams = [...route.fullParams, ...route.fullQueryParams];\n\t\tfor (let i = 0; i < fullParams.length; i++) {\n\t\t\tconst param = fullParams[i];\n\t\t\tif (params[param]) {\n\t\t\t\tlinkPath = linkPath.replace(`{${param}}`, params[param]);\n\t\t\t} else {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t\treturn this._history.prefix(linkPath);\n\t}\n\n\t/**\n\t * Returns the route context for the route identifier if one has been matched\n\t *\n\t * @param routeId The route identifer\n\t */\n\tpublic getRoute(routeId: string): RouteContext | undefined {\n\t\treturn this._matchedRoutes[routeId];\n\t}\n\n\tpublic getOutlet(outletId: string): undefined | Map<string, RouteContext> {\n\t\treturn this._matchedOutletMap.get(outletId);\n\t}\n\n\tpublic getMatchedRoute(): RouteContext | undefined {\n\t\treturn this._currentMatchedRoute;\n\t}\n\n\t/**\n\t * Returns all the params for the current matched outlets\n\t */\n\tpublic get currentParams() {\n\t\treturn this._currentParams;\n\t}\n\n\t/**\n\t * Strips the leading slash on a path if one exists\n\t *\n\t * @param path The path to strip a leading slash\n\t */\n\tprivate _stripLeadingSlash(path: string): string {\n\t\tif (path[0] === '/') {\n\t\t\treturn path.slice(1);\n\t\t}\n\t\treturn path;\n\t}\n\n\t/**\n\t * Registers the routing configuration\n\t *\n\t * @param config The configuration\n\t * @param routes The routes\n\t * @param parentRoute The parent route\n\t */\n\tprivate _register(config: RouteConfig[], routes?: Route[], parentRoute?: Route): void {\n\t\troutes = routes ? routes : this._routes;\n\t\tfor (let i = 0; i < config.length; i++) {\n\t\t\tlet { path, outlet, children, defaultRoute = false, defaultParams = {}, id, title } = config[i];\n\t\t\tlet [parsedPath, queryParamString] = path.split('?');\n\t\t\tlet queryParams: string[] = [];\n\t\t\tparsedPath = this._stripLeadingSlash(parsedPath);\n\n\t\t\tconst segments: string[] = parsedPath.split('/');\n\t\t\tconst route: Route = {\n\t\t\t\tparams: [],\n\t\t\t\tid,\n\t\t\t\toutlet,\n\t\t\t\ttitle,\n\t\t\t\tpath: parsedPath,\n\t\t\t\tsegments,\n\t\t\t\tdefaultParams: parentRoute ? { ...parentRoute.defaultParams, ...defaultParams } : defaultParams,\n\t\t\t\tchildren: [],\n\t\t\t\tfullPath: parentRoute ? `${parentRoute.fullPath}/${parsedPath}` : parsedPath,\n\t\t\t\tfullParams: [],\n\t\t\t\tfullQueryParams: [],\n\t\t\t\tscore: parentRoute ? parentRoute.score : 0\n\t\t\t};\n\t\t\tif (defaultRoute) {\n\t\t\t\tthis._defaultRoute = id;\n\t\t\t}\n\t\t\tfor (let i = 0; i < segments.length; i++) {\n\t\t\t\tconst segment = segments[i];\n\t\t\t\troute.score += ROUTE_SEGMENT_SCORE;\n\t\t\t\tif (paramRegExp.test(segment)) {\n\t\t\t\t\troute.score -= DYNAMIC_SEGMENT_PENALTY;\n\t\t\t\t\troute.params.push(segment.replace('{', '').replace('}', ''));\n\t\t\t\t\tsegments[i] = PARAM;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (queryParamString) {\n\t\t\t\tqueryParams = queryParamString.split('&').map((queryParam) => {\n\t\t\t\t\treturn queryParam.replace('{', '').replace('}', '');\n\t\t\t\t});\n\t\t\t}\n\t\t\troute.fullQueryParams = parentRoute ? [...parentRoute.fullQueryParams, ...queryParams] : queryParams;\n\n\t\t\troute.fullParams = parentRoute ? [...parentRoute.fullParams, ...route.params] : route.params;\n\n\t\t\tif (children && children.length > 0) {\n\t\t\t\tthis._register(children, route.children, route);\n\t\t\t}\n\t\t\tthis._routeMap[id] = route;\n\t\t\troutes.push(route);\n\t\t}\n\t}\n\n\t/**\n\t * Returns an object of query params\n\t *\n\t * @param queryParamString The string of query params, e.g `paramOne=one&paramTwo=two`\n\t */\n\tprivate _getQueryParams(queryParamString?: string): { [index: string]: string } {\n\t\tconst queryParams: { [index: string]: string } = {};\n\t\tif (queryParamString) {\n\t\t\tconst queryParameters = queryParamString.split('&');\n\t\t\tfor (let i = 0; i < queryParameters.length; i++) {\n\t\t\t\tconst [key, value] = queryParameters[i].split('=');\n\t\t\t\tqueryParams[key] = value;\n\t\t\t}\n\t\t}\n\t\treturn queryParams;\n\t}\n\n\t/**\n\t * Called on change of the route by the the registered history manager. Matches the path against\n\t * the registered outlets.\n\t *\n\t * @param requestedPath The path of the requested route\n\t */\n\tprivate _onChange = (requestedPath: string): void => {\n\t\trequestedPath = this._stripLeadingSlash(requestedPath);\n\t\tconst previousMatchedRoutes = this._matchedRoutes;\n\t\tthis._matchedRoutes = Object.create(null);\n\t\tthis._matchedOutletMap.clear();\n\t\tconst [path, queryParamString] = requestedPath.split('?');\n\t\tthis._currentQueryParams = this._getQueryParams(queryParamString);\n\t\tconst segments = path.split('/');\n\t\tlet routeConfigs: RouteWrapper[] = this._routes.map((route) => ({\n\t\t\troute,\n\t\t\tsegments: [...segments],\n\t\t\tparent: undefined,\n\t\t\tparams: {},\n\t\t\ttype: 'index'\n\t\t}));\n\t\tlet routeConfig: RouteWrapper | undefined;\n\t\tlet matchedRoutes: RouteWrapper[] = [];\n\t\twhile ((routeConfig = routeConfigs.pop())) {\n\t\t\tconst { route, parent, segments, params } = routeConfig;\n\t\t\tlet segmentIndex = 0;\n\t\t\tlet type: MatchType = 'index';\n\t\t\tlet paramIndex = 0;\n\t\t\tlet routeMatch = true;\n\t\t\tif (segments.length < route.segments.length) {\n\t\t\t\trouteMatch = false;\n\t\t\t} else {\n\t\t\t\twhile (segments.length > 0) {\n\t\t\t\t\tif (route.segments[segmentIndex] === undefined) {\n\t\t\t\t\t\ttype = 'partial';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tconst segment = segments.shift()!;\n\t\t\t\t\tif (route.segments[segmentIndex] === PARAM) {\n\t\t\t\t\t\tparams[route.params[paramIndex++]] = segment;\n\t\t\t\t\t\tthis._currentParams = { ...this._currentParams, ...params };\n\t\t\t\t\t} else if (route.segments[segmentIndex] !== segment) {\n\t\t\t\t\t\trouteMatch = false;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tsegmentIndex++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (routeMatch) {\n\t\t\t\trouteConfig.type = type;\n\t\t\t\tmatchedRoutes.push({ route, parent, type, params, segments: [] });\n\t\t\t\tif (segments.length) {\n\t\t\t\t\trouteConfigs = [\n\t\t\t\t\t\t...routeConfigs,\n\t\t\t\t\t\t...route.children.map((childRoute) => ({\n\t\t\t\t\t\t\troute: childRoute,\n\t\t\t\t\t\t\tsegments: [...segments],\n\t\t\t\t\t\t\tparent: routeConfig,\n\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\tparams: { ...params }\n\t\t\t\t\t\t}))\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet matchedRouteId: string | undefined = undefined;\n\n\t\tlet matchedRoute = matchedRoutes.shift();\n\t\twhile (matchedRoute && matchedRoutes.length) {\n\t\t\tlet currentMatch = matchedRoutes.shift();\n\t\t\tif (currentMatch && currentMatch.route.score > matchedRoute.route.score) {\n\t\t\t\tmatchedRoute = currentMatch;\n\t\t\t}\n\t\t}\n\n\t\tif (matchedRoute) {\n\t\t\tif (matchedRoute.type === 'partial') {\n\t\t\t\tmatchedRoute.type = 'error';\n\t\t\t}\n\t\t\tmatchedRouteId = matchedRoute.route.id;\n\t\t\tconst title = this._options.setDocumentTitle\n\t\t\t\t? this._options.setDocumentTitle({\n\t\t\t\t\t\tid: matchedRouteId,\n\t\t\t\t\t\ttitle: matchedRoute.route.title,\n\t\t\t\t\t\tparams: matchedRoute.params,\n\t\t\t\t\t\tqueryParams: this._currentQueryParams\n\t\t\t\t  })\n\t\t\t\t: matchedRoute.route.title;\n\t\t\tif (title) {\n\t\t\t\tglobal.document.title = title;\n\t\t\t}\n\t\t\twhile (matchedRoute) {\n\t\t\t\tlet { type, params, route } = matchedRoute;\n\t\t\t\tlet parent: RouteWrapper | undefined = matchedRoute.parent;\n\t\t\t\tconst matchedRouteContext: RouteContext = {\n\t\t\t\t\tid: route.id,\n\t\t\t\t\toutlet: route.outlet,\n\t\t\t\t\tqueryParams: this._currentQueryParams,\n\t\t\t\t\tparams,\n\t\t\t\t\ttype,\n\t\t\t\t\tisError: () => type === 'error',\n\t\t\t\t\tisExact: () => type === 'index'\n\t\t\t\t};\n\t\t\t\tconst previousMatchedOutlet = previousMatchedRoutes[route.id];\n\t\t\t\tconst routeMap = this._matchedOutletMap.get(route.outlet) || new Map();\n\t\t\t\trouteMap.set(route.id, matchedRouteContext);\n\t\t\t\tthis._matchedOutletMap.set(route.outlet, routeMap);\n\t\t\t\tthis._matchedRoutes[route.id] = matchedRouteContext;\n\t\t\t\tif (!previousMatchedOutlet || !matchingParams(previousMatchedOutlet, matchedRouteContext)) {\n\t\t\t\t\tthis.emit({ type: 'route', route: matchedRouteContext, action: 'enter' });\n\t\t\t\t\tthis.emit({ type: 'outlet', outlet: matchedRouteContext, action: 'enter' });\n\t\t\t\t}\n\t\t\t\tmatchedRoute = parent;\n\t\t\t}\n\t\t} else {\n\t\t\tthis._matchedRoutes.errorRoute = {\n\t\t\t\tid: 'errorRoute',\n\t\t\t\toutlet: 'errorRoute',\n\t\t\t\tqueryParams: {},\n\t\t\t\tparams: {},\n\t\t\t\tisError: () => true,\n\t\t\t\tisExact: () => false,\n\t\t\t\ttype: 'error'\n\t\t\t};\n\t\t}\n\n\t\tconst previousMatchedOutletKeys = Object.keys(previousMatchedRoutes);\n\t\tfor (let i = 0; i < previousMatchedOutletKeys.length; i++) {\n\t\t\tconst key = previousMatchedOutletKeys[i];\n\t\t\tconst matchedRoute = this._matchedRoutes[key];\n\t\t\tif (!matchedRoute || !matchingParams(previousMatchedRoutes[key], matchedRoute)) {\n\t\t\t\tthis.emit({ type: 'route', route: previousMatchedRoutes[key], action: 'exit' });\n\t\t\t\tthis.emit({ type: 'outlet', outlet: previousMatchedRoutes[key], action: 'exit' });\n\t\t\t}\n\t\t}\n\t\tthis._currentMatchedRoute = matchedRouteId ? this._matchedRoutes[matchedRouteId] : undefined;\n\t\tthis.emit({\n\t\t\ttype: 'nav',\n\t\t\toutlet: matchedRouteId,\n\t\t\tcontext: this._currentMatchedRoute\n\t\t});\n\t\tif (this._options.resetScroll) {\n\t\t\tconst { window = global.window } = this._options;\n\t\t\ttry {\n\t\t\t\twindow.scroll(0, 0);\n\t\t\t} catch (e) {\n\t\t\t\t// Catch errors if we're in an environment without window.scroll\n\t\t\t}\n\t\t}\n\t};\n}\n\nexport default Router;\n","/* tslint:disable:interface-name */\nimport Map from '../../shim/Map';\nimport { create, invalidator, destroy } from '../vdom';\n\nconst factory = create({ invalidator, destroy });\n\ninterface CacheWrapper {\n\tstatus: 'pending' | 'resolved';\n\tvalue: any;\n}\n\nexport interface ICacheResult<S = void> {\n\tgetOrSet: {\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? () => Promise<T> : () => Promise<S[T]>,\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? undefined | T : undefined | S[T];\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? () => T : () => S[T],\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? T : S[T];\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? T : S[T],\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? T : S[T];\n\t};\n\tget<T extends void extends S ? any : keyof S>(\n\t\tkey: void extends S ? any : T\n\t): void extends S ? T | undefined : S[T] | undefined;\n\tset: {\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? (value: T | undefined) => Promise<T> : (value: S[T] | undefined) => Promise<S[T]>,\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? T | undefined : S[T] | undefined;\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? (value: T | undefined) => T : (value: S[T] | undefined) => S[T],\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? T : S[T];\n\t\t<T extends void extends S ? any : keyof S>(\n\t\t\tkey: void extends S ? any : T,\n\t\t\tvalue: void extends S ? T : S[T],\n\t\t\tinvalidate?: boolean\n\t\t): void extends S ? T : S[T];\n\t};\n\thas<T extends void extends S ? any : keyof S>(key: void extends S ? any : T): boolean;\n\tdelete<T extends void extends S ? any : keyof S>(key: void extends S ? any : T, invalidate?: boolean): void;\n\tclear(invalidate?: boolean): void;\n}\n\nexport function createICacheMiddleware<S = void>() {\n\tconst icache = factory(\n\t\t({ middleware: { invalidator, destroy } }): ICacheResult<S> => {\n\t\t\tconst cacheMap = new Map<string, CacheWrapper>();\n\t\t\tdestroy(() => {\n\t\t\t\tcacheMap.clear();\n\t\t\t});\n\n\t\t\tconst api: any = {\n\t\t\t\tget: (key: any): any => {\n\t\t\t\t\tconst cachedValue = cacheMap.get(key);\n\t\t\t\t\tif (!cachedValue || cachedValue.status === 'pending') {\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t\treturn cachedValue.value;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tapi.set = (key: any, value: any, invalidate: boolean = true): any => {\n\t\t\t\tconst current = api.get(key);\n\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\tvalue = value(current);\n\t\t\t\t\tif (value && typeof value.then === 'function') {\n\t\t\t\t\t\tcacheMap.set(key, {\n\t\t\t\t\t\t\tstatus: 'pending',\n\t\t\t\t\t\t\tvalue\n\t\t\t\t\t\t});\n\t\t\t\t\t\tvalue.then((result: any) => {\n\t\t\t\t\t\t\tconst cachedValue = cacheMap.get(key);\n\t\t\t\t\t\t\tif (cachedValue && cachedValue.value === value) {\n\t\t\t\t\t\t\t\tcacheMap.set(key, {\n\t\t\t\t\t\t\t\t\tstatus: 'resolved',\n\t\t\t\t\t\t\t\t\tvalue: result\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tinvalidate && invalidator();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcacheMap.set(key, {\n\t\t\t\t\tstatus: 'resolved',\n\t\t\t\t\tvalue\n\t\t\t\t});\n\t\t\t\tinvalidate && invalidator();\n\t\t\t\treturn value;\n\t\t\t};\n\t\t\tapi.has = (key: any) => {\n\t\t\t\treturn cacheMap.has(key);\n\t\t\t};\n\t\t\tapi.delete = (key: any, invalidate: boolean = true) => {\n\t\t\t\tcacheMap.delete(key);\n\t\t\t\tinvalidate && invalidator();\n\t\t\t};\n\t\t\tapi.clear = (invalidate: boolean = true): void => {\n\t\t\t\tcacheMap.clear();\n\t\t\t\tinvalidate && invalidator();\n\t\t\t};\n\t\t\tapi.getOrSet = (key: any, value: any, invalidate: boolean = true): any | undefined => {\n\t\t\t\tlet cachedValue = cacheMap.get(key);\n\t\t\t\tif (!cachedValue) {\n\t\t\t\t\tapi.set(key, value, invalidate);\n\t\t\t\t}\n\t\t\t\tcachedValue = cacheMap.get(key);\n\t\t\t\tif (!cachedValue || cachedValue.status === 'pending') {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t\treturn cachedValue.value;\n\t\t\t};\n\t\t\treturn api;\n\t\t}\n\t);\n\treturn icache;\n}\n\nexport const icache = createICacheMiddleware();\n\nexport default icache;\n","import { create, getRegistry, invalidator, destroy } from '../vdom';\nimport { RegistryLabel } from '../interfaces';\nimport { Handle } from '../Destroyable';\n\nconst injectorFactory = create({ getRegistry, invalidator, destroy });\n\nexport const injector = injectorFactory(({ middleware: { getRegistry, invalidator, destroy } }) => {\n\tconst handles: Handle[] = [];\n\tdestroy(() => {\n\t\tlet handle: Handle | undefined;\n\t\twhile ((handle = handles.pop())) {\n\t\t\thandle.destroy();\n\t\t}\n\t});\n\tconst registry = getRegistry();\n\treturn {\n\t\tsubscribe(label: RegistryLabel, callback: Function = invalidator) {\n\t\t\tif (registry) {\n\t\t\t\tconst item = registry.getInjector(label);\n\t\t\t\tif (item) {\n\t\t\t\t\tconst handle = item.invalidator.on('invalidate', () => {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t});\n\t\t\t\t\thandles.push(handle);\n\t\t\t\t\treturn () => {\n\t\t\t\t\t\tconst index = handles.indexOf(handle);\n\t\t\t\t\t\tif (index !== -1) {\n\t\t\t\t\t\t\thandles.splice(index, 1);\n\t\t\t\t\t\t\thandle.destroy();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tget<T>(label: RegistryLabel): T | null {\n\t\t\tif (registry) {\n\t\t\t\tconst item = registry.getInjector<T>(label);\n\t\t\t\tif (item) {\n\t\t\t\t\treturn item.injector();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t};\n});\n\nexport default injector;\n","import { Evented, EventObject } from '../core/Evented';\n\nexport type InjectorEventMap = {\n\tinvalidate: EventObject<'invalidate'>;\n};\n\nexport class Injector<T = any> extends Evented<InjectorEventMap> {\n\tprivate _payload: T;\n\tprivate _invalidator: undefined | (() => void);\n\n\tconstructor(payload: T) {\n\t\tsuper();\n\t\tthis._payload = payload;\n\t}\n\n\tpublic setInvalidator(invalidator: () => void) {\n\t\tthis._invalidator = invalidator;\n\t}\n\n\tpublic get(): T {\n\t\treturn this._payload;\n\t}\n\n\tpublic set(payload: T): void {\n\t\tthis._payload = payload;\n\t\tif (this._invalidator) {\n\t\t\tthis._invalidator();\n\t\t}\n\t}\n}\n\nexport default Injector;\n","import global from '../shim/global';\nimport { Theme, ThemeWithVariants, ThemeWithVariant, NamedVariant } from './interfaces';\nimport Injector from './Injector';\nimport cssVars from '../shim/cssVariables';\nimport Map from '../shim/Map';\nimport has from './has';\n\nexport interface ThemeWithVariantsInjectorPayload {\n\ttheme: ThemeWithVariants;\n\tvariant: NamedVariant;\n}\n\nexport interface ThemeInjectorPayload {\n\ttheme: Theme;\n}\n\nexport function isVariantModule(variant: string | NamedVariant): variant is NamedVariant {\n\treturn typeof variant !== 'string';\n}\n\nexport function isThemeWithVariant(theme: Theme | ThemeWithVariants | ThemeWithVariant): theme is ThemeWithVariant {\n\treturn theme && theme.hasOwnProperty('variant');\n}\n\nexport function isThemeWithVariants(theme: Theme | ThemeWithVariants | ThemeWithVariant): theme is ThemeWithVariants {\n\treturn theme && theme.hasOwnProperty('variants');\n}\n\nexport function isThemeInjectorPayloadWithVariant(\n\ttheme: ThemeInjectorPayload | ThemeWithVariantsInjectorPayload | undefined\n): theme is ThemeWithVariantsInjectorPayload {\n\treturn !!theme && theme.hasOwnProperty('variant');\n}\n\nlet processCssVariant = function(_: string) {};\n\nif (!has('dom-css-variables')) {\n\tconst setUpCssVariantSupport = () => {\n\t\tconst styleId = '__dojo_processed_styles';\n\t\tconst processedCssMap = new Map<string, string>();\n\t\tlet variantStyleElement: HTMLStyleElement | undefined;\n\n\t\tfunction applyStyles(css: string) {\n\t\t\tconst style = document.createElement('style');\n\t\t\tstyle.textContent = css;\n\t\t\tstyle.setAttribute('id', styleId);\n\t\t\tif (variantStyleElement && variantStyleElement.parentNode) {\n\t\t\t\tvariantStyleElement.parentNode.replaceChild(style, variantStyleElement);\n\t\t\t} else {\n\t\t\t\tglobal.document.head.appendChild(style);\n\t\t\t}\n\t\t\tvariantStyleElement = style;\n\t\t}\n\n\t\treturn function processCssVariant(variantName: string) {\n\t\t\tconst processedCss = processedCssMap.get(variantName);\n\t\t\tif (processedCss) {\n\t\t\t\tapplyStyles(processedCss);\n\t\t\t} else {\n\t\t\t\tcssVars({\n\t\t\t\t\texclude: `style[id=${styleId}]`,\n\t\t\t\t\tonSuccess: (css) => {\n\t\t\t\t\t\tlet temp = css;\n\t\t\t\t\t\tlet index = temp.indexOf(variantName);\n\t\t\t\t\t\tlet variantCss = '';\n\t\t\t\t\t\twhile (index !== -1) {\n\t\t\t\t\t\t\ttemp = temp.substring(index + variantName.length);\n\t\t\t\t\t\t\tconst match = temp.match(/\\{([^}]+)\\}/);\n\t\t\t\t\t\t\tif (match) {\n\t\t\t\t\t\t\t\tif (variantCss) {\n\t\t\t\t\t\t\t\t\tvariantCss = `${variantCss.substring(0, variantCss.length - 1)}${match[0].substring(\n\t\t\t\t\t\t\t\t\t\t1\n\t\t\t\t\t\t\t\t\t)}`;\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tvariantCss = match[0];\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tindex = temp.indexOf(variantName);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (variantCss) {\n\t\t\t\t\t\t\tcss = `:root ${variantCss}${css}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn css;\n\t\t\t\t\t},\n\t\t\t\t\tonComplete: (css) => {\n\t\t\t\t\t\tprocessedCssMap.set(variantName, css);\n\t\t\t\t\t\tapplyStyles(css);\n\t\t\t\t\t},\n\t\t\t\t\tupdateDOM: false,\n\t\t\t\t\tsilent: true\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t};\n\tprocessCssVariant = setUpCssVariantSupport();\n}\n\nfunction createThemeInjectorPayload(\n\ttheme: Theme | ThemeWithVariants | ThemeWithVariant,\n\tvariant?: string | NamedVariant\n): ThemeWithVariantsInjectorPayload | ThemeInjectorPayload {\n\tif (isThemeWithVariant(theme)) {\n\t\tif (typeof theme.variant === 'string') {\n\t\t\treturn {\n\t\t\t\ttheme: theme.theme,\n\t\t\t\tvariant: { name: theme.variant, value: theme.theme.variants[theme.variant] }\n\t\t\t};\n\t\t}\n\t\treturn { theme: theme.theme, variant: theme.variant };\n\t} else if (isThemeWithVariants(theme)) {\n\t\tvariant = variant || 'default';\n\t\tif (isVariantModule(variant)) {\n\t\t\tif (!has('dom-css-variables')) {\n\t\t\t\tprocessCssVariant(variant.value.root);\n\t\t\t}\n\t\t\treturn { theme, variant };\n\t\t}\n\t\tif (!has('dom-css-variables')) {\n\t\t\tprocessCssVariant(theme.variants[variant].root);\n\t\t}\n\n\t\treturn { theme: theme, variant: { name: variant, value: theme.variants[variant] } };\n\t}\n\treturn { theme };\n}\n\nexport class ThemeInjector extends Injector {\n\tconstructor(theme?: Theme | ThemeWithVariants | ThemeWithVariant) {\n\t\tsuper(theme ? createThemeInjectorPayload(theme) : theme);\n\t}\n\n\tset<T extends ThemeWithVariants>(theme: T, variant?: keyof T['variants'] | NamedVariant): void;\n\tset(theme: ThemeWithVariant): void;\n\tset(theme: Theme): void;\n\tset(theme: Theme | ThemeWithVariants | ThemeWithVariant, variant?: string | NamedVariant) {\n\t\tsuper.set(createThemeInjectorPayload(theme, variant));\n\t}\n\n\tget(): ThemeWithVariantsInjectorPayload | ThemeInjectorPayload | undefined {\n\t\treturn super.get();\n\t}\n}\n\nexport default ThemeInjector;\n","import { Theme, Classes, ClassNames, ThemeWithVariant, ThemeWithVariants, NamedVariant } from './../interfaces';\nimport { create, invalidator, diffProperty, getRegistry } from '../vdom';\nimport icache from './icache';\nimport injector from './injector';\nimport Set from '../../shim/Set';\nimport { auto } from '../diff';\nimport Registry from '../Registry';\nimport {\n\tThemeInjector,\n\tisThemeInjectorPayloadWithVariant,\n\tisThemeWithVariants,\n\tisThemeWithVariant,\n\tThemeInjectorPayload,\n\tThemeWithVariantsInjectorPayload\n} from '../ThemeInjector';\n\nexport { Theme, Classes, ClassNames } from './../interfaces';\n\nexport interface ThemeProperties {\n\ttheme?: Theme | ThemeWithVariant;\n\tclasses?: Classes;\n}\n\nexport const THEME_KEY = ' _key';\n\nexport const INJECTED_THEME_KEY = '__theme_injector';\n\nfunction registerThemeInjector(theme: Theme | ThemeWithVariant | undefined, themeRegistry: Registry): ThemeInjector {\n\tconst themeInjector = new ThemeInjector(theme);\n\tthemeRegistry.defineInjector(INJECTED_THEME_KEY, (invalidator) => {\n\t\tthemeInjector.setInvalidator(invalidator);\n\t\treturn () => themeInjector;\n\t});\n\treturn themeInjector;\n}\n\nconst factory = create({ invalidator, icache, diffProperty, injector, getRegistry }).properties<ThemeProperties>();\n\nexport const theme = factory(\n\t({ middleware: { invalidator, icache, diffProperty, injector, getRegistry }, properties }) => {\n\t\tlet themeKeys = new Set();\n\n\t\tdiffProperty('theme', properties, (current, next) => {\n\t\t\tconst { changed } = auto(current.theme, next.theme, 3);\n\t\t\tif (changed) {\n\t\t\t\ticache.clear();\n\t\t\t\tinvalidator();\n\t\t\t}\n\t\t});\n\t\tdiffProperty('classes', (current: ThemeProperties, next: ThemeProperties) => {\n\t\t\tlet result = false;\n\t\t\tif ((current.classes && !next.classes) || (!current.classes && next.classes)) {\n\t\t\t\tresult = true;\n\t\t\t} else if (current.classes && next.classes) {\n\t\t\t\tconst keys = [...themeKeys.values()];\n\t\t\t\tfor (let i = 0; i < keys.length; i++) {\n\t\t\t\t\tlet key = keys[i];\n\t\t\t\t\tresult = auto(current.classes[key], next.classes[key], 2).changed;\n\t\t\t\t\tif (result) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (result) {\n\t\t\t\ticache.clear();\n\t\t\t\tinvalidator();\n\t\t\t}\n\t\t});\n\n\t\tfunction getTheme() {\n\t\t\tconst { theme } = properties();\n\t\t\tif (theme) {\n\t\t\t\treturn theme;\n\t\t\t}\n\t\t\tconst themeInjector = injector.get<ThemeInjector>(INJECTED_THEME_KEY);\n\t\t\tif (themeInjector) {\n\t\t\t\tconst themePayload = themeInjector.get();\n\t\t\t\tif (isThemeInjectorPayloadWithVariant(themePayload)) {\n\t\t\t\t\treturn { theme: themePayload.theme, variant: themePayload.variant };\n\t\t\t\t} else if (themePayload) {\n\t\t\t\t\treturn themePayload.theme;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst themeInjector = injector.get(INJECTED_THEME_KEY);\n\t\tif (!themeInjector) {\n\t\t\tconst registry = getRegistry();\n\t\t\tif (registry) {\n\t\t\t\tregisterThemeInjector(undefined, registry.base);\n\t\t\t}\n\t\t}\n\t\tinjector.subscribe(INJECTED_THEME_KEY, () => {\n\t\t\ticache.clear();\n\t\t\tinvalidator();\n\t\t});\n\n\t\tfunction set(theme: Theme): void;\n\t\tfunction set<T extends ThemeWithVariants>(theme: T, variant?: keyof T['variants'] | NamedVariant): void;\n\t\tfunction set<T extends ThemeWithVariants>(\n\t\t\ttheme: Theme | T,\n\t\t\tvariant?: keyof T['variants'] | NamedVariant\n\t\t): void {\n\t\t\tconst currentTheme = injector.get<ThemeInjector>(INJECTED_THEME_KEY);\n\t\t\tif (currentTheme) {\n\t\t\t\tif (isThemeWithVariants(theme)) {\n\t\t\t\t\tcurrentTheme.set(theme, variant);\n\t\t\t\t} else {\n\t\t\t\t\tcurrentTheme.set(theme);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tclasses<T extends ClassNames>(css: T): T {\n\t\t\t\tconst cachedTheme = icache.get<T>(css);\n\t\t\t\tif (cachedTheme) {\n\t\t\t\t\treturn cachedTheme;\n\t\t\t\t}\n\t\t\t\tconst { [THEME_KEY]: key, ...classes } = css;\n\t\t\t\tthemeKeys.add(key);\n\t\t\t\tlet theme = classes as ClassNames;\n\t\t\t\tlet { classes: currentClasses } = properties();\n\t\t\t\tlet currentTheme = getTheme();\n\n\t\t\t\tif (currentTheme && isThemeWithVariant(currentTheme)) {\n\t\t\t\t\tcurrentTheme = isThemeWithVariants(currentTheme.theme)\n\t\t\t\t\t\t? currentTheme.theme.theme\n\t\t\t\t\t\t: currentTheme.theme;\n\t\t\t\t}\n\n\t\t\t\tif (currentTheme && currentTheme[key]) {\n\t\t\t\t\ttheme = { ...theme, ...currentTheme[key] };\n\t\t\t\t}\n\t\t\t\tif (currentClasses && currentClasses[key]) {\n\t\t\t\t\tconst classKeys = Object.keys(currentClasses[key]);\n\t\t\t\t\tfor (let i = 0; i < classKeys.length; i++) {\n\t\t\t\t\t\tconst classKey = classKeys[i];\n\t\t\t\t\t\tif (theme[classKey]) {\n\t\t\t\t\t\t\ttheme[classKey] = `${theme[classKey]} ${currentClasses[key][classKey].join(' ')}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\ticache.set(css, theme, false);\n\t\t\t\treturn theme as T;\n\t\t\t},\n\t\t\tvariant() {\n\t\t\t\tconst theme = getTheme();\n\t\t\t\tif (theme && isThemeWithVariant(theme)) {\n\t\t\t\t\treturn theme.variant.value.root;\n\t\t\t\t}\n\t\t\t},\n\t\t\tset,\n\t\t\tget(): ThemeWithVariantsInjectorPayload | ThemeInjectorPayload | undefined {\n\t\t\t\tconst currentTheme = injector.get<ThemeInjector>(INJECTED_THEME_KEY);\n\t\t\t\tif (currentTheme) {\n\t\t\t\t\treturn currentTheme.get();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n);\n\nexport default theme;\n","import { create, tsx, diffProperty, invalidator } from '../core/vdom';\nimport injector from '../core/middleware/injector';\nimport icache from '../core/middleware/icache';\nimport { RenderResult } from '../core/interfaces';\nimport { MatchDetails, RouteContext } from './interfaces';\nimport Router from './Router';\nimport { RouteProperties } from './Route';\n\nconst ROUTER_KEY = 'router';\n\nexport interface RouteMatch {\n\t[index: string]: boolean;\n}\n\nexport interface Matches {\n\t[index: string]: boolean;\n}\n\nexport interface Matcher {\n\t(defaultMatches: Matches, matchDetails: Map<string, RouteContext>): Matches;\n}\n\nexport interface OutletProperties {\n\tid: string;\n\tmatcher?: Matcher;\n\trouterKey?: string;\n}\n\nexport interface OutletChildren {\n\t[index: string]: RenderResult | ((matchDetails: MatchDetails) => RenderResult);\n}\n\nexport interface OutletFunctionChild {\n\t(matchDetails: MatchDetails): RenderResult;\n}\n\nconst factory = create({ icache, injector, diffProperty, invalidator })\n\t.properties<OutletProperties>()\n\t.children<OutletChildren | OutletFunctionChild>();\n\nexport const Outlet = factory(function Outlet({\n\tmiddleware: { icache, injector, diffProperty, invalidator },\n\tproperties,\n\tchildren\n}) {\n\tdiffProperty('routerKey', (current: RouteProperties, next: RouteProperties) => {\n\t\tconst { routerKey: currentRouterKey = ROUTER_KEY } = current;\n\t\tconst { routerKey = ROUTER_KEY } = next;\n\t\tif (routerKey !== currentRouterKey) {\n\t\t\tconst currentHandle = icache.get<Function>('handle');\n\t\t\tif (currentHandle) {\n\t\t\t\tcurrentHandle();\n\t\t\t}\n\t\t\tconst handle = injector.subscribe(routerKey);\n\t\t\tif (handle) {\n\t\t\t\ticache.set('handle', () => handle);\n\t\t\t}\n\t\t}\n\t\tinvalidator();\n\t});\n\tconst { id, matcher, routerKey = ROUTER_KEY } = properties();\n\tconst [outletChildren] = children();\n\n\tconst currentHandle = icache.get<Function>('handle');\n\tif (!currentHandle) {\n\t\tconst handle = injector.subscribe(routerKey);\n\t\tif (handle) {\n\t\t\ticache.set('handle', () => handle);\n\t\t}\n\t}\n\n\tconst router = injector.get<Router>(routerKey);\n\n\tif (router) {\n\t\tconst currentRouteContext = router.getMatchedRoute();\n\t\tconst routeContextMap = router.getOutlet(id);\n\t\tif (routeContextMap && currentRouteContext) {\n\t\t\tif (typeof outletChildren === 'function') {\n\t\t\t\treturn outletChildren({ ...currentRouteContext, router });\n\t\t\t}\n\t\t\tlet matches = Object.keys(outletChildren).reduce(\n\t\t\t\t(matches, key) => {\n\t\t\t\t\tmatches[key] = !!routeContextMap.get(key);\n\t\t\t\t\treturn matches;\n\t\t\t\t},\n\t\t\t\t{} as Matches\n\t\t\t);\n\t\t\tif (matcher) {\n\t\t\t\tmatches = matcher(matches, routeContextMap);\n\t\t\t}\n\t\t\treturn (\n\t\t\t\t<virtual>\n\t\t\t\t\t{Object.keys(matches)\n\t\t\t\t\t\t.filter((key) => matches[key])\n\t\t\t\t\t\t.map((key) => {\n\t\t\t\t\t\t\tconst renderer = outletChildren[key];\n\t\t\t\t\t\t\tif (typeof renderer === 'function') {\n\t\t\t\t\t\t\t\tconst context = routeContextMap.get(key) || currentRouteContext;\n\t\t\t\t\t\t\t\treturn renderer({ ...context, router });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn renderer;\n\t\t\t\t\t\t})}\n\t\t\t\t</virtual>\n\t\t\t);\n\t\t}\n\t}\n\treturn null;\n});\n\nexport default Outlet;\n","import * as button from \"./@dojo/widgets/button/button.m.css\";\nimport * as headerCard from \"./@dojo/widgets/header-card/header-card.m.css\";\nimport * as header from \"./@dojo/widgets/header/header.m.css\";\nimport * as menuItem from \"./@dojo/widgets/menu-item/menu-item.m.css\";\nimport * as outlinedButton from \"./@dojo/widgets/outlined-button/outlined-button.m.css\";\nimport * as raisedButton from \"./@dojo/widgets/raised-button/raised-button.m.css\";\nimport * as textInput from \"./@dojo/widgets/text-input/text-input.m.css\";\nimport * as label from \"./@dojo/widgets/label/label.m.css\";\n\nexport default {\n    \"@dojo/widgets/button\": button,\n    \"@dojo/widgets/header-card\": headerCard,\n    \"@dojo/widgets/header\": header,\n    \"@dojo/widgets/menu-item\": menuItem,\n    \"@dojo/widgets/outlined-button\": outlinedButton,\n    \"@dojo/widgets/raised-button\": raisedButton,\n    \"@dojo/widgets/text-input\": textInput,\n    \"@dojo/widgets/label\": label,\n};\n","import { create, v } from '../core/vdom';\nimport has from '../core/has';\nimport injector from '../core/middleware/injector';\nimport { VNodeProperties } from '../core/interfaces';\nimport { Params } from './interfaces';\nimport Router from './Router';\n\nexport interface LinkProperties extends VNodeProperties {\n\tkey?: string;\n\trouterKey?: string;\n\tisOutlet?: boolean;\n\tparams?: Params;\n\tonClick?: (event: MouseEvent) => void;\n\tto: string;\n}\n\nconst factory = create({ injector }).properties<LinkProperties>();\n\nexport const Link = factory(function Link({ middleware: { injector }, properties, children }) {\n\tlet { routerKey = 'router', to, isOutlet = true, target, params = {}, onClick, ...props } = properties();\n\tconst router = injector.get<Router>(routerKey);\n\tlet href: string | undefined = to;\n\n\tlet linkProps: VNodeProperties;\n\tif (router) {\n\t\tif (isOutlet) {\n\t\t\thref = router.link(href, params);\n\t\t}\n\t\tconst onclick = (event: MouseEvent) => {\n\t\t\tonClick && onClick(event);\n\n\t\t\tif (!event.defaultPrevented && event.button === 0 && !event.metaKey && !event.ctrlKey && !target) {\n\t\t\t\tif (!has('build-serve') || !has('build-time-rendered')) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\thref !== undefined && router.setPath(href);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tlinkProps = { ...props, onclick, href };\n\t} else {\n\t\tlinkProps = { ...props, href };\n\t}\n\treturn v('a', linkProps, children());\n});\n\nexport default Link;\n","import { create, diffProperty, invalidator, w } from '../core/vdom';\nimport { Handle } from '../core/Destroyable';\nimport injector from '../core/middleware/injector';\nimport icache from '../core/middleware/icache';\nimport { SupportedClassName } from '../core/interfaces';\nimport Link, { LinkProperties } from './Link';\nimport Router from './Router';\n\nexport interface ActiveLinkProperties extends LinkProperties {\n\tactiveClasses: SupportedClassName[];\n\tisExact?: boolean;\n}\n\nfunction paramsEqual(linkParams: any = {}, contextParams: any = {}) {\n\treturn Object.keys(linkParams).every((key) => linkParams[key] === contextParams[key]);\n}\n\nconst factory = create({ injector, diffProperty, icache, invalidator }).properties<ActiveLinkProperties>();\n\nexport const ActiveLink = factory(function ActiveLink({\n\tmiddleware: { diffProperty, injector, icache, invalidator },\n\tproperties,\n\tchildren\n}) {\n\tconst { to, routerKey = 'router', params } = properties();\n\tlet { activeClasses, isExact, classes = [], ...props } = properties();\n\n\tdiffProperty('to', (current: ActiveLinkProperties, next: ActiveLinkProperties) => {\n\t\tif (current.to !== next.to) {\n\t\t\tconst router = injector.get<Router>(routerKey);\n\t\t\tconst currentHandle = icache.get<Handle>('handle');\n\t\t\tif (currentHandle) {\n\t\t\t\tcurrentHandle.destroy();\n\t\t\t}\n\t\t\tif (router) {\n\t\t\t\tconst handle = router.on('route', ({ route }) => {\n\t\t\t\t\tif (route.id === to) {\n\t\t\t\t\t\tinvalidator();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\ticache.set('handle', () => handle);\n\t\t\t}\n\t\t\tinvalidator();\n\t\t}\n\t});\n\n\tconst router = injector.get<Router>(routerKey);\n\tif (router) {\n\t\tif (!icache.get('handle')) {\n\t\t\tconst handle = router.on('route', ({ route }) => {\n\t\t\t\tif (route.id === to) {\n\t\t\t\t\tinvalidator();\n\t\t\t\t}\n\t\t\t});\n\t\t\ticache.set('handle', () => handle);\n\t\t}\n\t\tconst context = router.getRoute(to);\n\t\tconst isActive = context && paramsEqual(params, { ...context.params, ...context.queryParams });\n\t\tconst contextIsExact = context && context.isExact();\n\n\t\tclasses = Array.isArray(classes) ? classes : [classes];\n\t\tif (isActive && (!isExact || contextIsExact)) {\n\t\t\tclasses = [...classes, ...activeClasses];\n\t\t}\n\t\tprops = { ...props, classes };\n\t}\n\treturn w(Link, props, children());\n});\n\nexport default ActiveLink;\n","import { create } from '@dojo/framework/core/vdom';\nimport coreTheme, {\n\tThemeProperties as CoreThemeProperties\n} from '@dojo/framework/core/middleware/theme';\nimport { ThemeWithVariant, ClassNames, Theme } from '@dojo/framework/core/interfaces';\nimport { isThemeInjectorPayloadWithVariant } from '@dojo/framework/core/ThemeInjector';\n\nconst factory = create({ coreTheme });\nexport const THEME_KEY = ' _key';\n\nfunction uppercaseFirstChar(value: string) {\n\treturn `${value.charAt(0).toUpperCase()}${value.slice(1)}`;\n}\n\nfunction lowercaseFirstChar(value: string) {\n\treturn `${value.charAt(0).toLowerCase()}${value.slice(1)}`;\n}\n\nfunction isThemeWithVariant(theme: any): theme is ThemeWithVariant {\n\treturn theme && theme.hasOwnProperty('variant');\n}\n\nexport interface ThemeProperties extends CoreThemeProperties {}\n\nexport const theme = factory(function({ middleware: { coreTheme }, properties }) {\n\tfunction getTheme() {\n\t\tconst { theme } = properties();\n\t\tif (theme) {\n\t\t\treturn theme;\n\t\t}\n\n\t\tconst themePayload = coreTheme.get();\n\t\tif (isThemeInjectorPayloadWithVariant(themePayload)) {\n\t\t\treturn { theme: themePayload.theme, variant: themePayload.variant };\n\t\t} else if (themePayload) {\n\t\t\treturn themePayload.theme;\n\t\t}\n\t}\n\n\treturn {\n\t\tcompose: <T extends ClassNames, B extends ClassNames>(\n\t\t\tbaseCss: B,\n\t\t\tcss: T,\n\t\t\tprefix?: string\n\t\t): Theme | ThemeWithVariant => {\n\t\t\tconst theme = getTheme();\n\t\t\tconst baseKey = baseCss[THEME_KEY];\n\t\t\tconst variantKey = css[THEME_KEY];\n\t\t\tconst virtualCss = Object.keys(baseCss).reduce(\n\t\t\t\t(virtualCss, key) => {\n\t\t\t\t\tif (key === THEME_KEY) {\n\t\t\t\t\t\treturn virtualCss;\n\t\t\t\t\t}\n\t\t\t\t\tif (prefix && !virtualCss[`${prefix}${uppercaseFirstChar(key)}`]) {\n\t\t\t\t\t\tvirtualCss[`${prefix}${uppercaseFirstChar(key)}`] = ' ';\n\t\t\t\t\t}\n\t\t\t\t\tif (!css[key]) {\n\t\t\t\t\t\tvirtualCss[key] = ' ';\n\t\t\t\t\t}\n\t\t\t\t\treturn virtualCss;\n\t\t\t\t},\n\t\t\t\t{ [THEME_KEY]: variantKey } as ClassNames\n\t\t\t);\n\t\t\tconst virtualTheme = coreTheme.classes(virtualCss);\n\t\t\tconst variantTheme = coreTheme.classes(css);\n\t\t\tlet baseTheme = coreTheme.classes(baseCss);\n\t\t\tif (prefix) {\n\t\t\t\tconst prefixedCss = Object.keys({ ...virtualTheme, ...variantTheme }).reduce(\n\t\t\t\t\t(prefixCss, key) => {\n\t\t\t\t\t\tif (key.indexOf(prefix) === 0 && key !== prefix) {\n\t\t\t\t\t\t\tconst classKey = lowercaseFirstChar(key.replace(prefix, ''));\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t!variantTheme[key] &&\n\t\t\t\t\t\t\t\tvirtualTheme[key] &&\n\t\t\t\t\t\t\t\tvirtualTheme[key].trim()\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tprefixCss[classKey] = `${baseTheme[classKey]} ${virtualTheme[\n\t\t\t\t\t\t\t\t\tkey\n\t\t\t\t\t\t\t\t].trim()}`;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (variantTheme[key]) {\n\t\t\t\t\t\t\t\tprefixCss[classKey] = variantTheme[key];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn prefixCss;\n\t\t\t\t\t},\n\t\t\t\t\t{} as ClassNames\n\t\t\t\t);\n\t\t\t\tbaseTheme = { ...baseTheme, ...prefixedCss };\n\n\t\t\t\tif (isThemeWithVariant(theme)) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttheme: {\n\t\t\t\t\t\t\ttheme: {\n\t\t\t\t\t\t\t\t...theme.theme.theme,\n\t\t\t\t\t\t\t\t[baseKey]: baseTheme\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tvariants: theme.theme.variants\n\t\t\t\t\t\t},\n\t\t\t\t\t\tvariant: theme.variant\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn {\n\t\t\t\t\t...theme,\n\t\t\t\t\t[baseKey]: baseTheme\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst constructedTheme = Object.keys(baseTheme).reduce(\n\t\t\t\t(theme, key) => {\n\t\t\t\t\tif (key === THEME_KEY) {\n\t\t\t\t\t\treturn theme;\n\t\t\t\t\t}\n\t\t\t\t\tconst variantComposesClass = variantTheme[key] && variantTheme[key].trim();\n\t\t\t\t\tif (variantTheme[key]) {\n\t\t\t\t\t\ttheme[key] = variantComposesClass;\n\t\t\t\t\t} else if (virtualTheme[key] && virtualTheme[key].trim()) {\n\t\t\t\t\t\ttheme[key] = `${theme[key]} ${virtualTheme[key].trim()}`;\n\t\t\t\t\t}\n\t\t\t\t\treturn theme;\n\t\t\t\t},\n\t\t\t\t{ ...baseTheme } as ClassNames\n\t\t\t);\n\n\t\t\tif (isThemeWithVariant(theme)) {\n\t\t\t\treturn {\n\t\t\t\t\ttheme: {\n\t\t\t\t\t\ttheme: {\n\t\t\t\t\t\t\t...theme.theme.theme,\n\t\t\t\t\t\t\t[baseKey]: constructedTheme\n\t\t\t\t\t\t},\n\t\t\t\t\t\tvariants: theme.theme.variants\n\t\t\t\t\t},\n\t\t\t\t\tvariant: theme.variant\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t...theme,\n\t\t\t\t[baseKey]: constructedTheme\n\t\t\t};\n\t\t},\n\t\t...coreTheme\n\t};\n});\n\nexport default theme;\n","import { RenderResult } from '@dojo/framework/core/interfaces';\nimport focus from '@dojo/framework/core/middleware/focus';\nimport { createICacheMiddleware } from '@dojo/framework/core/middleware/icache';\nimport theme from '@dojo/framework/core/middleware/theme';\nimport validity from '@dojo/framework/core/middleware/validity';\nimport { create, diffProperty, invalidator, tsx } from '@dojo/framework/core/vdom';\nimport { formatAriaProperties } from '../common/util';\nimport HelperText from '../helper-text/index';\nimport Label from '../label/index';\nimport * as css from '../theme/default/text-input.m.css';\n\nexport type TextInputType =\n\t| 'text'\n\t| 'email'\n\t| 'number'\n\t| 'password'\n\t| 'search'\n\t| 'tel'\n\t| 'url'\n\t| 'date';\n\nexport interface BaseInputProperties<T extends { value: any } = { value: string }> {\n\t/** Custom aria attributes */\n\taria?: { [key: string]: string | null };\n\t/** Should the field autocomplete */\n\tautocomplete?: boolean | string;\n\t/** The disabled property of the input */\n\tdisabled?: boolean;\n\t/** Text to display below the input */\n\thelperText?: string;\n\t/** Hides the label for a11y purposes */\n\tlabelHidden?: boolean;\n\t/** The name property of the input */\n\tname?: string;\n\t/** Callback fired when the input is blurred */\n\tonBlur?(): void;\n\t/** Callback fired when the input is focused */\n\tonFocus?(): void;\n\t/** Callback fired when a key is pressed down */\n\tonKeyDown?(key: number, preventDefault: () => void): void;\n\t/** Callback fired when a key is released */\n\tonKeyUp?(key: number, preventDefault: () => void): void;\n\t/** Callback fired when the input validation changes */\n\tonValidate?: (valid: boolean | undefined, message: string) => void;\n\t/** Callback fired when the input value changes */\n\tonValue?(value?: T['value']): void;\n\t/** Callback fired when the input is clicked */\n\tonClick?(): void;\n\t/** Callback fired when the pointer enters the input */\n\tonOver?(): void;\n\t/** Callback fired when the pointer leaves the input */\n\tonOut?(): void;\n\t/** Placeholder text */\n\tplaceholder?: string;\n\t/** The readonly attribute of the input */\n\treadOnly?: boolean;\n\t/** The required attribute of the input */\n\trequired?: boolean;\n\t/** The initial value */\n\tinitialValue?: T['value'];\n\t/** The controlled value */\n\tvalue?: T['value'];\n\t/** The id to be applied to the input */\n\twidgetId?: string;\n}\n\nexport interface TextInputChildren {\n\t/** The label to be displayed above the input */\n\tlabel?: RenderResult;\n\t/** Renderer for leading content */\n\tleading?: RenderResult;\n\t/** Renderer for trailing content */\n\ttrailing?: RenderResult;\n}\n\nexport interface TextInputProperties extends BaseInputProperties {\n\t/** Custom validator used to validate the contents of the input */\n\tcustomValidator?: (value: string) => { valid?: boolean; message?: string } | void;\n\t/** The min value a number can be */\n\tmin?: number | string;\n\t/** The max value a number can be */\n\tmax?: number | string;\n\t/** The step to increment the number value by */\n\tstep?: number | string;\n\t/** Maximum number of characters allowed in the input */\n\tmaxLength?: number | string;\n\t/** Minimum number of characters allowed in the input */\n\tminLength?: number | string;\n\t/** Pattern used as part of validation */\n\tpattern?: string | RegExp;\n\t/** Input type, e.g. text, email, tel, etc. */\n\ttype?: TextInputType;\n\t/** Represents if the input value is valid */\n\tvalid?: { valid?: boolean; message?: string } | boolean;\n}\n\nfunction formatAutocomplete(autocomplete: string | boolean | undefined): string | undefined {\n\tif (typeof autocomplete === 'boolean') {\n\t\treturn autocomplete ? 'on' : 'off';\n\t}\n\treturn autocomplete;\n}\n\ninterface TextInputICache {\n\tuuid: string;\n\tdirty: boolean;\n\tvalue?: string;\n\tinitialValue?: string;\n}\n\nconst factory = create({\n\ttheme,\n\ticache: createICacheMiddleware<TextInputICache>(),\n\tvalidity,\n\tfocus,\n\tdiffProperty,\n\tinvalidator\n})\n\t.properties<TextInputProperties>()\n\t.children<TextInputChildren | undefined>();\n\nexport const TextInput = factory(function TextInput({\n\tmiddleware: { icache, theme, validity, focus, diffProperty, invalidator },\n\tproperties,\n\tchildren,\n\tid\n}) {\n\tdiffProperty('pattern', (previous: TextInputProperties, next: TextInputProperties) => {\n\t\tconst value = next.pattern instanceof RegExp ? next.pattern.source : next.pattern;\n\t\tif (value !== previous.pattern) {\n\t\t\tinvalidator();\n\t\t}\n\t});\n\n\tconst themeCss = theme.classes(css);\n\tconst dirty = icache.getOrSet('dirty', false);\n\n\tconst {\n\t\taria = {},\n\t\tautocomplete,\n\t\tclasses,\n\t\tcustomValidator,\n\t\tdisabled,\n\t\thelperText,\n\t\tlabelHidden = false,\n\t\tmax,\n\t\tmaxLength,\n\t\tmin,\n\t\tminLength,\n\t\tname,\n\t\tonBlur,\n\t\tonClick,\n\t\tonFocus,\n\t\tonKeyDown,\n\t\tonKeyUp,\n\t\tonOut,\n\t\tonOver,\n\t\tonValidate,\n\t\tonValue,\n\t\tpattern: patternValue,\n\t\tplaceholder,\n\t\treadOnly,\n\t\trequired,\n\t\tstep,\n\t\ttheme: themeProp,\n\t\ttype = 'text',\n\t\tinitialValue,\n\t\tvalid: validValue = { valid: undefined, message: '' },\n\t\twidgetId = `text-input-${id}`\n\t} = properties();\n\n\tlet { value } = properties();\n\tconst [{ label, leading, trailing } = {} as TextInputChildren] = children();\n\n\tif (value === undefined) {\n\t\tvalue = icache.get('value');\n\t\tconst existingInitialValue = icache.get('initialValue');\n\n\t\tif (initialValue !== existingInitialValue) {\n\t\t\ticache.set('value', initialValue);\n\t\t\ticache.set('initialValue', initialValue);\n\t\t\tvalue = initialValue;\n\t\t}\n\t}\n\n\tconst pattern = patternValue instanceof RegExp ? patternValue.source : patternValue;\n\n\tfunction _callOnValidate(valid: boolean | undefined, message: string) {\n\t\tlet { valid: previousValid } = properties();\n\t\tlet previousMessage: string | undefined;\n\n\t\tif (typeof previousValid === 'object') {\n\t\t\tpreviousMessage = previousValid.message;\n\t\t\tpreviousValid = previousValid.valid;\n\t\t}\n\n\t\tif (valid !== previousValid || message !== previousMessage) {\n\t\t\tonValidate && onValidate(valid, message);\n\t\t}\n\t}\n\n\tif (onValidate) {\n\t\tif (value === '' && !dirty) {\n\t\t\t_callOnValidate(undefined, '');\n\t\t} else {\n\t\t\ticache.set('dirty', true);\n\t\t\tlet { valid, message = '' } = validity.get('input', value || '');\n\t\t\tif (valid && customValidator) {\n\t\t\t\tconst customValid = customValidator(value || '');\n\t\t\t\tif (customValid) {\n\t\t\t\t\tvalid = customValid.valid;\n\t\t\t\t\tmessage = customValid.message || '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_callOnValidate(valid, message);\n\t\t}\n\t}\n\n\tconst { valid, message } =\n\t\ttypeof validValue === 'boolean' ? { valid: validValue, message: '' } : validValue;\n\n\tconst computedHelperText = (valid === false && message) || helperText;\n\tconst inputFocused = focus.isFocused('input');\n\n\treturn (\n\t\t<div key=\"root\" classes={[theme.variant(), themeCss.root]} role=\"presentation\">\n\t\t\t<div\n\t\t\t\tkey=\"wrapper\"\n\t\t\t\tclasses={[\n\t\t\t\t\tthemeCss.wrapper,\n\t\t\t\t\tdisabled ? themeCss.disabled : null,\n\t\t\t\t\tinputFocused ? themeCss.focused : null,\n\t\t\t\t\tvalid === false ? themeCss.invalid : null,\n\t\t\t\t\tvalid === true ? themeCss.valid : null,\n\t\t\t\t\treadOnly ? themeCss.readonly : null,\n\t\t\t\t\trequired ? themeCss.required : null,\n\t\t\t\t\tleading ? themeCss.hasLeading : null,\n\t\t\t\t\ttrailing ? themeCss.hasTrailing : null,\n\t\t\t\t\t!label || labelHidden ? themeCss.noLabel : null\n\t\t\t\t]}\n\t\t\t\trole=\"presentation\"\n\t\t\t>\n\t\t\t\t{label && (\n\t\t\t\t\t<Label\n\t\t\t\t\t\ttheme={themeProp}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tvalid={valid}\n\t\t\t\t\t\tfocused={inputFocused}\n\t\t\t\t\t\treadOnly={readOnly}\n\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\thidden={labelHidden}\n\t\t\t\t\t\tforId={widgetId}\n\t\t\t\t\t\tactive={!!value || inputFocused}\n\t\t\t\t\t>\n\t\t\t\t\t\t{label}\n\t\t\t\t\t</Label>\n\t\t\t\t)}\n\t\t\t\t<div\n\t\t\t\t\tkey=\"inputWrapper\"\n\t\t\t\t\tclasses={[\n\t\t\t\t\t\tthemeCss.inputWrapper,\n\t\t\t\t\t\tinputFocused ? themeCss.inputWrapperFocused : undefined\n\t\t\t\t\t]}\n\t\t\t\t\trole=\"presentation\"\n\t\t\t\t>\n\t\t\t\t\t{leading}\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...formatAriaProperties(aria)}\n\t\t\t\t\t\taria-invalid={valid === false ? 'true' : null}\n\t\t\t\t\t\tautocomplete={formatAutocomplete(autocomplete)}\n\t\t\t\t\t\tclasses={themeCss.input}\n\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\tid={widgetId}\n\t\t\t\t\t\tfocus={focus.shouldFocus}\n\t\t\t\t\t\tkey={'input'}\n\t\t\t\t\t\tmax={max}\n\t\t\t\t\t\tmaxlength={maxLength ? `${maxLength}` : null}\n\t\t\t\t\t\tmin={min}\n\t\t\t\t\t\tminlength={minLength ? `${minLength}` : null}\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\tpattern={pattern}\n\t\t\t\t\t\tplaceholder={placeholder}\n\t\t\t\t\t\treadOnly={readOnly}\n\t\t\t\t\t\taria-readonly={readOnly ? 'true' : null}\n\t\t\t\t\t\trequired={required}\n\t\t\t\t\t\tstep={step}\n\t\t\t\t\t\ttype={type}\n\t\t\t\t\t\tvalue={value}\n\t\t\t\t\t\tonblur={() => {\n\t\t\t\t\t\t\tonBlur && onBlur();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonfocus={() => {\n\t\t\t\t\t\t\tonFocus && onFocus();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\toninput={(event: Event) => {\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\tconst value = (event.target as HTMLInputElement).value;\n\t\t\t\t\t\t\ticache.set('value', value);\n\t\t\t\t\t\t\tonValue && onValue(value);\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonkeydown={(event: KeyboardEvent) => {\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\tonKeyDown && onKeyDown(event.which, () => event.preventDefault());\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonkeyup={(event: KeyboardEvent) => {\n\t\t\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t\t\t\tonKeyUp && onKeyUp(event.which, () => event.preventDefault());\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonclick={() => {\n\t\t\t\t\t\t\tonClick && onClick();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonpointerenter={() => {\n\t\t\t\t\t\t\tonOver && onOver();\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonpointerleave={() => {\n\t\t\t\t\t\t\tonOut && onOut();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t{trailing}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<HelperText\n\t\t\t\ttext={computedHelperText}\n\t\t\t\tvalid={valid}\n\t\t\t\tclasses={classes}\n\t\t\t\ttheme={themeProp}\n\t\t\t/>\n\t\t</div>\n\t);\n});\n\nexport interface AddonProperties {\n\tfilled?: boolean;\n}\n\nconst addonFactory = create({\n\ttheme\n}).properties<AddonProperties>();\n\nexport const Addon = addonFactory(function Addon({ middleware: { theme }, properties, children }) {\n\tconst themeCss = theme.classes(css);\n\tconst { filled } = properties();\n\n\treturn (\n\t\t<span classes={[themeCss.addonRoot, filled ? themeCss.addonFilled : null]}>\n\t\t\t{children()}\n\t\t</span>\n\t);\n});\n\nexport default TextInput;\n","import { create, w, v } from \"@dojo/framework/core/vdom\";\nimport Link from \"@dojo/framework/routing/ActiveLink\";\nimport Header from \"@dojo/widgets/header\";\n\nimport * as css from \"./styles/Menu.m.css\";\n\nconst factory = create();\n\nexport default factory(function Menu() {\n    return w(Header, {}, [\n        {\n            title: null,\n            actions: v(\"virtual\", [\n                w(\n                    Link,\n                    {\n                        to: \"text\",\n                        classes: [css.link],\n                        activeClasses: [css.selected],\n                    },\n                    [\"Text\"]\n                ),\n                w(\n                    Link,\n                    {\n                        to: \"buttons\",\n                        classes: [css.link],\n                        activeClasses: [css.selected],\n                    },\n                    [\"BUTTONS\"]\n                ),\n                w(\n                    Link,\n                    {\n                        to: \"input\",\n                        classes: [css.link],\n                        activeClasses: [css.selected],\n                    },\n                    [\"Text-input\"]\n                ),\n                w(\n                    Link,\n                    {\n                        to: \"anderes\",\n                        classes: [css.link],\n                        activeClasses: [css.selected],\n                    },\n                    [\"anderes\"]\n                ),\n            ]),\n        },\n    ]);\n});\n","import { create, tsx } from \"@dojo/framework/core/vdom\";\nimport * as css from \"./styles/text.m.css\";\n\nconst factory = create();\n\nexport default factory(function () {\n    return (\n        <div classes={css.root}>\n            <h1>Text</h1>\n            <ul>\n                <li> font-family: Roboto,sans-serif</li>\n                <li>font-size: 16px</li>\n                <li>font-color: #424242</li>\n                <li>font-weight: normal</li>\n                <li>text-align: justify</li>\n            </ul>\n            <h1>Links</h1>\n\n            <a href=\"https://www.google.de\" target=\"_blank\">\n                Google\n            </a>\n            <ul>\n                <li>text-decoration: underline</li>\n                <li>color: black</li>\n            </ul>\n            <h1>Überschriften</h1>\n            <ul>\n                <li>color: black</li>\n                <h1> Header 1</h1>\n                <li>font-size: 50px</li>\n                <h2> Header 2</h2>\n                <li>font-size: 28px</li>\n                <h3> Header 3</h3>\n                <li>font-size: 22px</li>\n            </ul>\n            <div classes={css.text}>\n                <h1>Beispiel</h1>\n\n                <p>\n                    Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed\n                    diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum\n                    dolor sit amet.\n                </p>\n                <h2>Text mit inline link</h2>\n                <p>\n                    Lorem ipsum dolor sit amet, consetetur sadipscing elitr, {<a href=\"https://visttransport.de\">Vist Transport</a>} sed diam nonumy eirmod\n                    tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet\n                    clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed\n                    diam nonumy eirmod tempor invidunt.\n                </p>\n                <h3>Noch etwas</h3>\n                <p>\n                    Ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd\n                    gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.\n                </p>\n            </div>\n        </div>\n    );\n});\n","import global from '../../shim/global';\nimport { create, diffProperty, node, destroy, invalidator } from '../vdom';\nimport { createICacheMiddleware } from './icache';\nimport { FocusProperties } from '../interfaces';\n\nexport { FocusProperties } from '../interfaces';\n\nexport interface FocusState {\n\tcurrent: number;\n}\n\nconst icache = createICacheMiddleware<FocusState>();\n\nconst factory = create({ icache, diffProperty, node, destroy, invalidator }).properties<FocusProperties>();\n\nexport const focus = factory(({ middleware: { icache, diffProperty, node, destroy, invalidator } }) => {\n\tlet initialized = false;\n\tlet currentElement: HTMLElement | undefined;\n\tlet previous = 0;\n\tconst nodeSet = new Set<HTMLElement>();\n\tdiffProperty('focus', (_: FocusProperties, next: FocusProperties) => {\n\t\tconst result = next.focus && next.focus();\n\t\tif (result) {\n\t\t\tconst current = icache.getOrSet('current', 0);\n\t\t\ticache.set('current', current + 1);\n\t\t}\n\t});\n\tfunction onFocusChange() {\n\t\tconst activeElement = global.document.activeElement;\n\t\tif ((nodeSet.has(currentElement!) || nodeSet.has(activeElement)) && currentElement !== activeElement) {\n\t\t\tinvalidator();\n\t\t}\n\t\tcurrentElement = activeElement;\n\t}\n\tdestroy(() => {\n\t\tglobal.document.removeEventListener('focusin', onFocusChange);\n\t\tglobal.document.removeEventListener('focusout', onFocusChange);\n\t\tnodeSet.clear();\n\t});\n\treturn {\n\t\tshouldFocus(): boolean {\n\t\t\tconst current = icache.get('current') || 0;\n\t\t\tconst shouldFocus = current !== previous;\n\t\t\tprevious = current;\n\t\t\treturn shouldFocus;\n\t\t},\n\t\tfocus(): void {\n\t\t\tconst current = icache.getOrSet('current', 0);\n\t\t\ticache.set('current', current + 1);\n\t\t},\n\t\tisFocused(key: string | number): boolean {\n\t\t\tconst domNode = node.get(key);\n\t\t\tif (!domNode) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tnodeSet.add(domNode);\n\t\t\tif (!initialized) {\n\t\t\t\tglobal.document.addEventListener('focusin', onFocusChange);\n\t\t\t\tglobal.document.addEventListener('focusout', onFocusChange);\n\t\t\t\tinitialized = true;\n\t\t\t}\n\t\t\treturn global.document.activeElement === domNode;\n\t\t}\n\t};\n});\n\nexport default focus;\n","import { create, tsx } from \"@dojo/framework/core/vdom\";\nimport * as css from \"./styles/buttons.m.css\";\nimport Button from \"@dojo/widgets/button\";\nimport OutlinedButton from \"@dojo/widgets/outlined-button\";\n\nconst factory = create();\n\nexport default factory(function () {\n    return (\n        <div classes={css.root}>\n            <h1>Buttons</h1>\n            <ul>\n                <li>Die Beschriftungen der Butons sollten max. 3 Wörter enthalten</li>\n                <li>Zentriert, Sobald sinnvoll</li>\n                <li>Sobald sinnvoll können unter den einzelnen Buttons Erklärungen zu den einzelnen Aktionen platziert sein</li>\n            </ul>\n            <h2>Style</h2>\n            <ul>\n                <li>border-radius: 5px</li>\n                <li>text-transform: uppercase</li>\n                <li>padding: 5px 15px</li>\n                <li>height: 40px</li>\n            </ul>\n            <h3>Primäre Buttons</h3>\n            <ul>\n                <li>z.B. Angebot anfordern</li>\n                <ul>\n                    <li>color: white</li>\n                    <li> background-color: #51baf8</li>\n                </ul>\n                <li>:hover</li>\n                <ul>\n                    <li> background-color: #009df8</li>\n                </ul>\n            </ul>\n            <div classes={css.center}>\n                <Button> Angebot anfordern</Button>\n            </div>\n            <h3>Sekundäre Buttons</h3>\n            <ul>\n                <li>z.B. Download</li>\n                <ul>\n                    <li> color: #51baf8</li>\n                    <li> background-color:white</li>\n                    <li> border: 1px solid #51baf8</li>\n                </ul>\n                <li>:hover</li>\n                <ul>\n                    <li> color: #008fea</li>\n                    <li>border-color: #008fea</li>\n                </ul>\n            </ul>\n            <div classes={css.center}>\n                <OutlinedButton>download</OutlinedButton>\n            </div>\n            <h3>Buttons mit Untertitel</h3>\n            <div classes={css.center}>\n                <Button>direkt preisnafrage senden</Button>\n                <div classes={css.untertitel}> Die Umzugsanfrage ist kostenlos und unverbindlich.</div>\n            </div>\n            <p>\n                <ul>\n                    <li>Button-Untertitel</li>\n                    <ul>\n                        <li>font-size: 14px</li>\n                        <li>color: black</li>\n                        <li>font-style: italic</li>\n                    </ul>\n                </ul>\n            </p>\n        </div>\n    );\n});\n","import { create, tsx } from \"@dojo/framework/core/vdom\";\nimport * as css from \"./styles/anderes.m.css\";\n\nconst factory = create();\n\nexport default factory(function Anderes({}) {\n    return (\n        <div classes={css.root}>\n            <h1>Navigation</h1>\n            <p>\n                <ul>\n                    <li>horizontale Navigationsleiste, (Desktop)</li>\n                    <li># der Links innerhalb der Navigationsleiste sollte auf dem Desktop/iPad innerhalb einer Zeile darstellbar sein</li>\n                    <ul>\n                        <li>background-color: #333333</li>\n                        <li>color:#87cefa</li>\n                        <li>box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5)</li>\n                    </ul>\n                </ul>\n            </p>\n\n            <h1>Komplementär Farben</h1>\n            <ul>\n                <li>\n                    Das gegenwärtige\n                    <span styles={{ color: \"#ff0099\" }}> ROSA </span>, sowie sämtliche Töne werden ersetzt:\n                    <ul>\n                        <li>\n                            <span styles={{ color: \"#f4832a\" }}>#f4832a</span>\n                        </li>\n                        <li>\n                            <span styles={{ color: \"#f79755\" }}>#f79755</span>\n                        </li>\n                        <li>\n                            <span styles={{ color: \"#fab387\" }}>#fab387</span>\n                        </li>\n                    </ul>\n                </li>\n            </ul>\n\n            <h1>Farbpalette</h1>\n            <p>\n                <ul>\n                    <li>Die Schwarz/Grautöne sind den Texten bzw. Links vorbehalten</li>\n                    <li>Die Blautöne sind für die Buttons, Inputs, Dropdowns</li>\n                    <li>Die orangenen Töne sollen dazu (sparsam) verwendet werden, die Aufmerksamkeit des Nutzers auf bestimmte Text-Passagen zu lenken</li>\n                </ul>\n            </p>\n            <div classes={css.palette}>\n                <div styles={{ background: \"black\" }} classes={css.rectangle}>\n                    black\n                </div>\n                <div styles={{ background: \"#333\" }} classes={css.rectangle}>\n                    #333333\n                </div>\n                <div styles={{ background: \"#424242\" }} classes={css.rectangle}>\n                    #424242\n                </div>\n                <div styles={{ background: \"#9e9e9e\" }} classes={[css.rectangle]}>\n                    #9e9e9e\n                </div>\n                <div styles={{ background: \"#008fea\" }} classes={css.rectangle}>\n                    #008fea\n                </div>\n                <div styles={{ background: \"#009df8\" }} classes={css.rectangle}>\n                    #009df8\n                </div>\n                <div styles={{ background: \"#51baf8\" }} classes={css.rectangle}>\n                    #51baf8\n                </div>\n                <div styles={{ background: \"#87cefa\" }} classes={css.rectangle}>\n                    #87cefa\n                </div>\n                <div styles={{ background: \"#f4832a\" }} classes={css.rectangle}>\n                    #f4832a\n                </div>\n\n                <div styles={{ background: \"#f79755\" }} classes={css.rectangle}>\n                    #f79755\n                </div>\n                <div styles={{ background: \"#fab387\" }} classes={css.rectangle}>\n                    #fab387\n                </div>\n            </div>\n        </div>\n    );\n});\n","import { create, node, invalidator } from '../vdom';\n\nconst factory = create({ node, invalidator });\n\nexport const validity = factory(function({ middleware: { node, invalidator } }) {\n\treturn {\n\t\tget(key: string | number, value: string) {\n\t\t\tconst domNode = node.get(key) as HTMLFormElement | undefined;\n\n\t\t\tif (!domNode) {\n\t\t\t\treturn { valid: undefined, message: '' };\n\t\t\t}\n\n\t\t\tif (value !== domNode.value) {\n\t\t\t\tsetTimeout(() => invalidator());\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tvalid: domNode.validity.valid,\n\t\t\t\tmessage: domNode.validationMessage\n\t\t\t};\n\t\t}\n\t};\n});\n\nexport default validity;\n","import { create, tsx } from \"@dojo/framework/core/vdom\";\nimport * as css from \"./styles/text-input.m.css\";\nimport TextInput from \"@dojo/widgets/text-input\";\nimport Label from \"@dojo/widgets/label\";\n\nconst factory = create();\n\nexport default factory(function () {\n    return (\n        <div classes={css.root}>\n            <h1>Text Input / Dropdown</h1>\n            <div classes={css.wrapper}>\n                <TextInput>\n                    {{\n                        label: <Label>Text-Eingabe</Label>,\n                    }}\n                </TextInput>\n            </div>\n            <div classes={css.wrapper}>\n                <TextInput required>\n                    {{\n                        label: <Label>Weitere Eingabe</Label>,\n                    }}\n                </TextInput>\n            </div>\n\n            <p>\n                <h2>Select</h2>\n                <h3>Label</h3>\n                <ul>\n                    <li>text-transform: uppercase</li>\n                    <li>\n                        <span styles={{ color: \"#f4832a\" }}>*</span> color: #f4832a\n                    </li>\n                </ul>\n                <h3>Input</h3>\n                <ul>\n                    <li>height: 40px</li>\n                    <li>border-radius: 5px</li>\n                    <li>border-color: #9e9e9e</li>\n                    <li>:focus</li>\n                    <ul>\n                        <li>border-color: #008fea</li>\n                    </ul>\n                </ul>\n                <h2>Dropdown</h2>\n                <ul>\n                    <li>analog zu Text Input</li>\n                </ul>\n            </p>\n        </div>\n    );\n});\n","import { create, v, w } from \"@dojo/framework/core/vdom\";\nimport theme from \"@dojo/framework/core/middleware/theme\";\nimport Outlet from \"@dojo/framework/routing/Outlet\";\nimport vt from \"../src/themes/vt-design/theme\";\n\nimport Menu from \"./widgets/Menu\";\nimport Text from \"./widgets/Text\";\nimport Buttons from \"./widgets/Buttons\";\nimport Anderes from \"./widgets/Anderes\";\nimport TextInput from \"./widgets/Text-input\";\n\nimport * as css from \"./App.m.css\";\n\nconst factory = create({ theme });\n\nexport default factory(function App({ middleware: { theme } }) {\n    if (!theme.get()) {\n        theme.set(vt);\n    }\n    return v(\"div\", { classes: [css.root] }, [\n        w(Menu, {}),\n        w(Outlet, { id: \"main\" }, [\n            {\n                text: w(Text, {}),\n                buttons: w(Buttons, {}),\n                input: w(TextInput, {}),\n                anderes: w(Anderes, {}),\n            },\n        ]),\n    ]);\n});\n","import renderer, { w } from \"@dojo/framework/core/vdom\";\nimport Registry from \"@dojo/framework/core/Registry\";\nimport { registerRouterInjector } from \"@dojo/framework/routing/RouterInjector\";\n\nimport routes from \"./routes\";\nimport App from \"./App\";\n\nconst registry = new Registry();\nregisterRouterInjector(routes, registry);\n\nconst r = renderer(() => w(App, {}));\nr.mount({ registry, domNode: document.getElementById(\"app\") });\n","import { Registry } from '../core/Registry';\nimport { RegistryLabel } from '../core/interfaces';\n\nimport { Router } from './Router';\nimport { RouteConfig, RouterOptions } from './interfaces';\n\n/**\n * Router Injector Options\n *\n */\nexport interface RouterInjectorOptions extends RouterOptions {\n\tkey?: RegistryLabel;\n}\n\n/**\n * Creates a router instance for a specific History manager (default is `HashHistory`) and registers\n * the route configuration.\n *\n * @param config The route config to register for the router\n * @param registry An optional registry that defaults to the global registry\n * @param options The router injector options\n */\nexport function registerRouterInjector(\n\tconfig: RouteConfig[],\n\tregistry: Registry,\n\toptions: RouterInjectorOptions = {}\n): Router {\n\tconst { key = 'router', ...routerOptions } = options;\n\n\tif (registry.hasInjector(key)) {\n\t\tthrow new Error('Router has already been defined');\n\t}\n\tconst router = new Router(config, routerOptions);\n\tregistry.defineInjector(key, (invalidator: () => void) => {\n\t\trouter.on('nav', () => invalidator());\n\t\treturn () => router;\n\t});\n\treturn router;\n}\n","export default [\n    {\n        id: \"text\",\n        path: \"text\",\n        outlet: \"main\",\n        defaultRoute: true,\n    },\n    {\n        id: \"buttons\",\n        path: \"buttons\",\n        outlet: \"main\",\n    },\n    {\n        id: \"input\",\n        path: \"input\",\n        outlet: \"main\",\n    },\n    {\n        id: \"anderes\",\n        path: \"anderes\",\n        outlet: \"main\",\n    },\n];\n"],"sourceRoot":""}